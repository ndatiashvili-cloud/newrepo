import{a as nl,j as e,u as $e,b as li,c as us,Q as il,d as ol}from"./query-CmN1weH-.js";import{d as ll,g as cl,r as g,R as B,e as dl,N as ul,u as ci,O as hl,L as Ca,f as ml,h as gl,i as Ps,j as xl,k as Me,B as fl}from"./vendor-Bp9gd_D6.js";import{t as pl,c as yl,L as vl,S as di,W as _e,A as kt,M as bl,N as et,a as jl,C as ui,b as Ft,d as qa,e as Ot,f as wl,g as Nl,B as Ta,U as hi,h as kl,i as Os,j as mi,k as it,l as yt,m as Zs,T as Za,n as ze,o as hs,F as Sl,p as Cl,G as Ys,V as gi,q as Tl,r as xi,P as Al,X as Pl,s as Dl,u as qt,D as fi,v as St,w as Rl,R as Ya,x as Xa,I as pi,y as _r,z as yi,E as Ml,H as vi,J as Zt,K as Fr,O as El,Q as bi,Y as Us,Z as Ll,_ as _l,$ as Fl,a0 as Vl,a1 as Il,a2 as Bl,a3 as Ol,a4 as Ul,a5 as $l,a6 as zl,a7 as ns,a8 as Vr,a9 as ia,aa as Ir,ab as Kl,ac as Hl,ad as Wl,ae as Gl,af as ql}from"./ui-BGNElAg4.js";import{R as vt,A as Aa,C as bt,X as jt,Y as wt,T as Nt,a as Pa,L as oa,b as la,c as Zl,B as Br,d as ca,e as Yl}from"./charts-g087siio.js";import{L as ps,M as Xl,T as Ql,a as Jl,b as ec,P as tc,u as sc}from"./maps-CGjpB9l_.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var Ds={},Or;function ac(){if(Or)return Ds;Or=1;var t=ll();return Ds.createRoot=t.createRoot,Ds.hydrateRoot=t.hydrateRoot,Ds}var rc=ac();const nc=cl(rc),ic="/api/v1",Z=nl.create({baseURL:ic,headers:{"Content-Type":"application/json"}});Z.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t});const Lt={login:(t,s)=>{const a=new URLSearchParams;return a.append("username",t),a.append("password",s),Z.post("/auth/login",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:()=>{localStorage.removeItem("token")},me:()=>Z.get("/auth/me"),getCurrentUser:()=>Z.get("/auth/me"),listUsers:()=>Z.get("/users"),register:t=>Z.post("/auth/register",t),updateUser:(t,s)=>Z.put(`/users/${t}`,s),deleteUser:t=>Z.delete(`/users/${t}`)},Ee={getAll:()=>Z.get("/devices"),getByRegion:t=>Z.get(`/devices?region=${t}`),getByBranch:t=>Z.get(`/devices?branch=${t}`),getByType:t=>Z.get(`/devices?device_type=${t}`),getById:t=>Z.get(`/devices/${t}`),updateDevice:(t,s)=>Z.put(`/devices/${t}`,s),getHistory:(t,s="24h")=>Z.get(`/devices/${t}/history?time_range=${s}`),pingDevice:t=>Z.post(`/devices/${t}/ping`),getStats:()=>Z.get("/dashboard/stats"),getAlerts:t=>{const s=t?`?severity=${t}`:"";return Z.get(`/zabbix/alerts${s}`)},standalone:{list:()=>Z.get("/devices/standalone/list"),create:t=>Z.post("/devices/standalone",t),update:(t,s)=>Z.put(`/devices/standalone/${t}`,s),delete:t=>Z.delete(`/devices/standalone/${t}`)},createZabbix:t=>Z.post("/hosts",t),createStandalone:t=>Z.post("/devices/standalone",t)},is={getRules:()=>Z.get("/discovery/rules"),createRule:t=>Z.post("/discovery/rules",t),deleteRule:t=>Z.delete(`/discovery/rules/${t}`),getResults:()=>Z.get("/discovery/results"),scanNow:t=>Z.post(`/discovery/rules/${t}/scan`),quickScan:t=>Z.post("/discovery/scan",t),importDevices:t=>Z.post("/discovery/import",{device_ids:t})},da={getGroups:()=>Z.get("/zabbix/groups"),getTemplates:()=>Z.get("/zabbix/templates"),createHost:t=>Z.post("/zabbix/hosts",t),updateHost:(t,s)=>Z.put(`/zabbix/hosts/${t}`,s),deleteHost:t=>Z.delete(`/zabbix/hosts/${t}`),getAlerts:t=>{const s=new URLSearchParams(t).toString();return Z.get(`/zabbix/alerts${s?`?${s}`:""}`)}},oc={connect:t=>Z.post("/ssh/connect",t)},ji=g.createContext(void 0);function lc({children:t}){const[s,a]=g.useState(null),[r,n]=g.useState(!0),o=async()=>{if(!localStorage.getItem("token")){n(!1);return}try{const u=await Lt.getCurrentUser();a(u.data)}catch(u){console.error("Failed to load user:",u),localStorage.removeItem("token"),a(null)}finally{n(!1)}};g.useEffect(()=>{o()},[]);const i=()=>{Lt.logout(),a(null)},l=async()=>{await o()},d={user:s,isLoading:r,isAdmin:(s==null?void 0:s.role)==="admin",isRegionalManager:(s==null?void 0:s.role)==="regional_manager",userRegion:(s==null?void 0:s.region)||null,logout:i,refreshUser:l};return e.jsx(ji.Provider,{value:d,children:t})}function Qa(){const t=g.useContext(ji);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}var cc=t=>{switch(t){case"success":return hc;case"info":return gc;case"warning":return mc;case"error":return xc;default:return null}},dc=Array(12).fill(0),uc=({visible:t,className:s})=>B.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},B.createElement("div",{className:"sonner-spinner"},dc.map((a,r)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),hc=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mc=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gc=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xc=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fc=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pc=()=>{let[t,s]=B.useState(document.hidden);return B.useEffect(()=>{let a=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),t},Da=1,yc=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:a,...r}=t,n=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Da++,o=this.toasts.find(l=>l.id===n),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),o?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...t,id:n,title:a}),{...l,...t,id:n,dismissible:i,title:a}):l):this.addToast({title:a,...r,dismissible:i,id:n}),n},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let r=t instanceof Promise?t:t(),n=a!==void 0,o,i=r.then(async d=>{if(o=["resolve",d],B.isValidElement(d))n=!1,this.create({id:a,type:"default",message:d});else if(bc(d)&&!d.ok){n=!1;let c=typeof s.error=="function"?await s.error(`HTTP error! status: ${d.status}`):s.error,u=typeof s.description=="function"?await s.description(`HTTP error! status: ${d.status}`):s.description;this.create({id:a,type:"error",message:c,description:u})}else if(s.success!==void 0){n=!1;let c=typeof s.success=="function"?await s.success(d):s.success,u=typeof s.description=="function"?await s.description(d):s.description;this.create({id:a,type:"success",message:c,description:u})}}).catch(async d=>{if(o=["reject",d],s.error!==void 0){n=!1;let c=typeof s.error=="function"?await s.error(d):s.error,u=typeof s.description=="function"?await s.description(d):s.description;this.create({id:a,type:"error",message:c,description:u})}}).finally(()=>{var d;n&&(this.dismiss(a),a=void 0),(d=s.finally)==null||d.call(s)}),l=()=>new Promise((d,c)=>i.then(()=>o[0]==="reject"?c(o[1]):d(o[1])).catch(c));return typeof a!="string"&&typeof a!="number"?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(t,s)=>{let a=(s==null?void 0:s.id)||Da++;return this.create({jsx:t(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Le=new yc,vc=(t,s)=>{let a=(s==null?void 0:s.id)||Da++;return Le.addToast({title:t,...s,id:a}),a},bc=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",jc=vc,wc=()=>Le.toasts,Nc=()=>Le.getActiveToasts(),Fe=Object.assign(jc,{success:Le.success,info:Le.info,warning:Le.warning,error:Le.error,custom:Le.custom,message:Le.message,promise:Le.promise,dismiss:Le.dismiss,loading:Le.loading},{getHistory:wc,getToasts:Nc});function kc(t,{insertAt:s}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",s==="top"&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}kc(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rs(t){return t.label!==void 0}var Sc=3,Cc="32px",Tc="16px",Ur=4e3,Ac=356,Pc=14,Dc=20,Rc=200;function Ze(...t){return t.filter(Boolean).join(" ")}function Mc(t){let[s,a]=t.split("-"),r=[];return s&&r.push(s),a&&r.push(a),r}var Ec=t=>{var s,a,r,n,o,i,l,d,c,u,m;let{invert:x,toast:h,unstyled:S,interacting:p,setHeights:y,visibleToasts:j,heights:M,index:E,toasts:R,expanded:w,removeToast:v,defaultRichColors:_,closeButton:P,style:$,cancelButtonStyle:G,actionButtonStyle:k,className:I="",descriptionClassName:ae="",duration:pe,position:ve,gap:he,loadingIcon:N,expandByDefault:A,classNames:F,icons:K,closeButtonAriaLabel:ye="Close toast",pauseWhenPageIsHidden:J}=t,[oe,le]=B.useState(null),[we,T]=B.useState(null),[L,f]=B.useState(!1),[D,V]=B.useState(!1),[W,Q]=B.useState(!1),[H,de]=B.useState(!1),[ie,ue]=B.useState(!1),[ke,b]=B.useState(0),[me,Ke]=B.useState(0),Xe=B.useRef(h.duration||pe||Ur),ut=B.useRef(null),Qe=B.useRef(null),aa=E===0,ra=E+1<=j,Pe=h.type,nt=h.dismissible!==!1,Ts=h.className||"",C=h.descriptionClassName||"",ge=B.useMemo(()=>M.findIndex(Y=>Y.toastId===h.id)||0,[M,h.id]),xe=B.useMemo(()=>{var Y;return(Y=h.closeButton)!=null?Y:P},[h.closeButton,P]),$t=B.useMemo(()=>h.duration||pe||Ur,[h.duration,pe]),He=B.useRef(0),Je=B.useRef(0),As=B.useRef(0),ht=B.useRef(null),[tl,sl]=ve.split("-"),Er=B.useMemo(()=>M.reduce((Y,fe,je)=>je>=ge?Y:Y+fe.height,0),[M,ge]),Lr=pc(),al=h.invert||x,na=Pe==="loading";Je.current=B.useMemo(()=>ge*he+Er,[ge,Er]),B.useEffect(()=>{Xe.current=$t},[$t]),B.useEffect(()=>{f(!0)},[]),B.useEffect(()=>{let Y=Qe.current;if(Y){let fe=Y.getBoundingClientRect().height;return Ke(fe),y(je=>[{toastId:h.id,height:fe,position:h.position},...je]),()=>y(je=>je.filter(We=>We.toastId!==h.id))}},[y,h.id]),B.useLayoutEffect(()=>{if(!L)return;let Y=Qe.current,fe=Y.style.height;Y.style.height="auto";let je=Y.getBoundingClientRect().height;Y.style.height=fe,Ke(je),y(We=>We.find(Ge=>Ge.toastId===h.id)?We.map(Ge=>Ge.toastId===h.id?{...Ge,height:je}:Ge):[{toastId:h.id,height:je,position:h.position},...We])},[L,h.title,h.description,y,h.id]);let mt=B.useCallback(()=>{V(!0),b(Je.current),y(Y=>Y.filter(fe=>fe.toastId!==h.id)),setTimeout(()=>{v(h)},Rc)},[h,v,y,Je]);B.useEffect(()=>{if(h.promise&&Pe==="loading"||h.duration===1/0||h.type==="loading")return;let Y;return w||p||J&&Lr?(()=>{if(As.current<He.current){let fe=new Date().getTime()-He.current;Xe.current=Xe.current-fe}As.current=new Date().getTime()})():Xe.current!==1/0&&(He.current=new Date().getTime(),Y=setTimeout(()=>{var fe;(fe=h.onAutoClose)==null||fe.call(h,h),mt()},Xe.current)),()=>clearTimeout(Y)},[w,p,h,Pe,J,Lr,mt]),B.useEffect(()=>{h.delete&&mt()},[mt,h.delete]);function rl(){var Y,fe,je;return K!=null&&K.loading?B.createElement("div",{className:Ze(F==null?void 0:F.loader,(Y=h==null?void 0:h.classNames)==null?void 0:Y.loader,"sonner-loader"),"data-visible":Pe==="loading"},K.loading):N?B.createElement("div",{className:Ze(F==null?void 0:F.loader,(fe=h==null?void 0:h.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":Pe==="loading"},N):B.createElement(uc,{className:Ze(F==null?void 0:F.loader,(je=h==null?void 0:h.classNames)==null?void 0:je.loader),visible:Pe==="loading"})}return B.createElement("li",{tabIndex:0,ref:Qe,className:Ze(I,Ts,F==null?void 0:F.toast,(s=h==null?void 0:h.classNames)==null?void 0:s.toast,F==null?void 0:F.default,F==null?void 0:F[Pe],(a=h==null?void 0:h.classNames)==null?void 0:a[Pe]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:_,"data-styled":!(h.jsx||h.unstyled||S),"data-mounted":L,"data-promise":!!h.promise,"data-swiped":ie,"data-removed":D,"data-visible":ra,"data-y-position":tl,"data-x-position":sl,"data-index":E,"data-front":aa,"data-swiping":W,"data-dismissible":nt,"data-type":Pe,"data-invert":al,"data-swipe-out":H,"data-swipe-direction":we,"data-expanded":!!(w||A&&L),style:{"--index":E,"--toasts-before":E,"--z-index":R.length-E,"--offset":`${D?ke:Je.current}px`,"--initial-height":A?"auto":`${me}px`,...$,...h.style},onDragEnd:()=>{Q(!1),le(null),ht.current=null},onPointerDown:Y=>{na||!nt||(ut.current=new Date,b(Je.current),Y.target.setPointerCapture(Y.pointerId),Y.target.tagName!=="BUTTON"&&(Q(!0),ht.current={x:Y.clientX,y:Y.clientY}))},onPointerUp:()=>{var Y,fe,je,We;if(H||!nt)return;ht.current=null;let Ge=Number(((Y=Qe.current)==null?void 0:Y.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gt=Number(((fe=Qe.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((je=ut.current)==null?void 0:je.getTime()),qe=oe==="x"?Ge:gt,xt=Math.abs(qe)/Pt;if(Math.abs(qe)>=Dc||xt>.11){b(Je.current),(We=h.onDismiss)==null||We.call(h,h),T(oe==="x"?Ge>0?"right":"left":gt>0?"down":"up"),mt(),de(!0),ue(!1);return}Q(!1),le(null)},onPointerMove:Y=>{var fe,je,We,Ge;if(!ht.current||!nt||((fe=window.getSelection())==null?void 0:fe.toString().length)>0)return;let gt=Y.clientY-ht.current.y,Pt=Y.clientX-ht.current.x,qe=(je=t.swipeDirections)!=null?je:Mc(ve);!oe&&(Math.abs(Pt)>1||Math.abs(gt)>1)&&le(Math.abs(Pt)>Math.abs(gt)?"x":"y");let xt={x:0,y:0};oe==="y"?(qe.includes("top")||qe.includes("bottom"))&&(qe.includes("top")&&gt<0||qe.includes("bottom")&&gt>0)&&(xt.y=gt):oe==="x"&&(qe.includes("left")||qe.includes("right"))&&(qe.includes("left")&&Pt<0||qe.includes("right")&&Pt>0)&&(xt.x=Pt),(Math.abs(xt.x)>0||Math.abs(xt.y)>0)&&ue(!0),(We=Qe.current)==null||We.style.setProperty("--swipe-amount-x",`${xt.x}px`),(Ge=Qe.current)==null||Ge.style.setProperty("--swipe-amount-y",`${xt.y}px`)}},xe&&!h.jsx?B.createElement("button",{"aria-label":ye,"data-disabled":na,"data-close-button":!0,onClick:na||!nt?()=>{}:()=>{var Y;mt(),(Y=h.onDismiss)==null||Y.call(h,h)},className:Ze(F==null?void 0:F.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(o=K==null?void 0:K.close)!=null?o:fc):null,h.jsx||g.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:B.createElement(B.Fragment,null,Pe||h.icon||h.promise?B.createElement("div",{"data-icon":"",className:Ze(F==null?void 0:F.icon,(i=h==null?void 0:h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||rl():null,h.type!=="loading"?h.icon||(K==null?void 0:K[Pe])||cc(Pe):null):null,B.createElement("div",{"data-content":"",className:Ze(F==null?void 0:F.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},B.createElement("div",{"data-title":"",className:Ze(F==null?void 0:F.title,(d=h==null?void 0:h.classNames)==null?void 0:d.title)},typeof h.title=="function"?h.title():h.title),h.description?B.createElement("div",{"data-description":"",className:Ze(ae,C,F==null?void 0:F.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),g.isValidElement(h.cancel)?h.cancel:h.cancel&&Rs(h.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||G,onClick:Y=>{var fe,je;Rs(h.cancel)&&nt&&((je=(fe=h.cancel).onClick)==null||je.call(fe,Y),mt())},className:Ze(F==null?void 0:F.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,g.isValidElement(h.action)?h.action:h.action&&Rs(h.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||k,onClick:Y=>{var fe,je;Rs(h.action)&&((je=(fe=h.action).onClick)==null||je.call(fe,Y),!Y.defaultPrevented&&mt())},className:Ze(F==null?void 0:F.actionButton,(m=h==null?void 0:h.classNames)==null?void 0:m.actionButton)},h.action.label):null))};function $r(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Lc(t,s){let a={};return[t,s].forEach((r,n)=>{let o=n===1,i=o?"--mobile-offset":"--offset",l=o?Tc:Cc;function d(c){["top","right","bottom","left"].forEach(u=>{a[`${i}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?a[`${i}-${c}`]=l:a[`${i}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):d(l)}),a}var _c=g.forwardRef(function(t,s){let{invert:a,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:d,mobileOffset:c,theme:u="light",richColors:m,duration:x,style:h,visibleToasts:S=Sc,toastOptions:p,dir:y=$r(),gap:j=Pc,loadingIcon:M,icons:E,containerAriaLabel:R="Notifications",pauseWhenPageIsHidden:w}=t,[v,_]=B.useState([]),P=B.useMemo(()=>Array.from(new Set([r].concat(v.filter(J=>J.position).map(J=>J.position)))),[v,r]),[$,G]=B.useState([]),[k,I]=B.useState(!1),[ae,pe]=B.useState(!1),[ve,he]=B.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),N=B.useRef(null),A=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=B.useRef(null),K=B.useRef(!1),ye=B.useCallback(J=>{_(oe=>{var le;return(le=oe.find(we=>we.id===J.id))!=null&&le.delete||Le.dismiss(J.id),oe.filter(({id:we})=>we!==J.id)})},[]);return B.useEffect(()=>Le.subscribe(J=>{if(J.dismiss){_(oe=>oe.map(le=>le.id===J.id?{...le,delete:!0}:le));return}setTimeout(()=>{dl.flushSync(()=>{_(oe=>{let le=oe.findIndex(we=>we.id===J.id);return le!==-1?[...oe.slice(0,le),{...oe[le],...J},...oe.slice(le+1)]:[J,...oe]})})})}),[]),B.useEffect(()=>{if(u!=="system"){he(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?he("dark"):he("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:oe})=>{he(oe?"dark":"light")})}catch{J.addListener(({matches:le})=>{try{he(le?"dark":"light")}catch(we){console.error(we)}})}},[u]),B.useEffect(()=>{v.length<=1&&I(!1)},[v]),B.useEffect(()=>{let J=oe=>{var le,we;n.every(T=>oe[T]||oe.code===T)&&(I(!0),(le=N.current)==null||le.focus()),oe.code==="Escape"&&(document.activeElement===N.current||(we=N.current)!=null&&we.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[n]),B.useEffect(()=>{if(N.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,K.current=!1)}},[N.current]),B.createElement("section",{ref:s,"aria-label":`${R} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((J,oe)=>{var le;let[we,T]=J.split("-");return v.length?B.createElement("ol",{key:J,dir:y==="auto"?$r():y,tabIndex:-1,ref:N,className:l,"data-sonner-toaster":!0,"data-theme":ve,"data-y-position":we,"data-lifted":k&&v.length>1&&!o,"data-x-position":T,style:{"--front-toast-height":`${((le=$[0])==null?void 0:le.height)||0}px`,"--width":`${Ac}px`,"--gap":`${j}px`,...h,...Lc(d,c)},onBlur:L=>{K.current&&!L.currentTarget.contains(L.relatedTarget)&&(K.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||K.current||(K.current=!0,F.current=L.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{ae||I(!1)},onDragEnd:()=>I(!1),onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},v.filter(L=>!L.position&&oe===0||L.position===J).map((L,f)=>{var D,V;return B.createElement(Ec,{key:L.id,icons:E,index:f,toast:L,defaultRichColors:m,duration:(D=p==null?void 0:p.duration)!=null?D:x,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:a,visibleToasts:S,closeButton:(V=p==null?void 0:p.closeButton)!=null?V:i,interacting:ae,position:J,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:ye,toasts:v.filter(W=>W.position==L.position),heights:$.filter(W=>W.position==L.position),setHeights:G,expandByDefault:o,gap:j,loadingIcon:M,expanded:k,pauseWhenPageIsHidden:w,swipeDirections:t.swipeDirections})})):null}))});function ce(...t){return pl(yl(t))}const Fc=[{name:"Dashboard",href:"/",icon:vl,roles:["admin","regional_manager","technician","viewer"]},{name:"Discovery",href:"/discovery",icon:di,roles:["admin","technician"]},{name:"Devices",href:"/devices",icon:_e,roles:["admin","regional_manager","technician","viewer"]},{name:"Monitor",href:"/monitor",icon:kt,roles:["admin","regional_manager","technician"]},{name:"Map",href:"/map",icon:bl,roles:["admin","regional_manager","technician","viewer"]},{name:"Topology",href:"/topology",icon:et,roles:["admin","regional_manager","technician"]},{name:"Diagnostics",href:"/diagnostics",icon:jl,roles:["admin","regional_manager","technician"]},{name:"Reports",href:"/reports",icon:ui,roles:["admin","regional_manager"]},{name:"Regions",href:"/regions",icon:Ft,roles:["admin","regional_manager"]},{name:"Settings",href:"/settings",icon:qa,roles:["admin"]}];function Vc(){const{user:t}=Qa();return e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col",children:e.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 px-6 pb-4",children:[e.jsxs("div",{className:"flex h-16 shrink-0 items-center",children:[e.jsx("img",{className:"h-8 w-auto dark:invert",src:"/logo-ward.svg",alt:"WARD FLUX"}),e.jsx("span",{className:"ml-3 text-xl font-bold text-gray-900 dark:text-white",children:"FLUX"})]}),e.jsx("nav",{className:"flex flex-1 flex-col",children:e.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:e.jsx("li",{children:e.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:Fc.filter(s=>!(t!=null&&t.role)||s.roles.includes(t.role)).map(s=>e.jsx("li",{children:e.jsx(ul,{to:s.href,end:s.href==="/",className:({isActive:a})=>ce("group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 transition-colors",a?"bg-ward-green text-white":"text-gray-700 dark:text-gray-300 hover:text-ward-green dark:hover:text-ward-green hover:bg-gray-50 dark:hover:bg-gray-800"),children:({isActive:a})=>e.jsxs(e.Fragment,{children:[e.jsx(s.icon,{className:ce("h-6 w-6 shrink-0",a?"text-white":"text-gray-400 dark:text-gray-500 group-hover:text-ward-green"),"aria-hidden":"true"}),s.name]})})},s.name))})})})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"WARD FLUX v2.0"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Â© 2025 WARD Tech Solutions"})]})]})})}function Ic(){const t=ci(),{user:s,logout:a}=Qa(),[r,n]=g.useState(()=>localStorage.getItem("darkMode")==="true");g.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",r.toString())},[r]);const o=()=>{n(!r)},i=()=>{a(),t("/login")},l=d=>{switch(d){case"admin":return"Admin";case"regional_manager":return"Regional Manager";case"technician":return"Technician";case"viewer":return"Viewer";default:return d}};return e.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:e.jsxs("form",{className:"relative flex flex-1",action:"#",method:"GET",children:[e.jsx("label",{htmlFor:"search-field",className:"sr-only",children:"Search"}),e.jsx(Ot,{className:"pointer-events-none absolute inset-y-0 left-0 h-full w-5 text-gray-400 dark:text-gray-500","aria-hidden":"true"}),e.jsx("input",{id:"search-field",className:"block h-full w-full border-0 py-0 pl-8 pr-0 text-gray-900 dark:text-gray-100 dark:bg-gray-800 placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:ring-0 sm:text-sm",placeholder:"Search devices, alerts...",type:"search",name:"search"})]})}),e.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[e.jsxs("button",{type:"button",onClick:o,className:"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Toggle dark mode"}),r?e.jsx(wl,{className:"h-6 w-6","aria-hidden":"true"}):e.jsx(Nl,{className:"h-6 w-6","aria-hidden":"true"})]}),e.jsxs("button",{type:"button",className:"relative p-2 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"View notifications"}),e.jsx(Ta,{className:"h-6 w-6","aria-hidden":"true"}),e.jsx("span",{className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-400 ring-2 ring-white dark:ring-gray-800"})]}),e.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),e.jsx("div",{className:"relative flex items-center gap-x-2",children:e.jsxs("button",{type:"button",className:"flex items-center gap-x-2 rounded-lg p-2 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-ward-green flex items-center justify-center text-white",children:e.jsx(hi,{className:"h-5 w-5"})}),e.jsxs("div",{className:"hidden lg:flex lg:flex-col lg:items-start",children:[e.jsx("span",{className:"text-sm font-semibold",children:(s==null?void 0:s.username)||"User"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s!=null&&s.role?l(s.role):""})]})]})}),e.jsxs("button",{onClick:i,className:"p-2 text-gray-400 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Logout"}),e.jsx(kl,{className:"h-6 w-6"})]})]})]})}function Bc(){return e.jsxs("div",{children:[e.jsx(Vc,{}),e.jsxs("div",{className:"lg:pl-72",children:[e.jsx(Ic,{}),e.jsx("main",{className:"py-10",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx(hl,{})})})]})]})}const O=g.forwardRef(({className:t,variant:s="default",hover:a=!1,children:r,...n},o)=>{const i={default:"bg-white dark:bg-gray-800 rounded-xl shadow-ward-lg border border-gray-100 dark:border-gray-700",glass:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-ward-lg border border-gray-100/50 dark:border-gray-700/50",bordered:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700"},l=a?"transition-all duration-200 hover:shadow-ward-xl hover:scale-[1.02]":"";return e.jsx("div",{ref:o,className:ce(i[s],l,t),...n,children:r})});O.displayName="Card";const te=g.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ce("p-6 pb-4",t),...s}));te.displayName="CardHeader";const se=g.forwardRef(({className:t,...s},a)=>e.jsx("h3",{ref:a,className:ce("text-lg font-semibold text-gray-900 dark:text-gray-100",t),...s}));se.displayName="CardTitle";const Oc=g.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:ce("text-sm text-gray-500 mt-1",t),...s}));Oc.displayName="CardDescription";const U=g.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ce("p-6 pt-0",t),...s}));U.displayName="CardContent";const Uc=g.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ce("p-6 pt-0 flex items-center gap-2",t),...s}));Uc.displayName="CardFooter";const ct=g.forwardRef(({className:t,size:s="md",text:a,...r},n)=>{const o={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsxs("div",{ref:n,className:ce("flex flex-col items-center justify-center gap-3",t),...r,children:[e.jsx(Os,{className:ce("animate-spin text-ward-green",o[s])}),a&&e.jsx("p",{className:"text-sm text-gray-600",children:a})]})});ct.displayName="LoadingSpinner";const tt=g.forwardRef(({className:t,variant:s="rect",lines:a=1,...r},n)=>{if(s==="text"&&a>1)return e.jsx("div",{className:"space-y-2",children:Array.from({length:a}).map((i,l)=>e.jsx("div",{className:ce("h-4 bg-gray-200 rounded animate-pulse",l===a-1&&"w-3/4",t)},l))});const o={text:"h-4 w-full rounded",card:"h-32 w-full rounded-xl",circle:"h-12 w-12 rounded-full",rect:"h-20 w-full rounded-lg"};return e.jsx("div",{ref:n,className:ce("bg-gray-200 animate-pulse",o[s],t),...r})});tt.displayName="Skeleton";const $c=g.forwardRef(({className:t,loading:s,text:a="Loading...",children:r,...n},o)=>e.jsxs("div",{ref:o,className:ce("relative",t),...n,children:[r,s&&e.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-10 rounded-lg",children:e.jsx(ct,{size:"lg",text:a})})]}));$c.displayName="LoadingOverlay";const ee=g.forwardRef(({className:t,variant:s="default",size:a="md",dot:r=!1,children:n,...o},i)=>{const l={success:"bg-green-100 text-green-700 border-green-200",warning:"bg-yellow-100 text-yellow-700 border-yellow-200",danger:"bg-red-100 text-red-700 border-red-200",info:"bg-blue-100 text-blue-700 border-blue-200",default:"bg-gray-100 text-gray-700 border-gray-200"},d={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},c={success:"bg-green-500",warning:"bg-yellow-500",danger:"bg-red-500",info:"bg-blue-500",default:"bg-gray-500"};return e.jsxs("span",{ref:i,className:ce("inline-flex items-center gap-1.5 font-medium rounded-full border transition-colors",l[s],d[a],t),...o,children:[r&&e.jsx("span",{className:ce("w-2 h-2 rounded-full",c[s])}),n]})});ee.displayName="Badge";const Te=g.forwardRef(({className:t,label:s,error:a,helperText:r,fullWidth:n,disabled:o,options:i,children:l,...d},c)=>{const u=()=>i&&i.length>0?i.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value)):l;return e.jsxs("div",{className:ce("relative",n&&"w-full"),children:[s&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:s}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{ref:c,className:ce("w-full px-4 py-2 pr-10 border rounded-lg appearance-none","bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","focus:outline-none focus:ring-2 focus:ring-ward-green focus:border-transparent","transition-colors duration-200",a?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",o&&"bg-gray-100 dark:bg-gray-900 cursor-not-allowed opacity-60",t),disabled:o,...d,children:u()}),e.jsx(mi,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 dark:text-gray-400 pointer-events-none"})]}),a&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a}),r&&!a&&e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r})]})});Te.displayName="Select";const z=g.forwardRef(({className:t,variant:s="primary",size:a="md",loading:r,icon:n,children:o,disabled:i,...l},d)=>{const c="inline-flex items-center justify-center gap-2 font-medium rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",u={primary:"bg-ward-green text-white hover:bg-ward-green-dark shadow-ward hover:shadow-ward-lg",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border-2 border-ward-green text-ward-green hover:bg-ward-green hover:text-white",ghost:"text-gray-700 hover:bg-gray-100 hover:text-ward-green",danger:"bg-red-500 text-white hover:bg-red-600 shadow-sm"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return e.jsxs("button",{ref:d,className:ce(c,u[s],m[a],t),disabled:i||r,...l,children:[r&&e.jsx(Os,{className:"h-4 w-4 animate-spin"}),!r&&n&&n,o]})});z.displayName="Button";const zc={Paybox:xi,ATM:Tl,NVR:gi,"Access Point":_e,Switch:et,Router:Ys,"Core Router":Cl,Biostar:Sl,"Disaster Recovery":hs};function Kc(){const[t,s]=g.useState(""),{data:a,isLoading:r}=$e({queryKey:["device-stats"],queryFn:()=>Ee.getStats()}),{data:n,isLoading:o}=$e({queryKey:["devices"],queryFn:()=>Ee.getAll()}),{data:i}=$e({queryKey:["alerts",t],queryFn:()=>Ee.getAlerts(t)}),l=a==null?void 0:a.data,d=(n==null?void 0:n.data)||[],c=(i==null?void 0:i.data)||[],u={};d.forEach(p=>{const y=p.region||"Other";u[y]||(u[y]={total:0,online:0,offline:0}),u[y].total++,p.ping_status==="Up"||p.available==="Available"?u[y].online++:u[y].offline++});const m={};d.forEach(p=>{const y=p.device_type||"Unknown";m[y]||(m[y]={total:0,online:0,offline:0}),m[y].total++,p.ping_status==="Up"||p.available==="Available"?m[y].online++:m[y].offline++});const x=[{title:"Total Devices",value:(l==null?void 0:l.total_devices)||0,icon:it,color:"text-ward-green",bgColor:"bg-ward-green/10"},{title:"Online",value:(l==null?void 0:l.online_devices)||0,icon:yt,color:"text-green-600",bgColor:"bg-green-100"},{title:"Offline",value:(l==null?void 0:l.offline_devices)||0,icon:Zs,color:"text-red-600",bgColor:"bg-red-100"},{title:"System Uptime",value:`${(l==null?void 0:l.uptime_percentage)||0}%`,icon:Za,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Active Alerts",value:(l==null?void 0:l.active_alerts)||0,icon:ze,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Critical Issues",value:(l==null?void 0:l.critical_alerts)||0,icon:ze,color:"text-red-600",bgColor:"bg-red-100"}],h=[{value:"",label:"All Severities"},{value:"Disaster",label:"Disaster"},{value:"High",label:"High"},{value:"Average",label:"Average"},{value:"Warning",label:"Warning"},{value:"Information",label:"Information"}],S=p=>({Disaster:"bg-red-600 text-white",High:"bg-orange-600 text-white",Average:"bg-yellow-600 text-white",Warning:"bg-yellow-500 text-white",Information:"bg-blue-500 text-white"})[p]||"bg-gray-500 text-white";return r||o?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(p=>e.jsx(tt,{variant:"card"},p))})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Network Overview"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Last updated: ",new Date().toLocaleTimeString()]})]}),e.jsx(z,{onClick:()=>window.location.reload(),icon:e.jsx(kt,{className:"h-4 w-4 animate-spin"}),children:"Refresh"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((p,y)=>e.jsx(O,{hover:!0,className:"relative overflow-hidden",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:p.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-2",children:p.value})]}),e.jsx("div",{className:`p-3 rounded-xl ${p.bgColor} dark:bg-opacity-20`,children:e.jsx(p.icon,{className:`h-8 w-8 ${p.color}`})})]})})},y))}),Object.keys(u).length>1&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Regional Statistics"})}),e.jsx(U,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(u).filter(([p])=>p!=="Other").map(([p,y])=>{const j=y.total>0?Math.round(y.online/y.total*100):0;return e.jsxs("div",{className:"p-4 bg-gradient-to-br from-ward-green/5 to-ward-green/10 dark:from-ward-green/10 dark:to-ward-green/20 rounded-lg border border-ward-green/20 dark:border-ward-green/30 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:p}),e.jsx("div",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:y.total}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Online:"}),e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:y.online})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Offline:"}),e.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:y.offline})]}),e.jsx("div",{className:"pt-2 border-t border-ward-green/20 dark:border-ward-green/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Uptime:"}),e.jsxs("span",{className:"font-bold text-ward-green",children:[j,"%"]})]})})]})]},p)})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Device Types Overview"})}),e.jsx(U,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(m).map(([p,y])=>{const j=y.total>0?Math.round(y.online/y.total*100):0,M=zc[p]||Al;return e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(M,{className:"h-6 w-6 text-ward-green"}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:p})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:y.total}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:y.online}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Online"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:y.offline}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Offline"})]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300",children:[j,"% Uptime"]})})})]},p)})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(se,{children:"Active Alerts"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{value:t,onChange:p=>s(p.target.value),options:h}),e.jsx(ee,{variant:"default",children:c.length})]})]})}),e.jsx(U,{children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(yt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No alerts"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"All systems are operating normally"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Severity"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Host"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Time"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:c.slice(0,100).map((p,y)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(p.severity)}`,children:p.severity})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ca,{to:`/devices/${p.hostid}`,className:"text-ward-green hover:text-ward-green-dark font-medium",children:p.host})}),e.jsx("td",{className:"px-4 py-3 text-gray-900 dark:text-gray-100",children:p.description}),e.jsx("td",{className:"px-4 py-3 text-gray-500 dark:text-gray-400 whitespace-nowrap",children:p.time})]},y))})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Device Status by Region"})}),e.jsx(U,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Device Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Branch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Problems"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.sort((p,y)=>y.problems-p.problems).slice(0,20).map(p=>{const y=p.ping_status==="Up"||p.available==="Available";return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900 cursor-pointer",onClick:()=>window.location.href=`/devices/${p.hostid}`,children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx(ee,{variant:y?"success":"danger",dot:!0,children:y?"Up":"Down"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-gray-100",children:p.display_name}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:p.branch}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300 font-mono text-sm",children:p.ip}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:p.device_type}),e.jsx("td",{className:"px-4 py-3",children:p.problems>0?e.jsx(ee,{variant:"danger",children:p.problems}):e.jsx(yt,{className:"h-5 w-5 text-green-500"})})]},p.hostid)})})]})})})]})]})}const X=g.forwardRef(({className:t,label:s,error:a,icon:r,helperText:n,type:o="text",...i},l)=>e.jsxs("div",{className:"w-full",children:[s&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:s}),e.jsxs("div",{className:"relative",children:[r&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:r}),e.jsx("input",{type:o,ref:l,className:ce("w-full px-4 py-2 rounded-lg border transition-all duration-200","text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500","bg-white dark:bg-gray-800","focus:outline-none focus:ring-2 focus:ring-ward-green focus:border-transparent","disabled:bg-gray-50 dark:disabled:bg-gray-900 disabled:cursor-not-allowed",a?"border-red-300 dark:border-red-700 focus:ring-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",r&&"pl-10",t),...i})]}),a&&e.jsx("p",{className:"mt-1.5 text-sm text-red-600 dark:text-red-500",children:a}),n&&!a&&e.jsx("p",{className:"mt-1.5 text-sm text-gray-500 dark:text-gray-400",children:n})]}));X.displayName="Input";const Ja=g.createContext({});function er(t){const s=g.useRef(null);return s.current===null&&(s.current=t()),s.current}const Xs=g.createContext(null),tr=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Hc extends g.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=a.offsetHeight||0,r.width=a.offsetWidth||0,r.top=a.offsetTop,r.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Wc({children:t,isPresent:s}){const a=g.useId(),r=g.useRef(null),n=g.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=g.useContext(tr);return g.useInsertionEffect(()=>{const{width:i,height:l,top:d,left:c}=n.current;if(s||!r.current||!i||!l)return;r.current.dataset.motionPopId=a;const u=document.createElement("style");return o&&(u.nonce=o),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${l}px !important;
            top: ${d}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[s]),e.jsx(Hc,{isPresent:s,childRef:r,sizeRef:n,children:g.cloneElement(t,{ref:r})})}const Gc=({children:t,initial:s,isPresent:a,onExitComplete:r,custom:n,presenceAffectsLayout:o,mode:i})=>{const l=er(qc),d=g.useId(),c=g.useCallback(m=>{l.set(m,!0);for(const x of l.values())if(!x)return;r&&r()},[l,r]),u=g.useMemo(()=>({id:d,initial:s,isPresent:a,custom:n,onExitComplete:c,register:m=>(l.set(m,!1),()=>l.delete(m))}),o?[Math.random(),c]:[a,c]);return g.useMemo(()=>{l.forEach((m,x)=>l.set(x,!1))},[a]),g.useEffect(()=>{!a&&!l.size&&r&&r()},[a]),i==="popLayout"&&(t=e.jsx(Wc,{isPresent:a,children:t})),e.jsx(Xs.Provider,{value:u,children:t})};function qc(){return new Map}function wi(t=!0){const s=g.useContext(Xs);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:r,register:n}=s,o=g.useId();g.useEffect(()=>{t&&n(o)},[t]);const i=g.useCallback(()=>t&&r&&r(o),[o,r,t]);return!a&&r?[!1,i]:[!0]}const Ms=t=>t.key||"";function zr(t){const s=[];return g.Children.forEach(t,a=>{g.isValidElement(a)&&s.push(a)}),s}const sr=typeof window<"u",Ni=sr?g.useLayoutEffect:g.useEffect,Zc=({children:t,custom:s,initial:a=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:o="sync",propagate:i=!1})=>{const[l,d]=wi(i),c=g.useMemo(()=>zr(t),[t]),u=i&&!l?[]:c.map(Ms),m=g.useRef(!0),x=g.useRef(c),h=er(()=>new Map),[S,p]=g.useState(c),[y,j]=g.useState(c);Ni(()=>{m.current=!1,x.current=c;for(let R=0;R<y.length;R++){const w=Ms(y[R]);u.includes(w)?h.delete(w):h.get(w)!==!0&&h.set(w,!1)}},[y,u.length,u.join("-")]);const M=[];if(c!==S){let R=[...c];for(let w=0;w<y.length;w++){const v=y[w],_=Ms(v);u.includes(_)||(R.splice(w,0,v),M.push(v))}o==="wait"&&M.length&&(R=M),j(zr(R)),p(c);return}const{forceRender:E}=g.useContext(Ja);return e.jsx(e.Fragment,{children:y.map(R=>{const w=Ms(R),v=i&&!l?!1:c===y||u.includes(w),_=()=>{if(h.has(w))h.set(w,!0);else return;let P=!0;h.forEach($=>{$||(P=!1)}),P&&(E==null||E(),j(x.current),i&&(d==null||d()),r&&r())};return e.jsx(Gc,{isPresent:v,initial:!m.current||a?void 0:!1,custom:v?void 0:s,presenceAffectsLayout:n,mode:o,onExitComplete:v?void 0:_,children:R},w)})})},Ve=t=>t;let ki=Ve;function ar(t){let s;return()=>(s===void 0&&(s=t()),s)}const Yt=(t,s,a)=>{const r=s-t;return r===0?1:(a-t)/r},ot=t=>t*1e3,lt=t=>t/1e3,Yc={useManualTiming:!1};function Xc(t){let s=new Set,a=new Set,r=!1,n=!1;const o=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(d.schedule(c),t()),c(i)}const d={schedule:(c,u=!1,m=!1)=>{const h=m&&r?s:a;return u&&o.add(c),h.has(c)||h.add(c),c},cancel:c=>{a.delete(c),o.delete(c)},process:c=>{if(i=c,r){n=!0;return}r=!0,[s,a]=[a,s],s.forEach(l),s.clear(),r=!1,n&&(n=!1,d.process(c))}};return d}const Es=["read","resolveKeyframes","update","preRender","render","postRender"],Qc=40;function Si(t,s){let a=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},o=()=>a=!0,i=Es.reduce((j,M)=>(j[M]=Xc(o),j),{}),{read:l,resolveKeyframes:d,update:c,preRender:u,render:m,postRender:x}=i,h=()=>{const j=performance.now();a=!1,n.delta=r?1e3/60:Math.max(Math.min(j-n.timestamp,Qc),1),n.timestamp=j,n.isProcessing=!0,l.process(n),d.process(n),c.process(n),u.process(n),m.process(n),x.process(n),n.isProcessing=!1,a&&s&&(r=!1,t(h))},S=()=>{a=!0,r=!0,n.isProcessing||t(h)};return{schedule:Es.reduce((j,M)=>{const E=i[M];return j[M]=(R,w=!1,v=!1)=>(a||S(),E.schedule(R,w,v)),j},{}),cancel:j=>{for(let M=0;M<Es.length;M++)i[Es[M]].cancel(j)},state:n,steps:i}}const{schedule:be,cancel:Ct,state:Ae,steps:ua}=Si(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ve,!0),Ci=g.createContext({strict:!1}),Kr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xt={};for(const t in Kr)Xt[t]={isEnabled:s=>Kr[t].some(a=>!!s[a])};function Jc(t){for(const s in t)Xt[s]={...Xt[s],...t[s]}}const ed=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $s(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ed.has(t)}let Ti=t=>!$s(t);function td(t){t&&(Ti=s=>s.startsWith("on")?!$s(s):t(s))}try{td(require("@emotion/is-prop-valid").default)}catch{}function sd(t,s,a){const r={};for(const n in t)n==="values"&&typeof t.values=="object"||(Ti(n)||a===!0&&$s(n)||!s&&!$s(n)||t.draggable&&n.startsWith("onDrag"))&&(r[n]=t[n]);return r}function ad(t){if(typeof Proxy>"u")return t;const s=new Map,a=(...r)=>t(...r);return new Proxy(a,{get:(r,n)=>n==="create"?t:(s.has(n)||s.set(n,t(n)),s.get(n))})}const Qs=g.createContext({});function ys(t){return typeof t=="string"||Array.isArray(t)}function Js(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const rr=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nr=["initial",...rr];function ea(t){return Js(t.animate)||nr.some(s=>ys(t[s]))}function Ai(t){return!!(ea(t)||t.variants)}function rd(t,s){if(ea(t)){const{initial:a,animate:r}=t;return{initial:a===!1||ys(a)?a:void 0,animate:ys(r)?r:void 0}}return t.inherit!==!1?s:{}}function nd(t){const{initial:s,animate:a}=rd(t,g.useContext(Qs));return g.useMemo(()=>({initial:s,animate:a}),[Hr(s),Hr(a)])}function Hr(t){return Array.isArray(t)?t.join(" "):t}const id=Symbol.for("motionComponentSymbol");function zt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function od(t,s,a){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),a&&(typeof a=="function"?a(r):zt(a)&&(a.current=r))},[s])}const ir=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ld="framerAppearId",Pi="data-"+ir(ld),{schedule:or}=Si(queueMicrotask,!1),Di=g.createContext({});function cd(t,s,a,r,n){var o,i;const{visualElement:l}=g.useContext(Qs),d=g.useContext(Ci),c=g.useContext(Xs),u=g.useContext(tr).reducedMotion,m=g.useRef(null);r=r||d.renderer,!m.current&&r&&(m.current=r(t,{visualState:s,parent:l,props:a,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const x=m.current,h=g.useContext(Di);x&&!x.projection&&n&&(x.type==="html"||x.type==="svg")&&dd(m.current,a,n,h);const S=g.useRef(!1);g.useInsertionEffect(()=>{x&&S.current&&x.update(a,c)});const p=a[Pi],y=g.useRef(!!p&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,p))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,p)));return Ni(()=>{x&&(S.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),or.render(x.render),y.current&&x.animationState&&x.animationState.animateChanges())}),g.useEffect(()=>{x&&(!y.current&&x.animationState&&x.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)===null||j===void 0||j.call(window,p)}),y.current=!1))}),x}function dd(t,s,a,r){const{layoutId:n,layout:o,drag:i,dragConstraints:l,layoutScroll:d,layoutRoot:c}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:Ri(t.parent)),t.projection.setOptions({layoutId:n,layout:o,alwaysMeasureLayout:!!i||l&&zt(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:c})}function Ri(t){if(t)return t.options.allowProjection!==!1?t.projection:Ri(t.parent)}function ud({preloadedFeatures:t,createVisualElement:s,useRender:a,useVisualState:r,Component:n}){var o,i;t&&Jc(t);function l(c,u){let m;const x={...g.useContext(tr),...c,layoutId:hd(c)},{isStatic:h}=x,S=nd(c),p=r(c,h);if(!h&&sr){md();const y=gd(x);m=y.MeasureLayout,S.visualElement=cd(n,p,x,s,y.ProjectionNode)}return e.jsxs(Qs.Provider,{value:S,children:[m&&S.visualElement?e.jsx(m,{visualElement:S.visualElement,...x}):null,a(n,c,od(p,S.visualElement,u),p,h,S.visualElement)]})}l.displayName=`motion.${typeof n=="string"?n:`create(${(i=(o=n.displayName)!==null&&o!==void 0?o:n.name)!==null&&i!==void 0?i:""})`}`;const d=g.forwardRef(l);return d[id]=n,d}function hd({layoutId:t}){const s=g.useContext(Ja).id;return s&&t!==void 0?s+"-"+t:t}function md(t,s){g.useContext(Ci).strict}function gd(t){const{drag:s,layout:a}=Xt;if(!s&&!a)return{};const r={...s,...a};return{MeasureLayout:s!=null&&s.isEnabled(t)||a!=null&&a.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const xd=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lr(t){return typeof t!="string"||t.includes("-")?!1:!!(xd.indexOf(t)>-1||/[A-Z]/u.test(t))}function Wr(t){const s=[{},{}];return t==null||t.values.forEach((a,r)=>{s[0][r]=a.get(),s[1][r]=a.getVelocity()}),s}function cr(t,s,a,r){if(typeof s=="function"){const[n,o]=Wr(r);s=s(a!==void 0?a:t.custom,n,o)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[n,o]=Wr(r);s=s(a!==void 0?a:t.custom,n,o)}return s}const Ra=t=>Array.isArray(t),fd=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),pd=t=>Ra(t)?t[t.length-1]||0:t,Re=t=>!!(t&&t.getVelocity);function Vs(t){const s=Re(t)?t.get():t;return fd(s)?s.toValue():s}function yd({scrapeMotionValuesFromProps:t,createRenderState:s,onUpdate:a},r,n,o){const i={latestValues:vd(r,n,o,t),renderState:s()};return a&&(i.onMount=l=>a({props:r,current:l,...i}),i.onUpdate=l=>a(l)),i}const Mi=t=>(s,a)=>{const r=g.useContext(Qs),n=g.useContext(Xs),o=()=>yd(t,s,r,n);return a?o():er(o)};function vd(t,s,a,r){const n={},o=r(t,{});for(const x in o)n[x]=Vs(o[x]);let{initial:i,animate:l}=t;const d=ea(t),c=Ai(t);s&&c&&!d&&t.inherit!==!1&&(i===void 0&&(i=s.initial),l===void 0&&(l=s.animate));let u=a?a.initial===!1:!1;u=u||i===!1;const m=u?l:i;if(m&&typeof m!="boolean"&&!Js(m)){const x=Array.isArray(m)?m:[m];for(let h=0;h<x.length;h++){const S=cr(t,x[h]);if(S){const{transitionEnd:p,transition:y,...j}=S;for(const M in j){let E=j[M];if(Array.isArray(E)){const R=u?E.length-1:0;E=E[R]}E!==null&&(n[M]=E)}for(const M in p)n[M]=p[M]}}}return n}const as=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ut=new Set(as),Ei=t=>s=>typeof s=="string"&&s.startsWith(t),Li=Ei("--"),bd=Ei("var(--"),dr=t=>bd(t)?jd.test(t.split("/*")[0].trim()):!1,jd=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,_i=(t,s)=>s&&typeof t=="number"?s.transform(t):t,dt=(t,s,a)=>a>s?s:a<t?t:a,rs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vs={...rs,transform:t=>dt(0,1,t)},Ls={...rs,default:1},Ns=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),pt=Ns("deg"),st=Ns("%"),q=Ns("px"),wd=Ns("vh"),Nd=Ns("vw"),Gr={...st,parse:t=>st.parse(t)/100,transform:t=>st.transform(t*100)},kd={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,backgroundPositionX:q,backgroundPositionY:q},Sd={rotate:pt,rotateX:pt,rotateY:pt,rotateZ:pt,scale:Ls,scaleX:Ls,scaleY:Ls,scaleZ:Ls,skew:pt,skewX:pt,skewY:pt,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:vs,originX:Gr,originY:Gr,originZ:q},qr={...rs,transform:Math.round},ur={...kd,...Sd,zIndex:qr,size:q,fillOpacity:vs,strokeOpacity:vs,numOctaves:qr},Cd={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Td=as.length;function Ad(t,s,a){let r="",n=!0;for(let o=0;o<Td;o++){const i=as[o],l=t[i];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(i.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||a){const c=_i(l,ur[i]);if(!d){n=!1;const u=Cd[i]||i;r+=`${u}(${c}) `}a&&(s[i]=c)}}return r=r.trim(),a?r=a(s,n?"":r):n&&(r="none"),r}function hr(t,s,a){const{style:r,vars:n,transformOrigin:o}=t;let i=!1,l=!1;for(const d in s){const c=s[d];if(Ut.has(d)){i=!0;continue}else if(Li(d)){n[d]=c;continue}else{const u=_i(c,ur[d]);d.startsWith("origin")?(l=!0,o[d]=u):r[d]=u}}if(s.transform||(i||a?r.transform=Ad(s,t.transform,a):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${d} ${c} ${u}`}}const Pd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Dd={offset:"strokeDashoffset",array:"strokeDasharray"};function Rd(t,s,a=1,r=0,n=!0){t.pathLength=1;const o=n?Pd:Dd;t[o.offset]=q.transform(-r);const i=q.transform(s),l=q.transform(a);t[o.array]=`${i} ${l}`}function Zr(t,s,a){return typeof t=="string"?t:q.transform(s+a*t)}function Md(t,s,a){const r=Zr(s,t.x,t.width),n=Zr(a,t.y,t.height);return`${r} ${n}`}function mr(t,{attrX:s,attrY:a,attrScale:r,originX:n,originY:o,pathLength:i,pathSpacing:l=1,pathOffset:d=0,...c},u,m){if(hr(t,c,m),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:h,dimensions:S}=t;x.transform&&(S&&(h.transform=x.transform),delete x.transform),S&&(n!==void 0||o!==void 0||h.transform)&&(h.transformOrigin=Md(S,n!==void 0?n:.5,o!==void 0?o:.5)),s!==void 0&&(x.x=s),a!==void 0&&(x.y=a),r!==void 0&&(x.scale=r),i!==void 0&&Rd(x,i,l,d,!1)}const gr=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Fi=()=>({...gr(),attrs:{}}),xr=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Vi(t,{style:s,vars:a},r,n){Object.assign(t.style,s,n&&n.getProjectionStyles(r));for(const o in a)t.style.setProperty(o,a[o])}const Ii=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Bi(t,s,a,r){Vi(t,s,void 0,r);for(const n in s.attrs)t.setAttribute(Ii.has(n)?n:ir(n),s.attrs[n])}const zs={};function Ed(t){Object.assign(zs,t)}function Oi(t,{layout:s,layoutId:a}){return Ut.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!zs[t]||t==="opacity")}function fr(t,s,a){var r;const{style:n}=t,o={};for(const i in n)(Re(n[i])||s.style&&Re(s.style[i])||Oi(i,t)||((r=a==null?void 0:a.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[i]=n[i]);return o}function Ui(t,s,a){const r=fr(t,s,a);for(const n in t)if(Re(t[n])||Re(s[n])){const o=as.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[o]=t[n]}return r}function Ld(t,s){try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}const Yr=["x","y","width","height","cx","cy","r"],_d={useVisualState:Mi({scrapeMotionValuesFromProps:Ui,createRenderState:Fi,onUpdate:({props:t,prevProps:s,current:a,renderState:r,latestValues:n})=>{if(!a)return;let o=!!t.drag;if(!o){for(const l in n)if(Ut.has(l)){o=!0;break}}if(!o)return;let i=!s;if(s)for(let l=0;l<Yr.length;l++){const d=Yr[l];t[d]!==s[d]&&(i=!0)}i&&be.read(()=>{Ld(a,r),be.render(()=>{mr(r,n,xr(a.tagName),t.transformTemplate),Bi(a,r)})})}})},Fd={useVisualState:Mi({scrapeMotionValuesFromProps:fr,createRenderState:gr})};function $i(t,s,a){for(const r in s)!Re(s[r])&&!Oi(r,a)&&(t[r]=s[r])}function Vd({transformTemplate:t},s){return g.useMemo(()=>{const a=gr();return hr(a,s,t),Object.assign({},a.vars,a.style)},[s])}function Id(t,s){const a=t.style||{},r={};return $i(r,a,t),Object.assign(r,Vd(t,s)),r}function Bd(t,s){const a={},r=Id(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=r,a}function Od(t,s,a,r){const n=g.useMemo(()=>{const o=Fi();return mr(o,s,xr(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[s]);if(t.style){const o={};$i(o,t.style,t),n.style={...o,...n.style}}return n}function Ud(t=!1){return(a,r,n,{latestValues:o},i)=>{const d=(lr(a)?Od:Bd)(r,o,i,a),c=sd(r,typeof a=="string",t),u=a!==g.Fragment?{...c,...d,ref:n}:{},{children:m}=r,x=g.useMemo(()=>Re(m)?m.get():m,[m]);return g.createElement(a,{...u,children:x})}}function $d(t,s){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){const i={...lr(r)?_d:Fd,preloadedFeatures:t,useRender:Ud(n),createVisualElement:s,Component:r};return ud(i)}}function zi(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let r=0;r<a;r++)if(s[r]!==t[r])return!1;return!0}function ta(t,s,a){const r=t.getProps();return cr(r,s,a!==void 0?a:r.custom,t)}const zd=ar(()=>window.ScrollTimeline!==void 0);class Kd{constructor(s){this.stop=()=>this.runAll("stop"),this.animations=s.filter(Boolean)}get finished(){return Promise.all(this.animations.map(s=>"finished"in s?s.finished:s))}getAll(s){return this.animations[0][s]}setAll(s,a){for(let r=0;r<this.animations.length;r++)this.animations[r][s]=a}attachTimeline(s,a){const r=this.animations.map(n=>{if(zd()&&n.attachTimeline)return n.attachTimeline(s);if(typeof a=="function")return a(n)});return()=>{r.forEach((n,o)=>{n&&n(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(s){this.setAll("time",s)}get speed(){return this.getAll("speed")}set speed(s){this.setAll("speed",s)}get startTime(){return this.getAll("startTime")}get duration(){let s=0;for(let a=0;a<this.animations.length;a++)s=Math.max(s,this.animations[a].duration);return s}runAll(s){this.animations.forEach(a=>a[s]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Hd extends Kd{then(s,a){return Promise.all(this.animations).then(s).catch(a)}}function pr(t,s){return t?t[s]||t.default||t:void 0}const Ma=2e4;function Ki(t){let s=0;const a=50;let r=t.next(s);for(;!r.done&&s<Ma;)s+=a,r=t.next(s);return s>=Ma?1/0:s}function yr(t){return typeof t=="function"}function Xr(t,s){t.timeline=s,t.onfinish=null}const vr=t=>Array.isArray(t)&&typeof t[0]=="number",Wd={linearEasing:void 0};function Gd(t,s){const a=ar(t);return()=>{var r;return(r=Wd[s])!==null&&r!==void 0?r:a()}}const Ks=Gd(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hi=(t,s,a=10)=>{let r="";const n=Math.max(Math.round(s/a),2);for(let o=0;o<n;o++)r+=t(Yt(0,n-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function Wi(t){return!!(typeof t=="function"&&Ks()||!t||typeof t=="string"&&(t in Ea||Ks())||vr(t)||Array.isArray(t)&&t.every(Wi))}const ls=([t,s,a,r])=>`cubic-bezier(${t}, ${s}, ${a}, ${r})`,Ea={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ls([0,.65,.55,1]),circOut:ls([.55,0,1,.45]),backIn:ls([.31,.01,.66,-.59]),backOut:ls([.33,1.53,.69,.99])};function Gi(t,s){if(t)return typeof t=="function"&&Ks()?Hi(t,s):vr(t)?ls(t):Array.isArray(t)?t.map(a=>Gi(a,s)||Ea.easeOut):Ea[t]}const Ye={x:!1,y:!1};function qi(){return Ye.x||Ye.y}function qd(t,s,a){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let n=document;const o=(r=void 0)!==null&&r!==void 0?r:n.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function Zi(t,s){const a=qd(t),r=new AbortController,n={passive:!0,...s,signal:r.signal};return[a,n,()=>r.abort()]}function Qr(t){return s=>{s.pointerType==="touch"||qi()||t(s)}}function Zd(t,s,a={}){const[r,n,o]=Zi(t,a),i=Qr(l=>{const{target:d}=l,c=s(l);if(typeof c!="function"||!d)return;const u=Qr(m=>{c(m),d.removeEventListener("pointerleave",u)});d.addEventListener("pointerleave",u,n)});return r.forEach(l=>{l.addEventListener("pointerenter",i,n)}),o}const Yi=(t,s)=>s?t===s?!0:Yi(t,s.parentElement):!1,br=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Yd=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Xd(t){return Yd.has(t.tagName)||t.tabIndex!==-1}const cs=new WeakSet;function Jr(t){return s=>{s.key==="Enter"&&t(s)}}function ha(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const Qd=(t,s)=>{const a=t.currentTarget;if(!a)return;const r=Jr(()=>{if(cs.has(a))return;ha(a,"down");const n=Jr(()=>{ha(a,"up")}),o=()=>ha(a,"cancel");a.addEventListener("keyup",n,s),a.addEventListener("blur",o,s)});a.addEventListener("keydown",r,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",r),s)};function en(t){return br(t)&&!qi()}function Jd(t,s,a={}){const[r,n,o]=Zi(t,a),i=l=>{const d=l.currentTarget;if(!en(l)||cs.has(d))return;cs.add(d);const c=s(l),u=(h,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),!(!en(h)||!cs.has(d))&&(cs.delete(d),typeof c=="function"&&c(h,{success:S}))},m=h=>{u(h,a.useGlobalTarget||Yi(d,h.target))},x=h=>{u(h,!1)};window.addEventListener("pointerup",m,n),window.addEventListener("pointercancel",x,n)};return r.forEach(l=>{!Xd(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(a.useGlobalTarget?window:l).addEventListener("pointerdown",i,n),l.addEventListener("focus",c=>Qd(c,n),n)}),o}function eu(t){return t==="x"||t==="y"?Ye[t]?null:(Ye[t]=!0,()=>{Ye[t]=!1}):Ye.x||Ye.y?null:(Ye.x=Ye.y=!0,()=>{Ye.x=Ye.y=!1})}const Xi=new Set(["width","height","top","left","right","bottom",...as]);let Is;function tu(){Is=void 0}const at={now:()=>(Is===void 0&&at.set(Ae.isProcessing||Yc.useManualTiming?Ae.timestamp:performance.now()),Is),set:t=>{Is=t,queueMicrotask(tu)}};function jr(t,s){t.indexOf(s)===-1&&t.push(s)}function wr(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}class Nr{constructor(){this.subscriptions=[]}add(s){return jr(this.subscriptions,s),()=>wr(this.subscriptions,s)}notify(s,a,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](s,a,r);else for(let o=0;o<n;o++){const i=this.subscriptions[o];i&&i(s,a,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Qi(t,s){return s?t*(1e3/s):0}const tn=30,su=t=>!isNaN(parseFloat(t));class au{constructor(s,a={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,n=!0)=>{const o=at.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=at.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=su(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new Nr);const r=this.events[s].add(a);return s==="change"?()=>{r(),be.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s,a=!0){!a||!this.passiveEffect?this.updateAndNotify(s,a):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,a,r){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=at.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>tn)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,tn);return Qi(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bs(t,s){return new au(t,s)}function ru(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,bs(a))}function nu(t,s){const a=ta(t,s);let{transitionEnd:r={},transition:n={},...o}=a||{};o={...o,...r};for(const i in o){const l=pd(o[i]);ru(t,i,l)}}function iu(t){return!!(Re(t)&&t.add)}function La(t,s){const a=t.getValue("willChange");if(iu(a))return a.add(s)}function Ji(t){return t.props[Pi]}const eo=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,ou=1e-7,lu=12;function cu(t,s,a,r,n){let o,i,l=0;do i=s+(a-s)/2,o=eo(i,r,n)-t,o>0?a=i:s=i;while(Math.abs(o)>ou&&++l<lu);return i}function ks(t,s,a,r){if(t===s&&a===r)return Ve;const n=o=>cu(o,0,1,t,a);return o=>o===0||o===1?o:eo(n(o),s,r)}const to=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,so=t=>s=>1-t(1-s),ao=ks(.33,1.53,.69,.99),kr=so(ao),ro=to(kr),no=t=>(t*=2)<1?.5*kr(t):.5*(2-Math.pow(2,-10*(t-1))),Sr=t=>1-Math.sin(Math.acos(t)),io=so(Sr),oo=to(Sr),lo=t=>/^0[^.\s]+$/u.test(t);function du(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lo(t):!0}const ms=t=>Math.round(t*1e5)/1e5,Cr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uu(t){return t==null}const hu=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tr=(t,s)=>a=>!!(typeof a=="string"&&hu.test(a)&&a.startsWith(t)||s&&!uu(a)&&Object.prototype.hasOwnProperty.call(a,s)),co=(t,s,a)=>r=>{if(typeof r!="string")return r;const[n,o,i,l]=r.match(Cr);return{[t]:parseFloat(n),[s]:parseFloat(o),[a]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},mu=t=>dt(0,255,t),ma={...rs,transform:t=>Math.round(mu(t))},_t={test:Tr("rgb","red"),parse:co("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:r=1})=>"rgba("+ma.transform(t)+", "+ma.transform(s)+", "+ma.transform(a)+", "+ms(vs.transform(r))+")"};function gu(t){let s="",a="",r="",n="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),r=t.substring(5,7),n=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),r=t.substring(3,4),n=t.substring(4,5),s+=s,a+=a,r+=r,n+=n),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const _a={test:Tr("#"),parse:gu,transform:_t.transform},Kt={test:Tr("hsl","hue"),parse:co("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:r=1})=>"hsla("+Math.round(t)+", "+st.transform(ms(s))+", "+st.transform(ms(a))+", "+ms(vs.transform(r))+")"},De={test:t=>_t.test(t)||_a.test(t)||Kt.test(t),parse:t=>_t.test(t)?_t.parse(t):Kt.test(t)?Kt.parse(t):_a.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_t.transform(t):Kt.transform(t)},xu=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fu(t){var s,a;return isNaN(t)&&typeof t=="string"&&(((s=t.match(Cr))===null||s===void 0?void 0:s.length)||0)+(((a=t.match(xu))===null||a===void 0?void 0:a.length)||0)>0}const uo="number",ho="color",pu="var",yu="var(",sn="${}",vu=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function js(t){const s=t.toString(),a=[],r={color:[],number:[],var:[]},n=[];let o=0;const l=s.replace(vu,d=>(De.test(d)?(r.color.push(o),n.push(ho),a.push(De.parse(d))):d.startsWith(yu)?(r.var.push(o),n.push(pu),a.push(d)):(r.number.push(o),n.push(uo),a.push(parseFloat(d))),++o,sn)).split(sn);return{values:a,split:l,indexes:r,types:n}}function mo(t){return js(t).values}function go(t){const{split:s,types:a}=js(t),r=s.length;return n=>{let o="";for(let i=0;i<r;i++)if(o+=s[i],n[i]!==void 0){const l=a[i];l===uo?o+=ms(n[i]):l===ho?o+=De.transform(n[i]):o+=n[i]}return o}}const bu=t=>typeof t=="number"?0:t;function ju(t){const s=mo(t);return go(t)(s.map(bu))}const Tt={test:fu,parse:mo,createTransformer:go,getAnimatableNone:ju},wu=new Set(["brightness","contrast","saturate","opacity"]);function Nu(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=a.match(Cr)||[];if(!r)return t;const n=a.replace(r,"");let o=wu.has(s)?1:0;return r!==a&&(o*=100),s+"("+o+n+")"}const ku=/\b([a-z-]*)\(.*?\)/gu,Fa={...Tt,getAnimatableNone:t=>{const s=t.match(ku);return s?s.map(Nu).join(" "):t}},Su={...ur,color:De,backgroundColor:De,outlineColor:De,fill:De,stroke:De,borderColor:De,borderTopColor:De,borderRightColor:De,borderBottomColor:De,borderLeftColor:De,filter:Fa,WebkitFilter:Fa},Ar=t=>Su[t];function xo(t,s){let a=Ar(t);return a!==Fa&&(a=Tt),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const Cu=new Set(["auto","none","0"]);function Tu(t,s,a){let r=0,n;for(;r<t.length&&!n;){const o=t[r];typeof o=="string"&&!Cu.has(o)&&js(o).values.length&&(n=t[r]),r++}if(n&&a)for(const o of s)t[o]=xo(a,n)}const an=t=>t===rs||t===q,rn=(t,s)=>parseFloat(t.split(", ")[s]),nn=(t,s)=>(a,{transform:r})=>{if(r==="none"||!r)return 0;const n=r.match(/^matrix3d\((.+)\)$/u);if(n)return rn(n[1],s);{const o=r.match(/^matrix\((.+)\)$/u);return o?rn(o[1],t):0}},Au=new Set(["x","y","z"]),Pu=as.filter(t=>!Au.has(t));function Du(t){const s=[];return Pu.forEach(a=>{const r=t.getValue(a);r!==void 0&&(s.push([a,r.get()]),r.set(a.startsWith("scale")?1:0))}),s}const Qt={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:nn(4,13),y:nn(5,14)};Qt.translateX=Qt.x;Qt.translateY=Qt.y;const Vt=new Set;let Va=!1,Ia=!1;function fo(){if(Ia){const t=Array.from(Vt).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),a=new Map;s.forEach(r=>{const n=Du(r);n.length&&(a.set(r,n),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const n=a.get(r);n&&n.forEach(([o,i])=>{var l;(l=r.getValue(o))===null||l===void 0||l.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ia=!1,Va=!1,Vt.forEach(t=>t.complete()),Vt.clear()}function po(){Vt.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ia=!0)})}function Ru(){po(),fo()}class Pr{constructor(s,a,r,n,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=r,this.motionValue=n,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vt.add(this),Va||(Va=!0,be.read(po),be.resolveKeyframes(fo))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:r,motionValue:n}=this;for(let o=0;o<s.length;o++)if(s[o]===null)if(o===0){const i=n==null?void 0:n.get(),l=s[s.length-1];if(i!==void 0)s[0]=i;else if(r&&a){const d=r.readValue(a,l);d!=null&&(s[0]=d)}s[0]===void 0&&(s[0]=l),n&&i===void 0&&n.set(s[0])}else s[o]=s[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vt.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vt.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const yo=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Mu=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Eu(t){const s=Mu.exec(t);if(!s)return[,];const[,a,r,n]=s;return[`--${a??r}`,n]}function vo(t,s,a=1){const[r,n]=Eu(t);if(!r)return;const o=window.getComputedStyle(s).getPropertyValue(r);if(o){const i=o.trim();return yo(i)?parseFloat(i):i}return dr(n)?vo(n,s,a+1):n}const bo=t=>s=>s.test(t),Lu={test:t=>t==="auto",parse:t=>t},jo=[rs,q,st,pt,Nd,wd,Lu],on=t=>jo.find(bo(t));class wo extends Pr{constructor(s,a,r,n,o){super(s,a,r,n,o,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:r}=this;if(!a||!a.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let c=s[d];if(typeof c=="string"&&(c=c.trim(),dr(c))){const u=vo(c,a.current);u!==void 0&&(s[d]=u),d===s.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Xi.has(r)||s.length!==2)return;const[n,o]=s,i=on(n),l=on(o);if(i!==l)if(an(i)&&an(l))for(let d=0;d<s.length;d++){const c=s[d];typeof c=="string"&&(s[d]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,r=[];for(let n=0;n<s.length;n++)du(s[n])&&r.push(n);r.length&&Tu(s,r,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qt[r](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const n=a[a.length-1];n!==void 0&&s.getValue(r,n).jump(n,!1)}measureEndState(){var s;const{element:a,name:r,unresolvedKeyframes:n}=this;if(!a||!a.current)return;const o=a.getValue(r);o&&o.jump(this.measuredOrigin,!1);const i=n.length-1,l=n[i];n[i]=Qt[r](a.measureViewportBox(),window.getComputedStyle(a.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((s=this.removedTransforms)===null||s===void 0)&&s.length&&this.removedTransforms.forEach(([d,c])=>{a.getValue(d).set(c)}),this.resolveNoneKeyframes()}}const ln=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Tt.test(t)||t==="0")&&!t.startsWith("url("));function _u(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function Fu(t,s,a,r){const n=t[0];if(n===null)return!1;if(s==="display"||s==="visibility")return!0;const o=t[t.length-1],i=ln(n,s),l=ln(o,s);return!i||!l?!1:_u(t)||(a==="spring"||yr(a))&&r}const Vu=t=>t!==null;function sa(t,{repeat:s,repeatType:a="loop"},r){const n=t.filter(Vu),o=s&&a!=="loop"&&s%2===1?0:n.length-1;return!o||r===void 0?n[o]:r}const Iu=40;class No{constructor({autoplay:s=!0,delay:a=0,type:r="keyframes",repeat:n=0,repeatDelay:o=0,repeatType:i="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=at.now(),this.options={autoplay:s,delay:a,type:r,repeat:n,repeatDelay:o,repeatType:i,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Iu?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ru(),this._resolved}onKeyframesResolved(s,a){this.resolvedAt=at.now(),this.hasAttemptedResolve=!0;const{name:r,type:n,velocity:o,delay:i,onComplete:l,onUpdate:d,isGenerator:c}=this.options;if(!c&&!Fu(s,r,n,o))if(i)this.options.duration=0;else{d&&d(sa(s,this.options,a)),l&&l(),this.resolveFinishedPromise();return}const u=this.initPlayback(s,a);u!==!1&&(this._resolved={keyframes:s,finalKeyframe:a,...u},this.onPostResolved())}onPostResolved(){}then(s,a){return this.currentFinishedPromise.then(s,a)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(s=>{this.resolveFinishedPromise=s})}}const Ne=(t,s,a)=>t+(s-t)*a;function ga(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function Bu({hue:t,saturation:s,lightness:a,alpha:r}){t/=360,s/=100,a/=100;let n=0,o=0,i=0;if(!s)n=o=i=a;else{const l=a<.5?a*(1+s):a+s-a*s,d=2*a-l;n=ga(d,l,t+1/3),o=ga(d,l,t),i=ga(d,l,t-1/3)}return{red:Math.round(n*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}function Hs(t,s){return a=>a>0?s:t}const xa=(t,s,a)=>{const r=t*t,n=a*(s*s-r)+r;return n<0?0:Math.sqrt(n)},Ou=[_a,_t,Kt],Uu=t=>Ou.find(s=>s.test(t));function cn(t){const s=Uu(t);if(!s)return!1;let a=s.parse(t);return s===Kt&&(a=Bu(a)),a}const dn=(t,s)=>{const a=cn(t),r=cn(s);if(!a||!r)return Hs(t,s);const n={...a};return o=>(n.red=xa(a.red,r.red,o),n.green=xa(a.green,r.green,o),n.blue=xa(a.blue,r.blue,o),n.alpha=Ne(a.alpha,r.alpha,o),_t.transform(n))},$u=(t,s)=>a=>s(t(a)),Ss=(...t)=>t.reduce($u),Ba=new Set(["none","hidden"]);function zu(t,s){return Ba.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function Ku(t,s){return a=>Ne(t,s,a)}function Dr(t){return typeof t=="number"?Ku:typeof t=="string"?dr(t)?Hs:De.test(t)?dn:Gu:Array.isArray(t)?ko:typeof t=="object"?De.test(t)?dn:Hu:Hs}function ko(t,s){const a=[...t],r=a.length,n=t.map((o,i)=>Dr(o)(o,s[i]));return o=>{for(let i=0;i<r;i++)a[i]=n[i](o);return a}}function Hu(t,s){const a={...t,...s},r={};for(const n in a)t[n]!==void 0&&s[n]!==void 0&&(r[n]=Dr(t[n])(t[n],s[n]));return n=>{for(const o in r)a[o]=r[o](n);return a}}function Wu(t,s){var a;const r=[],n={color:0,var:0,number:0};for(let o=0;o<s.values.length;o++){const i=s.types[o],l=t.indexes[i][n[i]],d=(a=t.values[l])!==null&&a!==void 0?a:0;r[o]=d,n[i]++}return r}const Gu=(t,s)=>{const a=Tt.createTransformer(s),r=js(t),n=js(s);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?Ba.has(t)&&!n.values.length||Ba.has(s)&&!r.values.length?zu(t,s):Ss(ko(Wu(r,n),n.values),a):Hs(t,s)};function So(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?Ne(t,s,a):Dr(t)(t,s)}const qu=5;function Co(t,s,a){const r=Math.max(s-qu,0);return Qi(a-t(r),s-r)}const Se={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fa=.001;function Zu({duration:t=Se.duration,bounce:s=Se.bounce,velocity:a=Se.velocity,mass:r=Se.mass}){let n,o,i=1-s;i=dt(Se.minDamping,Se.maxDamping,i),t=dt(Se.minDuration,Se.maxDuration,lt(t)),i<1?(n=c=>{const u=c*i,m=u*t,x=u-a,h=Oa(c,i),S=Math.exp(-m);return fa-x/h*S},o=c=>{const m=c*i*t,x=m*a+a,h=Math.pow(i,2)*Math.pow(c,2)*t,S=Math.exp(-m),p=Oa(Math.pow(c,2),i);return(-n(c)+fa>0?-1:1)*((x-h)*S)/p}):(n=c=>{const u=Math.exp(-c*t),m=(c-a)*t+1;return-fa+u*m},o=c=>{const u=Math.exp(-c*t),m=(a-c)*(t*t);return u*m});const l=5/t,d=Xu(n,o,l);if(t=ot(t),isNaN(d))return{stiffness:Se.stiffness,damping:Se.damping,duration:t};{const c=Math.pow(d,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const Yu=12;function Xu(t,s,a){let r=a;for(let n=1;n<Yu;n++)r=r-t(r)/s(r);return r}function Oa(t,s){return t*Math.sqrt(1-s*s)}const Qu=["duration","bounce"],Ju=["stiffness","damping","mass"];function un(t,s){return s.some(a=>t[a]!==void 0)}function eh(t){let s={velocity:Se.velocity,stiffness:Se.stiffness,damping:Se.damping,mass:Se.mass,isResolvedFromDuration:!1,...t};if(!un(t,Ju)&&un(t,Qu))if(t.visualDuration){const a=t.visualDuration,r=2*Math.PI/(a*1.2),n=r*r,o=2*dt(.05,1,1-(t.bounce||0))*Math.sqrt(n);s={...s,mass:Se.mass,stiffness:n,damping:o}}else{const a=Zu(t);s={...s,...a,mass:Se.mass},s.isResolvedFromDuration=!0}return s}function To(t=Se.visualDuration,s=Se.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:n}=a;const o=a.keyframes[0],i=a.keyframes[a.keyframes.length-1],l={done:!1,value:o},{stiffness:d,damping:c,mass:u,duration:m,velocity:x,isResolvedFromDuration:h}=eh({...a,velocity:-lt(a.velocity||0)}),S=x||0,p=c/(2*Math.sqrt(d*u)),y=i-o,j=lt(Math.sqrt(d/u)),M=Math.abs(y)<5;r||(r=M?Se.restSpeed.granular:Se.restSpeed.default),n||(n=M?Se.restDelta.granular:Se.restDelta.default);let E;if(p<1){const w=Oa(j,p);E=v=>{const _=Math.exp(-p*j*v);return i-_*((S+p*j*y)/w*Math.sin(w*v)+y*Math.cos(w*v))}}else if(p===1)E=w=>i-Math.exp(-j*w)*(y+(S+j*y)*w);else{const w=j*Math.sqrt(p*p-1);E=v=>{const _=Math.exp(-p*j*v),P=Math.min(w*v,300);return i-_*((S+p*j*y)*Math.sinh(P)+w*y*Math.cosh(P))/w}}const R={calculatedDuration:h&&m||null,next:w=>{const v=E(w);if(h)l.done=w>=m;else{let _=0;p<1&&(_=w===0?ot(S):Co(E,w,v));const P=Math.abs(_)<=r,$=Math.abs(i-v)<=n;l.done=P&&$}return l.value=l.done?i:v,l},toString:()=>{const w=Math.min(Ki(R),Ma),v=Hi(_=>R.next(w*_).value,w,30);return w+"ms "+v}};return R}function hn({keyframes:t,velocity:s=0,power:a=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:o=500,modifyTarget:i,min:l,max:d,restDelta:c=.5,restSpeed:u}){const m=t[0],x={done:!1,value:m},h=P=>l!==void 0&&P<l||d!==void 0&&P>d,S=P=>l===void 0?d:d===void 0||Math.abs(l-P)<Math.abs(d-P)?l:d;let p=a*s;const y=m+p,j=i===void 0?y:i(y);j!==y&&(p=j-m);const M=P=>-p*Math.exp(-P/r),E=P=>j+M(P),R=P=>{const $=M(P),G=E(P);x.done=Math.abs($)<=c,x.value=x.done?j:G};let w,v;const _=P=>{h(x.value)&&(w=P,v=To({keyframes:[x.value,S(x.value)],velocity:Co(E,P,x.value),damping:n,stiffness:o,restDelta:c,restSpeed:u}))};return _(0),{calculatedDuration:null,next:P=>{let $=!1;return!v&&w===void 0&&($=!0,R(P),_(P)),w!==void 0&&P>=w?v.next(P-w):(!$&&R(P),x)}}}const th=ks(.42,0,1,1),sh=ks(0,0,.58,1),Ao=ks(.42,0,.58,1),ah=t=>Array.isArray(t)&&typeof t[0]!="number",rh={linear:Ve,easeIn:th,easeInOut:Ao,easeOut:sh,circIn:Sr,circInOut:oo,circOut:io,backIn:kr,backInOut:ro,backOut:ao,anticipate:no},mn=t=>{if(vr(t)){ki(t.length===4);const[s,a,r,n]=t;return ks(s,a,r,n)}else if(typeof t=="string")return rh[t];return t};function nh(t,s,a){const r=[],n=a||So,o=t.length-1;for(let i=0;i<o;i++){let l=n(t[i],t[i+1]);if(s){const d=Array.isArray(s)?s[i]||Ve:s;l=Ss(d,l)}r.push(l)}return r}function ih(t,s,{clamp:a=!0,ease:r,mixer:n}={}){const o=t.length;if(ki(o===s.length),o===1)return()=>s[0];if(o===2&&s[0]===s[1])return()=>s[1];const i=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),s=[...s].reverse());const l=nh(s,r,n),d=l.length,c=u=>{if(i&&u<t[0])return s[0];let m=0;if(d>1)for(;m<t.length-2&&!(u<t[m+1]);m++);const x=Yt(t[m],t[m+1],u);return l[m](x)};return a?u=>c(dt(t[0],t[o-1],u)):c}function oh(t,s){const a=t[t.length-1];for(let r=1;r<=s;r++){const n=Yt(0,s,r);t.push(Ne(a,1,n))}}function lh(t){const s=[0];return oh(s,t.length-1),s}function ch(t,s){return t.map(a=>a*s)}function dh(t,s){return t.map(()=>s||Ao).splice(0,t.length-1)}function Ws({duration:t=300,keyframes:s,times:a,ease:r="easeInOut"}){const n=ah(r)?r.map(mn):mn(r),o={done:!1,value:s[0]},i=ch(a&&a.length===s.length?a:lh(s),t),l=ih(i,s,{ease:Array.isArray(n)?n:dh(s,n)});return{calculatedDuration:t,next:d=>(o.value=l(d),o.done=d>=t,o)}}const uh=t=>{const s=({timestamp:a})=>t(a);return{start:()=>be.update(s,!0),stop:()=>Ct(s),now:()=>Ae.isProcessing?Ae.timestamp:at.now()}},hh={decay:hn,inertia:hn,tween:Ws,keyframes:Ws,spring:To},mh=t=>t/100;class Rr extends No{constructor(s){super(s),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:a,motionValue:r,element:n,keyframes:o}=this.options,i=(n==null?void 0:n.KeyframeResolver)||Pr,l=(d,c)=>this.onKeyframesResolved(d,c);this.resolver=new i(o,l,a,r,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(s){const{type:a="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:o,velocity:i=0}=this.options,l=yr(a)?a:hh[a]||Ws;let d,c;l!==Ws&&typeof s[0]!="number"&&(d=Ss(mh,So(s[0],s[1])),s=[0,100]);const u=l({...this.options,keyframes:s});o==="mirror"&&(c=l({...this.options,keyframes:[...s].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=Ki(u));const{calculatedDuration:m}=u,x=m+n,h=x*(r+1)-n;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:d,calculatedDuration:m,resolvedDuration:x,totalDuration:h}}onPostResolved(){const{autoplay:s=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!s?this.pause():this.state=this.pendingPlayState}tick(s,a=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:n,generator:o,mirroredGenerator:i,mapPercentToKeyframes:l,keyframes:d,calculatedDuration:c,totalDuration:u,resolvedDuration:m}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:h,repeatType:S,repeatDelay:p,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-u/this.speed,this.startTime)),a?this.currentTime=s:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(s-this.startTime)*this.speed;const j=this.currentTime-x*(this.speed>=0?1:-1),M=this.speed>=0?j<0:j>u;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,R=o;if(h){const P=Math.min(this.currentTime,u)/m;let $=Math.floor(P),G=P%1;!G&&P>=1&&(G=1),G===1&&$--,$=Math.min($,h+1),!!($%2)&&(S==="reverse"?(G=1-G,p&&(G-=p/m)):S==="mirror"&&(R=i)),E=dt(0,1,G)*m}const w=M?{done:!1,value:d[0]}:R.next(E);l&&(w.value=l(w.value));let{done:v}=w;!M&&c!==null&&(v=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&v);return _&&n!==void 0&&(w.value=sa(d,this.options,n)),y&&y(w.value),_&&this.finish(),w}get duration(){const{resolved:s}=this;return s?lt(s.calculatedDuration):0}get time(){return lt(this.currentTime)}set time(s){s=ot(s),this.currentTime=s,this.holdTime!==null||this.speed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.speed)}get speed(){return this.playbackSpeed}set speed(s){const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=lt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:s=uh,onPlay:a,startTime:r}=this.options;this.driver||(this.driver=s(o=>this.tick(o))),a&&a();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var s;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(s=this.currentTime)!==null&&s!==void 0?s:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:s}=this.options;s&&s()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}}const gh=new Set(["opacity","clipPath","filter","transform"]);function xh(t,s,a,{delay:r=0,duration:n=300,repeat:o=0,repeatType:i="loop",ease:l="easeInOut",times:d}={}){const c={[s]:a};d&&(c.offset=d);const u=Gi(l,n);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}const fh=ar(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Gs=10,ph=2e4;function yh(t){return yr(t.type)||t.type==="spring"||!Wi(t.ease)}function vh(t,s){const a=new Rr({...s,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const n=[];let o=0;for(;!r.done&&o<ph;)r=a.sample(o),n.push(r.value),o+=Gs;return{times:void 0,keyframes:n,duration:o-Gs,ease:"linear"}}const Po={anticipate:no,backInOut:ro,circInOut:oo};function bh(t){return t in Po}class gn extends No{constructor(s){super(s);const{name:a,motionValue:r,element:n,keyframes:o}=this.options;this.resolver=new wo(o,(i,l)=>this.onKeyframesResolved(i,l),a,r,n),this.resolver.scheduleResolve()}initPlayback(s,a){let{duration:r=300,times:n,ease:o,type:i,motionValue:l,name:d,startTime:c}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof o=="string"&&Ks()&&bh(o)&&(o=Po[o]),yh(this.options)){const{onComplete:m,onUpdate:x,motionValue:h,element:S,...p}=this.options,y=vh(s,p);s=y.keyframes,s.length===1&&(s[1]=s[0]),r=y.duration,n=y.times,o=y.ease,i="keyframes"}const u=xh(l.owner.current,d,s,{...this.options,duration:r,times:n,ease:o});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(Xr(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:m}=this.options;l.set(sa(s,this.options,a)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:n,type:i,ease:o,keyframes:s}}get duration(){const{resolved:s}=this;if(!s)return 0;const{duration:a}=s;return lt(a)}get time(){const{resolved:s}=this;if(!s)return 0;const{animation:a}=s;return lt(a.currentTime||0)}set time(s){const{resolved:a}=this;if(!a)return;const{animation:r}=a;r.currentTime=ot(s)}get speed(){const{resolved:s}=this;if(!s)return 1;const{animation:a}=s;return a.playbackRate}set speed(s){const{resolved:a}=this;if(!a)return;const{animation:r}=a;r.playbackRate=s}get state(){const{resolved:s}=this;if(!s)return"idle";const{animation:a}=s;return a.playState}get startTime(){const{resolved:s}=this;if(!s)return null;const{animation:a}=s;return a.startTime}attachTimeline(s){if(!this._resolved)this.pendingTimeline=s;else{const{resolved:a}=this;if(!a)return Ve;const{animation:r}=a;Xr(r,s)}return Ve}play(){if(this.isStopped)return;const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.playState==="finished"&&this.updateFinishedPromise(),a.play()}pause(){const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:s}=this;if(!s)return;const{animation:a,keyframes:r,duration:n,type:o,ease:i,times:l}=s;if(a.playState==="idle"||a.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:m,element:x,...h}=this.options,S=new Rr({...h,keyframes:r,duration:n,type:o,ease:i,times:l,isGenerator:!0}),p=ot(this.time);c.setWithVelocity(S.sample(p-Gs).value,S.sample(p).value,Gs)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:s}=this;s&&s.animation.finish()}cancel(){const{resolved:s}=this;s&&s.animation.cancel()}static supports(s){const{motionValue:a,name:r,repeatDelay:n,repeatType:o,damping:i,type:l}=s;if(!a||!a.owner||!(a.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:c}=a.owner.getProps();return fh()&&r&&gh.has(r)&&!d&&!c&&!n&&o!=="mirror"&&i!==0&&l!=="inertia"}}const jh={type:"spring",stiffness:500,damping:25,restSpeed:10},wh=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Nh={type:"keyframes",duration:.8},kh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Sh=(t,{keyframes:s})=>s.length>2?Nh:Ut.has(t)?t.startsWith("scale")?wh(s[1]):jh:kh;function Ch({when:t,delay:s,delayChildren:a,staggerChildren:r,staggerDirection:n,repeat:o,repeatType:i,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}const Mr=(t,s,a,r={},n,o)=>i=>{const l=pr(r,t)||{},d=l.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ot(d);let u={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...l,delay:-c,onUpdate:x=>{s.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:t,motionValue:s,element:o?void 0:n};Ch(l)||(u={...u,...Sh(t,u)}),u.duration&&(u.duration=ot(u.duration)),u.repeatDelay&&(u.repeatDelay=ot(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),m&&!o&&s.get()!==void 0){const x=sa(u.keyframes,l);if(x!==void 0)return be.update(()=>{u.onUpdate(x),u.onComplete()}),new Hd([])}return!o&&gn.supports(u)?new gn(u):new Rr(u)};function Th({protectedKeys:t,needsAnimating:s},a){const r=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,r}function Do(t,s,{delay:a=0,transitionOverride:r,type:n}={}){var o;let{transition:i=t.getDefaultTransition(),transitionEnd:l,...d}=s;r&&(i=r);const c=[],u=n&&t.animationState&&t.animationState.getState()[n];for(const m in d){const x=t.getValue(m,(o=t.latestValues[m])!==null&&o!==void 0?o:null),h=d[m];if(h===void 0||u&&Th(u,m))continue;const S={delay:a,...pr(i||{},m)};let p=!1;if(window.MotionHandoffAnimation){const j=Ji(t);if(j){const M=window.MotionHandoffAnimation(j,m,be);M!==null&&(S.startTime=M,p=!0)}}La(t,m),x.start(Mr(m,x,h,t.shouldReduceMotion&&Xi.has(m)?{type:!1}:S,t,p));const y=x.animation;y&&c.push(y)}return l&&Promise.all(c).then(()=>{be.update(()=>{l&&nu(t,l)})}),c}function Ua(t,s,a={}){var r;const n=ta(t,s,a.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(o=a.transitionOverride);const i=n?()=>Promise.all(Do(t,n,a)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:m,staggerDirection:x}=o;return Ah(t,s,u+c,m,x,a)}:()=>Promise.resolve(),{when:d}=o;if(d){const[c,u]=d==="beforeChildren"?[i,l]:[l,i];return c().then(()=>u())}else return Promise.all([i(),l(a.delay)])}function Ah(t,s,a=0,r=0,n=1,o){const i=[],l=(t.variantChildren.size-1)*r,d=n===1?(c=0)=>c*r:(c=0)=>l-c*r;return Array.from(t.variantChildren).sort(Ph).forEach((c,u)=>{c.notify("AnimationStart",s),i.push(Ua(c,s,{...o,delay:a+d(u)}).then(()=>c.notify("AnimationComplete",s)))}),Promise.all(i)}function Ph(t,s){return t.sortNodePosition(s)}function Dh(t,s,a={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const n=s.map(o=>Ua(t,o,a));r=Promise.all(n)}else if(typeof s=="string")r=Ua(t,s,a);else{const n=typeof s=="function"?ta(t,s,a.custom):s;r=Promise.all(Do(t,n,a))}return r.then(()=>{t.notify("AnimationComplete",s)})}const Rh=nr.length;function Ro(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?Ro(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<Rh;a++){const r=nr[a],n=t.props[r];(ys(n)||n===!1)&&(s[r]=n)}return s}const Mh=[...rr].reverse(),Eh=rr.length;function Lh(t){return s=>Promise.all(s.map(({animation:a,options:r})=>Dh(t,a,r)))}function _h(t){let s=Lh(t),a=xn(),r=!0;const n=d=>(c,u)=>{var m;const x=ta(t,u,d==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(x){const{transition:h,transitionEnd:S,...p}=x;c={...c,...p,...S}}return c};function o(d){s=d(t)}function i(d){const{props:c}=t,u=Ro(t.parent)||{},m=[],x=new Set;let h={},S=1/0;for(let y=0;y<Eh;y++){const j=Mh[y],M=a[j],E=c[j]!==void 0?c[j]:u[j],R=ys(E),w=j===d?M.isActive:null;w===!1&&(S=y);let v=E===u[j]&&E!==c[j]&&R;if(v&&r&&t.manuallyAnimateOnMount&&(v=!1),M.protectedKeys={...h},!M.isActive&&w===null||!E&&!M.prevProp||Js(E)||typeof E=="boolean")continue;const _=Fh(M.prevProp,E);let P=_||j===d&&M.isActive&&!v&&R||y>S&&R,$=!1;const G=Array.isArray(E)?E:[E];let k=G.reduce(n(j),{});w===!1&&(k={});const{prevResolvedValues:I={}}=M,ae={...I,...k},pe=N=>{P=!0,x.has(N)&&($=!0,x.delete(N)),M.needsAnimating[N]=!0;const A=t.getValue(N);A&&(A.liveStyle=!1)};for(const N in ae){const A=k[N],F=I[N];if(h.hasOwnProperty(N))continue;let K=!1;Ra(A)&&Ra(F)?K=!zi(A,F):K=A!==F,K?A!=null?pe(N):x.add(N):A!==void 0&&x.has(N)?pe(N):M.protectedKeys[N]=!0}M.prevProp=E,M.prevResolvedValues=k,M.isActive&&(h={...h,...k}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(v&&_)||$)&&m.push(...G.map(N=>({animation:N,options:{type:j}})))}if(x.size){const y={};x.forEach(j=>{const M=t.getBaseTarget(j),E=t.getValue(j);E&&(E.liveStyle=!0),y[j]=M??null}),m.push({animation:y})}let p=!!m.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(p=!1),r=!1,p?s(m):Promise.resolve()}function l(d,c){var u;if(a[d].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(x=>{var h;return(h=x.animationState)===null||h===void 0?void 0:h.setActive(d,c)}),a[d].isActive=c;const m=i(d);for(const x in a)a[x].protectedKeys={};return m}return{animateChanges:i,setActive:l,setAnimateFunction:o,getState:()=>a,reset:()=>{a=xn(),r=!0}}}function Fh(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!zi(s,t):!1}function Dt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xn(){return{animate:Dt(!0),whileInView:Dt(),whileHover:Dt(),whileTap:Dt(),whileDrag:Dt(),whileFocus:Dt(),exit:Dt()}}class At{constructor(s){this.isMounted=!1,this.node=s}update(){}}class Vh extends At{constructor(s){super(s),s.animationState||(s.animationState=_h(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Js(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)===null||s===void 0||s.call(this)}}let Ih=0;class Bh extends At{constructor(){super(...arguments),this.id=Ih++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const n=this.node.animationState.setActive("exit",!s);a&&!s&&n.then(()=>a(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const Oh={animation:{Feature:Vh},exit:{Feature:Bh}};function ws(t,s,a,r={passive:!0}){return t.addEventListener(s,a,r),()=>t.removeEventListener(s,a)}function Cs(t){return{point:{x:t.pageX,y:t.pageY}}}const Uh=t=>s=>br(s)&&t(s,Cs(s));function gs(t,s,a,r){return ws(t,s,Uh(a),r)}const fn=(t,s)=>Math.abs(t-s);function $h(t,s){const a=fn(t.x,s.x),r=fn(t.y,s.y);return Math.sqrt(a**2+r**2)}class Mo{constructor(s,a,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=ya(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,h=$h(m.offset,{x:0,y:0})>=3;if(!x&&!h)return;const{point:S}=m,{timestamp:p}=Ae;this.history.push({...S,timestamp:p});const{onStart:y,onMove:j}=this.handlers;x||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=pa(x,this.transformPagePoint),be.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:h,onSessionEnd:S,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=ya(m.type==="pointercancel"?this.lastMoveEventInfo:pa(x,this.transformPagePoint),this.history);this.startEvent&&h&&h(m,y),S&&S(m,y)},!br(s))return;this.dragSnapToOrigin=o,this.handlers=a,this.transformPagePoint=r,this.contextWindow=n||window;const i=Cs(s),l=pa(i,this.transformPagePoint),{point:d}=l,{timestamp:c}=Ae;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=a;u&&u(s,ya(l,this.history)),this.removeListeners=Ss(gs(this.contextWindow,"pointermove",this.handlePointerMove),gs(this.contextWindow,"pointerup",this.handlePointerUp),gs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Ct(this.updatePoint)}}function pa(t,s){return s?{point:s(t.point)}:t}function pn(t,s){return{x:t.x-s.x,y:t.y-s.y}}function ya({point:t},s){return{point:t,delta:pn(t,Eo(s)),offset:pn(t,zh(s)),velocity:Kh(s,.1)}}function zh(t){return t[0]}function Eo(t){return t[t.length-1]}function Kh(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,r=null;const n=Eo(t);for(;a>=0&&(r=t[a],!(n.timestamp-r.timestamp>ot(s)));)a--;if(!r)return{x:0,y:0};const o=lt(n.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(n.x-r.x)/o,y:(n.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const Lo=1e-4,Hh=1-Lo,Wh=1+Lo,_o=.01,Gh=0-_o,qh=0+_o;function Ie(t){return t.max-t.min}function Zh(t,s,a){return Math.abs(t-s)<=a}function yn(t,s,a,r=.5){t.origin=r,t.originPoint=Ne(s.min,s.max,t.origin),t.scale=Ie(a)/Ie(s),t.translate=Ne(a.min,a.max,t.origin)-t.originPoint,(t.scale>=Hh&&t.scale<=Wh||isNaN(t.scale))&&(t.scale=1),(t.translate>=Gh&&t.translate<=qh||isNaN(t.translate))&&(t.translate=0)}function xs(t,s,a,r){yn(t.x,s.x,a.x,r?r.originX:void 0),yn(t.y,s.y,a.y,r?r.originY:void 0)}function vn(t,s,a){t.min=a.min+s.min,t.max=t.min+Ie(s)}function Yh(t,s,a){vn(t.x,s.x,a.x),vn(t.y,s.y,a.y)}function bn(t,s,a){t.min=s.min-a.min,t.max=t.min+Ie(s)}function fs(t,s,a){bn(t.x,s.x,a.x),bn(t.y,s.y,a.y)}function Xh(t,{min:s,max:a},r){return s!==void 0&&t<s?t=r?Ne(s,t,r.min):Math.max(t,s):a!==void 0&&t>a&&(t=r?Ne(a,t,r.max):Math.min(t,a)),t}function jn(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function Qh(t,{top:s,left:a,bottom:r,right:n}){return{x:jn(t.x,a,n),y:jn(t.y,s,r)}}function wn(t,s){let a=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,r]=[r,a]),{min:a,max:r}}function Jh(t,s){return{x:wn(t.x,s.x),y:wn(t.y,s.y)}}function em(t,s){let a=.5;const r=Ie(t),n=Ie(s);return n>r?a=Yt(s.min,s.max-r,t.min):r>n&&(a=Yt(t.min,t.max-n,s.min)),dt(0,1,a)}function tm(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const $a=.35;function sm(t=$a){return t===!1?t=0:t===!0&&(t=$a),{x:Nn(t,"left","right"),y:Nn(t,"top","bottom")}}function Nn(t,s,a){return{min:kn(t,s),max:kn(t,a)}}function kn(t,s){return typeof t=="number"?t:t[s]||0}const Sn=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ht=()=>({x:Sn(),y:Sn()}),Cn=()=>({min:0,max:0}),Ce=()=>({x:Cn(),y:Cn()});function Oe(t){return[t("x"),t("y")]}function Fo({top:t,left:s,right:a,bottom:r}){return{x:{min:s,max:a},y:{min:t,max:r}}}function am({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function rm(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:r.y,right:r.x}}function va(t){return t===void 0||t===1}function za({scale:t,scaleX:s,scaleY:a}){return!va(t)||!va(s)||!va(a)}function Mt(t){return za(t)||Vo(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Vo(t){return Tn(t.x)||Tn(t.y)}function Tn(t){return t&&t!=="0%"}function qs(t,s,a){const r=t-a,n=s*r;return a+n}function An(t,s,a,r,n){return n!==void 0&&(t=qs(t,n,r)),qs(t,a,r)+s}function Ka(t,s=0,a=1,r,n){t.min=An(t.min,s,a,r,n),t.max=An(t.max,s,a,r,n)}function Io(t,{x:s,y:a}){Ka(t.x,s.translate,s.scale,s.originPoint),Ka(t.y,a.translate,a.scale,a.originPoint)}const Pn=.999999999999,Dn=1.0000000000001;function nm(t,s,a,r=!1){const n=a.length;if(!n)return;s.x=s.y=1;let o,i;for(let l=0;l<n;l++){o=a[l],i=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Gt(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(s.x*=i.x.scale,s.y*=i.y.scale,Io(t,i)),r&&Mt(o.latestValues)&&Gt(t,o.latestValues))}s.x<Dn&&s.x>Pn&&(s.x=1),s.y<Dn&&s.y>Pn&&(s.y=1)}function Wt(t,s){t.min=t.min+s,t.max=t.max+s}function Rn(t,s,a,r,n=.5){const o=Ne(t.min,t.max,n);Ka(t,s,a,o,r)}function Gt(t,s){Rn(t.x,s.x,s.scaleX,s.scale,s.originX),Rn(t.y,s.y,s.scaleY,s.scale,s.originY)}function Bo(t,s){return Fo(rm(t.getBoundingClientRect(),s))}function im(t,s,a){const r=Bo(t,a),{scroll:n}=s;return n&&(Wt(r.x,n.offset.x),Wt(r.y,n.offset.y)),r}const Oo=({current:t})=>t?t.ownerDocument.defaultView:null,om=new WeakMap;class lm{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=s}start(s,{snapToCursor:a=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Cs(u).point)},o=(u,m)=>{const{drag:x,dragPropagation:h,onDragStart:S}=this.getProps();if(x&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eu(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Oe(y=>{let j=this.getAxisMotionValue(y).get()||0;if(st.test(j)){const{projection:M}=this.visualElement;if(M&&M.layout){const E=M.layout.layoutBox[y];E&&(j=Ie(E)*(parseFloat(j)/100))}}this.originPoint[y]=j}),S&&be.postRender(()=>S(u,m)),La(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},i=(u,m)=>{const{dragPropagation:x,dragDirectionLock:h,onDirectionLock:S,onDrag:p}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:y}=m;if(h&&this.currentDirection===null){this.currentDirection=cm(y),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),p&&p(u,m)},l=(u,m)=>this.stop(u,m),d=()=>Oe(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Mo(s,{onSessionStart:n,onStart:o,onMove:i,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Oo(this.visualElement)})}stop(s,a){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=a;this.startAnimation(n);const{onDragEnd:o}=this.getProps();o&&be.postRender(()=>o(s,a))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,r){const{drag:n}=this.getProps();if(!r||!_s(s,n,this.currentDirection))return;const o=this.getAxisMotionValue(s);let i=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(i=Xh(i,this.constraints[s],this.elastic[s])),o.set(i)}resolveConstraints(){var s;const{dragConstraints:a,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,o=this.constraints;a&&zt(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&n?this.constraints=Qh(n.layoutBox,a):this.constraints=!1,this.elastic=sm(r),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Oe(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=tm(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!zt(s))return!1;const r=s.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const o=im(r,n.root,this.visualElement.getTransformPagePoint());let i=Jh(n.layout.layoutBox,o);if(a){const l=a(am(i));this.hasMutatedConstraints=!!l,l&&(i=Fo(l))}return i}startAnimation(s){const{drag:a,dragMomentum:r,dragElastic:n,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=Oe(u=>{if(!_s(u,a,this.currentDirection))return;let m=d&&d[u]||{};i&&(m={min:0,max:0});const x=n?200:1e6,h=n?40:1e7,S={type:"inertia",velocity:r?s[u]:0,bounceStiffness:x,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(u,S)});return Promise.all(c).then(l)}startAxisValueAnimation(s,a){const r=this.getAxisMotionValue(s);return La(this.visualElement,s),r.start(Mr(s,r,0,a,this.visualElement,!1))}stopAnimation(){Oe(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Oe(s=>{var a;return(a=this.getAxisMotionValue(s).animation)===null||a===void 0?void 0:a.pause()})}getAnimationState(s){var a;return(a=this.getAxisMotionValue(s).animation)===null||a===void 0?void 0:a.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),n=r[a];return n||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){Oe(a=>{const{drag:r}=this.getProps();if(!_s(a,r,this.currentDirection))return;const{projection:n}=this.visualElement,o=this.getAxisMotionValue(a);if(n&&n.layout){const{min:i,max:l}=n.layout.layoutBox[a];o.set(s[a]-Ne(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:r}=this.visualElement;if(!zt(a)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Oe(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const d=l.get();n[i]=em({min:d,max:d},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Oe(i=>{if(!_s(i,s,null))return;const l=this.getAxisMotionValue(i),{min:d,max:c}=this.constraints[i];l.set(Ne(d,c,n[i]))})}addListeners(){if(!this.visualElement.current)return;om.set(this.visualElement,this);const s=this.visualElement.current,a=gs(s,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();zt(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,o=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),be.read(r);const i=ws(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(Oe(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=d[u].translate,m.set(m.get()+d[u].translate))}),this.visualElement.render())}));return()=>{i(),a(),o(),l&&l()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:o=!1,dragElastic:i=$a,dragMomentum:l=!0}=s;return{...s,drag:a,dragDirectionLock:r,dragPropagation:n,dragConstraints:o,dragElastic:i,dragMomentum:l}}}function _s(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function cm(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class dm extends At{constructor(s){super(s),this.removeGroupControls=Ve,this.removeListeners=Ve,this.controls=new lm(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ve}unmount(){this.removeGroupControls(),this.removeListeners()}}const Mn=t=>(s,a)=>{t&&be.postRender(()=>t(s,a))};class um extends At{constructor(){super(...arguments),this.removePointerDownListener=Ve}onPointerDown(s){this.session=new Mo(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Oo(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:Mn(s),onStart:Mn(a),onMove:r,onEnd:(o,i)=>{delete this.session,n&&be.postRender(()=>n(o,i))}}}mount(){this.removePointerDownListener=gs(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function En(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const os={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(q.test(t))t=parseFloat(t);else return t;const a=En(t,s.target.x),r=En(t,s.target.y);return`${a}% ${r}%`}},hm={correct:(t,{treeScale:s,projectionDelta:a})=>{const r=t,n=Tt.parse(t);if(n.length>5)return r;const o=Tt.createTransformer(t),i=typeof n[0]!="number"?1:0,l=a.x.scale*s.x,d=a.y.scale*s.y;n[0+i]/=l,n[1+i]/=d;const c=Ne(l,d,.5);return typeof n[2+i]=="number"&&(n[2+i]/=c),typeof n[3+i]=="number"&&(n[3+i]/=c),o(n)}};class mm extends g.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:r,layoutId:n}=this.props,{projection:o}=s;Ed(gm),o&&(a.group&&a.group.add(o),r&&r.register&&n&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Bs.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:r,drag:n,isPresent:o}=this.props,i=r.projection;return i&&(i.isPresent=o,n||s.layoutDependency!==a||a===void 0?i.willUpdate():this.safeToRemove(),s.isPresent!==o&&(o?i.promote():i.relegate()||be.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),or.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:r}=this.props,{projection:n}=s;n&&(n.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function Uo(t){const[s,a]=wi(),r=g.useContext(Ja);return e.jsx(mm,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(Di),isPresent:s,safeToRemove:a})}const gm={borderRadius:{...os,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:os,borderTopRightRadius:os,borderBottomLeftRadius:os,borderBottomRightRadius:os,boxShadow:hm};function xm(t,s,a){const r=Re(t)?t:bs(t);return r.start(Mr("",r,s,a)),r.animation}function fm(t){return t instanceof SVGElement&&t.tagName!=="svg"}const pm=(t,s)=>t.depth-s.depth;class ym{constructor(){this.children=[],this.isDirty=!1}add(s){jr(this.children,s),this.isDirty=!0}remove(s){wr(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(pm),this.isDirty=!1,this.children.forEach(s)}}function vm(t,s){const a=at.now(),r=({timestamp:n})=>{const o=n-a;o>=s&&(Ct(r),t(o-s))};return be.read(r,!0),()=>Ct(r)}const $o=["TopLeft","TopRight","BottomLeft","BottomRight"],bm=$o.length,Ln=t=>typeof t=="string"?parseFloat(t):t,_n=t=>typeof t=="number"||q.test(t);function jm(t,s,a,r,n,o){n?(t.opacity=Ne(0,a.opacity!==void 0?a.opacity:1,wm(r)),t.opacityExit=Ne(s.opacity!==void 0?s.opacity:1,0,Nm(r))):o&&(t.opacity=Ne(s.opacity!==void 0?s.opacity:1,a.opacity!==void 0?a.opacity:1,r));for(let i=0;i<bm;i++){const l=`border${$o[i]}Radius`;let d=Fn(s,l),c=Fn(a,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||_n(d)===_n(c)?(t[l]=Math.max(Ne(Ln(d),Ln(c),r),0),(st.test(c)||st.test(d))&&(t[l]+="%")):t[l]=c}(s.rotate||a.rotate)&&(t.rotate=Ne(s.rotate||0,a.rotate||0,r))}function Fn(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const wm=zo(0,.5,io),Nm=zo(.5,.95,Ve);function zo(t,s,a){return r=>r<t?0:r>s?1:a(Yt(t,s,r))}function Vn(t,s){t.min=s.min,t.max=s.max}function Be(t,s){Vn(t.x,s.x),Vn(t.y,s.y)}function In(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function Bn(t,s,a,r,n){return t-=s,t=qs(t,1/a,r),n!==void 0&&(t=qs(t,1/n,r)),t}function km(t,s=0,a=1,r=.5,n,o=t,i=t){if(st.test(s)&&(s=parseFloat(s),s=Ne(i.min,i.max,s/100)-i.min),typeof s!="number")return;let l=Ne(o.min,o.max,r);t===o&&(l-=s),t.min=Bn(t.min,s,a,l,n),t.max=Bn(t.max,s,a,l,n)}function On(t,s,[a,r,n],o,i){km(t,s[a],s[r],s[n],s.scale,o,i)}const Sm=["x","scaleX","originX"],Cm=["y","scaleY","originY"];function Un(t,s,a,r){On(t.x,s,Sm,a?a.x:void 0,r?r.x:void 0),On(t.y,s,Cm,a?a.y:void 0,r?r.y:void 0)}function $n(t){return t.translate===0&&t.scale===1}function Ko(t){return $n(t.x)&&$n(t.y)}function zn(t,s){return t.min===s.min&&t.max===s.max}function Tm(t,s){return zn(t.x,s.x)&&zn(t.y,s.y)}function Kn(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function Ho(t,s){return Kn(t.x,s.x)&&Kn(t.y,s.y)}function Hn(t){return Ie(t.x)/Ie(t.y)}function Wn(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class Am{constructor(){this.members=[]}add(s){jr(this.members,s),s.scheduleRender()}remove(s){if(wr(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(n=>s===n);if(a===0)return!1;let r;for(let n=a;n>=0;n--){const o=this.members[n];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(s,a){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,a&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:n}=s.options;n===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:r}=s;a.onExitComplete&&a.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pm(t,s,a){let r="";const n=t.x.translate/s.x,o=t.y.translate/s.y,i=(a==null?void 0:a.z)||0;if((n||o||i)&&(r=`translate3d(${n}px, ${o}px, ${i}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:c,rotate:u,rotateX:m,rotateY:x,skewX:h,skewY:S}=a;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),m&&(r+=`rotateX(${m}deg) `),x&&(r+=`rotateY(${x}deg) `),h&&(r+=`skewX(${h}deg) `),S&&(r+=`skewY(${S}deg) `)}const l=t.x.scale*s.x,d=t.y.scale*s.y;return(l!==1||d!==1)&&(r+=`scale(${l}, ${d})`),r||"none"}const Et={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ds=typeof window<"u"&&window.MotionDebug!==void 0,ba=["","X","Y","Z"],Dm={visibility:"hidden"},Gn=1e3;let Rm=0;function ja(t,s,a,r){const{latestValues:n}=s;n[t]&&(a[t]=n[t],s.setStaticValue(t,0),r&&(r[t]=0))}function Wo(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=Ji(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:n,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",be,!(n||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Wo(r)}function Go({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(i={},l=s==null?void 0:s()){this.id=Rm++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ds&&(Et.totalNodes=Et.resolvedTargetDeltas=Et.recalculatedProjection=0),this.nodes.forEach(Lm),this.nodes.forEach(Bm),this.nodes.forEach(Om),this.nodes.forEach(_m),ds&&window.MotionDebug.record(Et)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new ym)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Nr),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const d=this.eventHandlers.get(i);d&&d.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fm(i),this.instance=i;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),t){let m;const x=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=vm(x,250),Bs.hasAnimatedSinceResize&&(Bs.hasAnimatedSinceResize=!1,this.nodes.forEach(Zn))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:x,hasRelativeTargetChanged:h,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||Hm,{onLayoutAnimationStart:y,onLayoutAnimationComplete:j}=u.getProps(),M=!this.targetLayout||!Ho(this.targetLayout,S)||h,E=!x&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||x&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,E);const R={...pr(p,"layout"),onPlay:y,onComplete:j};(u.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else x||Zn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ct(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Um),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Wo(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qn);return}this.isUpdating||this.nodes.forEach(Vm),this.isUpdating=!1,this.nodes.forEach(Im),this.nodes.forEach(Mm),this.nodes.forEach(Em),this.clearAllSnapshots();const l=at.now();Ae.delta=dt(0,1e3/60,l-Ae.timestamp),Ae.timestamp=l,Ae.isProcessing=!0,ua.update.process(Ae),ua.preRender.process(Ae),ua.render.process(Ae),Ae.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,or.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fm),this.sharedNodes.forEach($m)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:d,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!n)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Ko(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;i&&(l||Mt(this.latestValues)||u)&&(n(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return i&&(d=this.removeTransform(d)),Wm(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:l}=this.options;if(!l)return Ce();const d=l.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(Gm))){const{scroll:u}=this.root;u&&(Wt(d.x,u.offset.x),Wt(d.y,u.offset.y))}return d}removeElementScroll(i){var l;const d=Ce();if(Be(d,i),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return d;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:m,options:x}=u;u!==this.root&&m&&x.layoutScroll&&(m.wasRoot&&Be(d,i),Wt(d.x,m.offset.x),Wt(d.y,m.offset.y))}return d}applyTransform(i,l=!1){const d=Ce();Be(d,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Gt(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Mt(u.latestValues)&&Gt(d,u.latestValues)}return Mt(this.latestValues)&&Gt(d,this.latestValues),d}removeTransform(i){const l=Ce();Be(l,i);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Mt(c.latestValues))continue;za(c.latestValues)&&c.updateSnapshot();const u=Ce(),m=c.measurePageBox();Be(u,m),Un(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Mt(this.latestValues)&&Un(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ae.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:x}=this.options;if(!(!this.layout||!(m||x))){if(this.resolvedRelativeTargetAt=Ae.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),fs(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Be(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Yh(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Be(this.target,this.layout.layoutBox),Io(this.target,this.targetDelta)):Be(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),fs(this.relativeTargetOrigin,this.target,h.target),Be(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ds&&Et.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||za(this.parent.latestValues)||Vo(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ae.timestamp&&(c=!1),c)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;Be(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,h=this.treeScale.y;nm(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ce());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(In(this.prevProjectionDelta.x,this.projectionDelta.x),In(this.prevProjectionDelta.y,this.projectionDelta.y)),xs(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==h||!Wn(this.projectionDelta.x,this.prevProjectionDelta.x)||!Wn(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),ds&&Et.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),i){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ht(),this.projectionDelta=Ht(),this.projectionDeltaWithTransform=Ht()}setAnimationOrigin(i,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},m=Ht();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=Ce(),h=d?d.source:void 0,S=this.layout?this.layout.source:void 0,p=h!==S,y=this.getStack(),j=!y||y.members.length<=1,M=!!(p&&!j&&this.options.crossfade===!0&&!this.path.some(Km));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const w=R/1e3;Yn(m.x,i.x,w),Yn(m.y,i.y,w),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fs(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zm(this.relativeTarget,this.relativeTargetOrigin,x,w),E&&Tm(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Ce()),Be(E,this.relativeTarget)),p&&(this.animationValues=u,jm(u,c,this.latestValues,w,M,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ct(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=be.update(()=>{Bs.hasAnimatedSinceResize=!0,this.currentAnimation=xm(0,Gn,{...i,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=i;if(!(!l||!d||!c)){if(this!==i&&this.layout&&c&&qo(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||Ce();const m=Ie(this.layout.layoutBox.x);d.x.min=i.target.x.min,d.x.max=d.x.min+m;const x=Ie(this.layout.layoutBox.y);d.y.min=i.target.y.min,d.y.max=d.y.min+x}Be(l,d),Gt(l,u),xs(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Am),this.sharedNodes.get(i).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:l}=this.options;return l?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:l}=this.options;return l?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:d}=i;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const c={};d.z&&ja("z",i,c,this.animationValues);for(let u=0;u<ba.length;u++)ja(`rotate${ba[u]}`,i,c,this.animationValues),ja(`skew${ba[u]}`,i,c,this.animationValues);i.render();for(const u in c)i.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);i.scheduleRender()}getProjectionStyles(i){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dm;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Vs(i==null?void 0:i.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Vs(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Mt(this.latestValues)&&(p.transform=u?u({},""):"none",this.hasProjected=!1),p}const x=m.animationValues||m.latestValues;this.applyTransformsToTarget(),c.transform=Pm(this.projectionDeltaWithTransform,this.treeScale,x),u&&(c.transform=u(x,c.transform));const{x:h,y:S}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${S.origin*100}% 0`,m.animationValues?c.opacity=m===this?(d=(l=x.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:c.opacity=m===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const p in zs){if(x[p]===void 0)continue;const{correct:y,applyTo:j}=zs[p],M=c.transform==="none"?x[p]:y(x[p],m);if(j){const E=j.length;for(let R=0;R<E;R++)c[j[R]]=M}else c[p]=M}return this.options.layoutId&&(c.pointerEvents=m===this?Vs(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(qn),this.root.sharedNodes.clear()}}}function Mm(t){t.updateLayout()}function Em(t){var s;const a=((s=t.resumeFrom)===null||s===void 0?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&a&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:o}=t.options,i=a.source!==t.layout.source;o==="size"?Oe(m=>{const x=i?a.measuredBox[m]:a.layoutBox[m],h=Ie(x);x.min=r[m].min,x.max=x.min+h}):qo(o,a.layoutBox,r)&&Oe(m=>{const x=i?a.measuredBox[m]:a.layoutBox[m],h=Ie(r[m]);x.max=x.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+h)});const l=Ht();xs(l,r,a.layoutBox);const d=Ht();i?xs(d,t.applyTransform(n,!0),a.measuredBox):xs(d,r,a.layoutBox);const c=!Ko(l);let u=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:x,layout:h}=m;if(x&&h){const S=Ce();fs(S,a.layoutBox,x.layoutBox);const p=Ce();fs(p,r,h.layoutBox),Ho(S,p)||(u=!0),m.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=S,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:a,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Lm(t){ds&&Et.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _m(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Fm(t){t.clearSnapshot()}function qn(t){t.clearMeasurements()}function Vm(t){t.isLayoutDirty=!1}function Im(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Zn(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Bm(t){t.resolveTargetDelta()}function Om(t){t.calcProjection()}function Um(t){t.resetSkewAndRotation()}function $m(t){t.removeLeadSnapshot()}function Yn(t,s,a){t.translate=Ne(s.translate,0,a),t.scale=Ne(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function Xn(t,s,a,r){t.min=Ne(s.min,a.min,r),t.max=Ne(s.max,a.max,r)}function zm(t,s,a,r){Xn(t.x,s.x,a.x,r),Xn(t.y,s.y,a.y,r)}function Km(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hm={duration:.45,ease:[.4,0,.1,1]},Qn=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Jn=Qn("applewebkit/")&&!Qn("chrome/")?Math.round:Ve;function ei(t){t.min=Jn(t.min),t.max=Jn(t.max)}function Wm(t){ei(t.x),ei(t.y)}function qo(t,s,a){return t==="position"||t==="preserve-aspect"&&!Zh(Hn(s),Hn(a),.2)}function Gm(t){var s;return t!==t.root&&((s=t.scroll)===null||s===void 0?void 0:s.wasRoot)}const qm=Go({attachResizeListener:(t,s)=>ws(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wa={current:void 0},Zo=Go({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!wa.current){const t=new qm({});t.mount(window),t.setOptions({layoutScroll:!0}),wa.current=t}return wa.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Zm={pan:{Feature:um},drag:{Feature:dm,ProjectionNode:Zo,MeasureLayout:Uo}};function ti(t,s,a){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",a==="Start");const n="onHover"+a,o=r[n];o&&be.postRender(()=>o(s,Cs(s)))}class Ym extends At{mount(){const{current:s}=this.node;s&&(this.unmount=Zd(s,a=>(ti(this.node,a,"Start"),r=>ti(this.node,r,"End"))))}unmount(){}}class Xm extends At{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ss(ws(this.node.current,"focus",()=>this.onFocus()),ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function si(t,s,a){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",a==="Start");const n="onTap"+(a==="End"?"":a),o=r[n];o&&be.postRender(()=>o(s,Cs(s)))}class Qm extends At{mount(){const{current:s}=this.node;s&&(this.unmount=Jd(s,a=>(si(this.node,a,"Start"),(r,{success:n})=>si(this.node,r,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ha=new WeakMap,Na=new WeakMap,Jm=t=>{const s=Ha.get(t.target);s&&s(t)},eg=t=>{t.forEach(Jm)};function tg({root:t,...s}){const a=t||document;Na.has(a)||Na.set(a,{});const r=Na.get(a),n=JSON.stringify(s);return r[n]||(r[n]=new IntersectionObserver(eg,{root:t,...s})),r[n]}function sg(t,s,a){const r=tg(s);return Ha.set(t,a),r.observe(t),()=>{Ha.delete(t),r.unobserve(t)}}const ag={some:0,all:1};class rg extends At{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:r,amount:n="some",once:o}=s,i={root:a?a.current:void 0,rootMargin:r,threshold:typeof n=="number"?n:ag[n]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),x=c?u:m;x&&x(d)};return sg(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(ng(s,a))&&this.startObserver()}unmount(){}}function ng({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const ig={inView:{Feature:rg},tap:{Feature:Qm},focus:{Feature:Xm},hover:{Feature:Ym}},og={layout:{ProjectionNode:Zo,MeasureLayout:Uo}},Wa={current:null},Yo={current:!1};function lg(){if(Yo.current=!0,!!sr)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>Wa.current=t.matches;t.addListener(s),s()}else Wa.current=!1}const cg=[...jo,De,Tt],dg=t=>cg.find(bo(t)),ai=new WeakMap;function ug(t,s,a){for(const r in s){const n=s[r],o=a[r];if(Re(n))t.addValue(r,n);else if(Re(o))t.addValue(r,bs(n,{owner:t}));else if(o!==n)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(n):i.hasAnimated||i.set(n)}else{const i=t.getStaticValue(r);t.addValue(r,bs(i!==void 0?i:n,{owner:t}))}}for(const r in a)s[r]===void 0&&t.removeValue(r);return s}const ri=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hg{scrapeMotionValuesFromProps(s,a,r){return{}}constructor({parent:s,props:a,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:o,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=at.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,be.render(this.render,!1,!0))};const{latestValues:d,renderState:c,onUpdate:u}=i;this.onUpdate=u,this.latestValues=d,this.baseTarget={...d},this.initialValues=a.initial?{...d}:{},this.renderState=c,this.parent=s,this.props=a,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=n,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=ea(a),this.isVariantNode=Ai(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:m,...x}=this.scrapeMotionValuesFromProps(a,{},this);for(const h in x){const S=x[h];d[h]!==void 0&&Re(S)&&S.set(d[h],!1)}}mount(s){this.current=s,ai.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,r)=>this.bindToMotionValue(r,a)),Yo.current||lg(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wa.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ai.delete(this.current),this.projection&&this.projection.unmount(),Ct(this.notifyUpdate),Ct(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=Ut.has(s),n=a.on("change",l=>{this.latestValues[s]=l,this.props.onUpdate&&be.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=a.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{n(),o(),i&&i(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Xt){const a=Xt[s];if(!a)continue;const{isEnabled:r,Feature:n}=a;if(!this.features[s]&&n&&r(this.props)&&(this.features[s]=new n(this)),this.features[s]){const o=this.features[s];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let r=0;r<ri.length;r++){const n=ri[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const o="on"+n,i=s[o];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=ug(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const r=this.values.get(s);a!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&a!==void 0&&(r=bs(a===null?void 0:a,{owner:this}),this.addValue(s,r)),r}readValue(s,a){var r;let n=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(r=this.getBaseTargetFromProps(this.props,s))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,s,this.options);return n!=null&&(typeof n=="string"&&(yo(n)||lo(n))?n=parseFloat(n):!dg(n)&&Tt.test(a)&&(n=xo(s,a)),this.setBaseTarget(s,Re(n)?n.get():n)),Re(n)?n.get():n}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){var a;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=cr(this.props,r,(a=this.presenceContext)===null||a===void 0?void 0:a.custom);i&&(n=i[s])}if(r&&n!==void 0)return n;const o=this.getBaseTargetFromProps(this.props,s);return o!==void 0&&!Re(o)?o:this.initialValues[s]!==void 0&&n===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new Nr),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}}class Xo extends hg{constructor(){super(...arguments),this.KeyframeResolver=wo}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:r}){delete a[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Re(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function mg(t){return window.getComputedStyle(t)}class gg extends Xo{constructor(){super(...arguments),this.type="html",this.renderInstance=Vi}readValueFromInstance(s,a){if(Ut.has(a)){const r=Ar(a);return r&&r.default||0}else{const r=mg(s),n=(Li(a)?r.getPropertyValue(a):r[a])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(s,{transformPagePoint:a}){return Bo(s,a)}build(s,a,r){hr(s,a,r.transformTemplate)}scrapeMotionValuesFromProps(s,a,r){return fr(s,a,r)}}class xg extends Xo{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ce}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(Ut.has(a)){const r=Ar(a);return r&&r.default||0}return a=Ii.has(a)?a:ir(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,r){return Ui(s,a,r)}build(s,a,r){mr(s,a,this.isSVGTag,r.transformTemplate)}renderInstance(s,a,r,n){Bi(s,a,r,n)}mount(s){this.isSVGTag=xr(s.tagName),super.mount(s)}}const fg=(t,s)=>lr(t)?new xg(s):new gg(s,{allowProjection:t!==g.Fragment}),pg=$d({...Oh,...ig,...Zm,...og},fg),ni=ad(pg),rt=g.forwardRef(({className:t,open:s,onClose:a,size:r="md",closeOnOverlayClick:n=!0,title:o,children:i},l)=>{const d={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-full mx-4"};g.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const c=()=>{n&&a()};return e.jsx(Zc,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(ni.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:c}),e.jsxs(ni.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:ce("relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full",d[r],t),onClick:u=>u.stopPropagation(),children:[o&&e.jsx(It,{onClose:a,children:e.jsx(Bt,{children:o})}),e.jsx("div",{className:ce(o&&"p-6"),children:i})]})]})})});rt.displayName="Modal";const It=g.forwardRef(({className:t,onClose:s,children:a,...r},n)=>e.jsxs("div",{ref:n,className:ce("flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",t),...r,children:[e.jsx("div",{className:"flex-1",children:a}),s&&e.jsx("button",{onClick:s,className:"ml-4 p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Pl,{className:"h-5 w-5"})})]}));It.displayName="ModalHeader";const Bt=g.forwardRef(({className:t,...s},a)=>e.jsx("h2",{ref:a,className:ce("text-xl font-semibold text-gray-900 dark:text-gray-100",t),...s}));Bt.displayName="ModalTitle";const Jt=g.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ce("p-6",t),...s}));Jt.displayName="ModalContent";const Ga=g.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:ce("flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",t),...s}));Ga.displayName="ModalFooter";const es=g.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"w-full overflow-auto rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("table",{ref:a,className:ce("w-full caption-bottom text-sm",t),...s})}));es.displayName="Table";const ts=g.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:ce("bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",t),...s}));ts.displayName="TableHeader";const ss=g.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:ce("divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900",t),...s}));ss.displayName="TableBody";const Ue=g.forwardRef(({className:t,hover:s=!0,...a},r)=>e.jsx("tr",{ref:r,className:ce("transition-colors",s&&"hover:bg-gray-50 dark:hover:bg-gray-800",t),...a}));Ue.displayName="TableRow";const ne=g.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:ce("px-6 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",t),...s}));ne.displayName="TableHead";const re=g.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:ce("px-6 py-4 text-gray-900 dark:text-gray-100",t),...s}));re.displayName="TableCell";function yg(){var v,_,P,$,G;const t=li(),[s,a]=g.useState(!1),[r,n]=g.useState(!1),[o,i]=g.useState([]),[l,d]=g.useState({network_range:"192.168.1.0/24",excluded_ips:"",use_ping:!0,use_snmp:!0}),[c,u]=g.useState({name:"",description:"",network_ranges:"",excluded_ips:"",use_ping:!0,use_snmp:!0,schedule_enabled:!1,schedule_cron:"0 */6 * * *",auto_import:!1}),{data:m,isLoading:x}=$e({queryKey:["discovery-rules"],queryFn:()=>is.getRules()}),{data:h,isLoading:S}=$e({queryKey:["discovery-results"],queryFn:()=>is.getResults()}),p=us({mutationFn:is.quickScan,onSuccess:()=>{Fe.success("Network scan started"),a(!1),t.invalidateQueries({queryKey:["discovery-results"]})},onError:()=>{Fe.error("Failed to start scan")}}),y=us({mutationFn:is.createRule,onSuccess:()=>{Fe.success("Discovery rule created"),n(!1),t.invalidateQueries({queryKey:["discovery-rules"]})},onError:()=>{Fe.error("Failed to create rule")}}),j=us({mutationFn:is.importDevices,onSuccess:()=>{Fe.success("Devices imported successfully"),i([]),t.invalidateQueries({queryKey:["devices"]})},onError:()=>{Fe.error("Failed to import devices")}}),M=()=>{const k=l.network_range.split(",").map(ae=>ae.trim()),I=l.excluded_ips?l.excluded_ips.split(",").map(ae=>ae.trim()):[];p.mutate({network_ranges:k,excluded_ips:I,use_ping:l.use_ping,use_snmp:l.use_snmp})},E=()=>{const k=c.network_ranges.split(",").map(ae=>ae.trim()),I=c.excluded_ips?c.excluded_ips.split(",").map(ae=>ae.trim()):[];y.mutate({...c,network_ranges:k.join(","),excluded_ips:I.join(",")})},R=()=>{if(o.length===0){Fe.error("Please select devices to import");return}j.mutate(o)},w=k=>{i(I=>I.includes(k)?I.filter(ae=>ae!==k):[...I,k])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Network Discovery"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Scan and discover devices on your network"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(z,{variant:"outline",icon:e.jsx(qa,{className:"h-5 w-5"}),onClick:()=>n(!0),children:"Create Rule"}),e.jsx(z,{icon:e.jsx(Dl,{className:"h-5 w-5"}),onClick:()=>a(!0),children:"Quick Scan"})]})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Discovery Rules"})}),e.jsx(U,{children:x?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(k=>e.jsx(tt,{variant:"rect"},k))}):((v=m==null?void 0:m.data)==null?void 0:v.length)===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(di,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No discovery rules"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 mb-4",children:"Create a rule to automate network scanning"}),e.jsx(z,{onClick:()=>n(!0),children:"Create First Rule"})]}):e.jsx("div",{className:"space-y-3",children:(_=m==null?void 0:m.data)==null?void 0:_.map(k=>{var I;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-ward-green transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:k.name}),e.jsx(ee,{variant:k.enabled?"success":"default",dot:!0,children:k.enabled?"Active":"Disabled"}),k.schedule_enabled&&e.jsxs(ee,{variant:"info",children:[e.jsx(qt,{className:"h-3 w-3"}),"Scheduled"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:k.description||"No description"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Networks: ",(I=k.network_ranges)==null?void 0:I.join(", ")]}),k.schedule_cron&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Schedule: ",k.schedule_cron]})]})]}),e.jsx(z,{variant:"ghost",size:"sm",children:"Run Now"})]},k.id)})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(se,{children:"Discovery Results"}),o.length>0&&e.jsxs(z,{size:"sm",icon:e.jsx(fi,{className:"h-4 w-4"}),onClick:R,loading:j.isPending,children:["Import Selected (",o.length,")"]})]})}),e.jsx(U,{children:S?e.jsx(ct,{size:"lg",text:"Loading results..."}):((P=h==null?void 0:h.data)==null?void 0:P.length)===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No results yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 mb-4",children:"Start a scan to discover devices"}),e.jsx(z,{onClick:()=>a(!0),children:"Start Quick Scan"})]}):e.jsxs(es,{children:[e.jsx(ts,{children:e.jsxs(Ue,{children:[e.jsx(ne,{children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-ward-green focus:ring-ward-green",checked:o.length===(($=h==null?void 0:h.data)==null?void 0:$.length),onChange:k=>{var I;k.target.checked?i(((I=h==null?void 0:h.data)==null?void 0:I.map(ae=>ae.id))||[]):i([])}})}),e.jsx(ne,{children:"IP Address"}),e.jsx(ne,{children:"Hostname"}),e.jsx(ne,{children:"Vendor"}),e.jsx(ne,{children:"Type"}),e.jsx(ne,{children:"Status"}),e.jsx(ne,{children:"Discovered"}),e.jsx(ne,{children:"Actions"})]})}),e.jsx(ss,{children:(G=h==null?void 0:h.data)==null?void 0:G.map(k=>e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-ward-green focus:ring-ward-green",checked:o.includes(k.id),onChange:()=>w(k.id)})}),e.jsx(re,{className:"font-mono text-gray-900 dark:text-gray-100",children:k.ip}),e.jsx(re,{className:"text-gray-900 dark:text-gray-100",children:k.hostname||"-"}),e.jsx(re,{className:"text-gray-900 dark:text-gray-100",children:k.vendor||"-"}),e.jsx(re,{className:"text-gray-900 dark:text-gray-100",children:k.device_type||"-"}),e.jsx(re,{children:e.jsx(ee,{variant:k.responsive?"success":"danger",dot:!0,children:k.responsive?"Responsive":"Unresponsive"})}),e.jsx(re,{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(k.discovered_at).toLocaleString()}),e.jsx(re,{children:e.jsx(z,{size:"sm",variant:"ghost",onClick:()=>j.mutate([k.id]),children:"Import"})})]},k.id))})]})})]}),e.jsxs(rt,{open:s,onClose:()=>a(!1),size:"lg",children:[e.jsx(It,{onClose:()=>a(!1),children:e.jsx(Bt,{children:"Quick Network Scan"})}),e.jsx(Jt,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{label:"Network Range (CIDR)",placeholder:"192.168.1.0/24, 10.0.0.0/24",value:l.network_range,onChange:k=>d({...l,network_range:k.target.value}),helperText:"Comma-separated list of CIDR ranges"}),e.jsx(X,{label:"Excluded IPs (Optional)",placeholder:"192.168.1.1, 192.168.1.254",value:l.excluded_ips,onChange:k=>d({...l,excluded_ips:k.target.value}),helperText:"IPs to skip during scan"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.use_ping,onChange:k=>d({...l,use_ping:k.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Use ICMP Ping"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.use_snmp,onChange:k=>d({...l,use_snmp:k.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Use SNMP Discovery"})]})]})]})}),e.jsxs(Ga,{children:[e.jsx(z,{variant:"ghost",onClick:()=>a(!1),children:"Cancel"}),e.jsx(z,{onClick:M,loading:p.isPending,children:"Start Scan"})]})]}),e.jsxs(rt,{open:r,onClose:()=>n(!1),size:"lg",children:[e.jsx(It,{onClose:()=>n(!1),children:e.jsx(Bt,{children:"Create Discovery Rule"})}),e.jsx(Jt,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{label:"Rule Name",placeholder:"Office Network Scan",value:c.name,onChange:k=>u({...c,name:k.target.value})}),e.jsx(X,{label:"Description (Optional)",placeholder:"Scans office network every 6 hours",value:c.description,onChange:k=>u({...c,description:k.target.value})}),e.jsx(X,{label:"Network Ranges (CIDR)",placeholder:"192.168.1.0/24, 10.0.0.0/24",value:c.network_ranges,onChange:k=>u({...c,network_ranges:k.target.value}),helperText:"Comma-separated list"}),e.jsx(X,{label:"Excluded IPs (Optional)",placeholder:"192.168.1.1, 192.168.1.254",value:c.excluded_ips,onChange:k=>u({...c,excluded_ips:k.target.value})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.schedule_enabled,onChange:k=>u({...c,schedule_enabled:k.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable Scheduled Scanning"})]}),c.schedule_enabled&&e.jsx(X,{label:"Cron Schedule",placeholder:"0 */6 * * *",value:c.schedule_cron,onChange:k=>u({...c,schedule_cron:k.target.value}),helperText:"Cron expression (e.g., 0 */6 * * * = every 6 hours)"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.auto_import,onChange:k=>u({...c,auto_import:k.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Auto-import discovered devices"})]})]})]})}),e.jsxs(Ga,{children:[e.jsx(z,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),e.jsx(z,{onClick:E,loading:y.isPending,children:"Create Rule"})]})]})]})}const vg=t=>({Paybox:"ð³",ATM:"ð§",NVR:"ð¹","Access Point":"ð¡",Switch:"ð",Router:"ð","Core Router":"ð¥ï¸",Biostar:"ð","Disaster Recovery":"ð¡ï¸"})[t]||"ð¦",bg=t=>["Not classified","Information","Warning","Average","High","Disaster"][t]||"Unknown",jg=t=>t>=4?"danger":t===3||t===2?"warning":"default",wg=t=>{const s=Math.floor(t/1e3),a=Math.floor(s/60),r=Math.floor(a/60),n=Math.floor(r/24);return n>0?`${n}d ${r%24}h`:r>0?`${r}h ${a%60}m`:a>0?`${a}m`:`${s}s`},Ng=t=>{const s=[],a=Date.now(),r=24;for(let n=r;n>=0;n--){const o=a-n*60*60*1e3,i=new Date(o).getHours();let l=1,d=5+Math.random()*15;!t&&n<2||Math.random()<.05?(l=0,d=0):i>=2&&i<=5&&(d=3+Math.random()*8),s.push({time:new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),status:l,responseTime:l===1?d:0})}return s};function Qo({open:t,onClose:s,hostid:a,onOpenSSH:r}){var j,M,E;const[n,o]=g.useState(!1),{data:i,isLoading:l,refetch:d}=$e({queryKey:["device",a],queryFn:()=>Ee.getById(a),enabled:t&&!!a});g.useEffect(()=>{t&&a&&d()},[t,a,d]);const c=i==null?void 0:i.data,u=(c==null?void 0:c.ping_status)==="Up"||(c==null?void 0:c.available)==="Available",m=(c==null?void 0:c.ping_status)||(c==null?void 0:c.available)||"Unknown",x=g.useMemo(()=>c?Ng(u):[],[c,u]),h=()=>{c!=null&&c.ip&&(navigator.clipboard.writeText(c.ip),o(!0),setTimeout(()=>o(!1),2e3))},S=()=>{c!=null&&c.ip&&window.open(`http://${c.ip}`,"_blank")},p=()=>{d()},y=()=>{c&&r&&(r(c.display_name,c.ip),s())};return e.jsxs(rt,{open:t,onClose:s,size:"xl",children:[e.jsx(It,{onClose:s,children:e.jsxs(Bt,{className:"flex items-center gap-2",children:[c&&e.jsx("span",{className:"text-2xl",children:vg(c.device_type)}),(c==null?void 0:c.display_name)||"Device Details"]})}),e.jsx(Jt,{className:"max-h-[80vh] overflow-y-auto",children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx(tt,{variant:"card"}),e.jsx(tt,{variant:"card"}),e.jsx(tt,{variant:"card"})]}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-xl p-6 ${u?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800":"bg-gradient-to-r from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border border-red-200 dark:border-red-800"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-full ${u?"bg-green-100 dark:bg-green-900/40":"bg-red-100 dark:bg-red-900/40"}`,children:u?e.jsx(yt,{className:"h-8 w-8 text-green-600 dark:text-green-400"}):e.jsx(Zs,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-xl font-semibold ${u?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:m}),e.jsx("p",{className:`mt-1 ${u?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:u?"Device is responding normally":"Device is not responding"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[r&&e.jsxs(z,{onClick:y,variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3 bg-ward-green/10 hover:bg-ward-green/20 border-ward-green text-ward-green",children:[e.jsx(St,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"SSH"})]}),e.jsxs(z,{onClick:S,variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3",children:[e.jsx(Ys,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Web UI"})]}),e.jsxs(z,{onClick:h,variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3",children:[e.jsx(Rl,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:n?"Copied!":"Copy IP"})]}),e.jsxs(z,{onClick:p,variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3",children:[e.jsx(Ya,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Refresh"})]}),e.jsxs(z,{onClick:()=>window.location.href=`/devices?branch=${c.branch}`,variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3",children:[e.jsx(Ft,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Branch"})]}),(((j=c.device_type)==null?void 0:j.toLowerCase().includes("router"))||((M=c.device_type)==null?void 0:M.toLowerCase().includes("switch")))&&e.jsxs(z,{onClick:()=>{window.location.href=`/topology?deviceId=${c.hostid}&deviceName=${encodeURIComponent(c.display_name)}`},variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3",children:[e.jsx(et,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Topology"})]}),e.jsxs(z,{variant:"outline",className:"flex flex-col items-center gap-2 h-auto py-3",children:[e.jsx(Xa,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Maintain"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(kt,{className:"h-5 w-5 text-ward-green"}),"Status History (Last 24 Hours)"]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Availability Timeline"}),e.jsx(vt,{width:"100%",height:180,children:e.jsxs(Aa,{data:x,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"statusGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})}),e.jsx(bt,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(jt,{dataKey:"time",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:11},tickFormatter:(R,w)=>w%4!==0?"":R}),e.jsx(wt,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:11},domain:[0,1],ticks:[0,1],tickFormatter:R=>R===1?"Up":"Down"}),e.jsx(Nt,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f3f4f6",fontSize:"12px"},formatter:R=>[R===1?"Online":"Offline","Status"]}),e.jsx(Pa,{type:"stepAfter",dataKey:"status",stroke:"#10b981",strokeWidth:2,fill:"url(#statusGradient)"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Response Time (ms)"}),e.jsx(vt,{width:"100%",height:180,children:e.jsxs(Aa,{data:x,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"responseGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#5EBBA8",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#5EBBA8",stopOpacity:.1})]})}),e.jsx(bt,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(jt,{dataKey:"time",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:11},tickFormatter:(R,w)=>w%4!==0?"":R}),e.jsx(wt,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:11}}),e.jsx(Nt,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f3f4f6",fontSize:"12px"},formatter:R=>[`${R.toFixed(2)} ms`,"Response Time"]}),e.jsx(Pa,{type:"monotone",dataKey:"responseTime",stroke:"#5EBBA8",strokeWidth:2,fill:"url(#responseGradient)"})]})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(pi,{className:"h-5 w-5 text-ward-green"}),"Device Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ft,{label:"Branch Location",value:c.branch}),e.jsx(ft,{label:"Region",value:c.region}),e.jsx(ft,{label:"IP Address",value:c.ip}),e.jsx(ft,{label:"Device Type",value:c.device_type}),e.jsx(ft,{label:"Hostname",value:c.hostname}),e.jsx(ft,{label:"Status",value:c.status}),e.jsx(ft,{label:"Host Groups",value:((E=c.groups)==null?void 0:E.join(", "))||"None"}),e.jsx(ft,{label:"Available",value:c.available})]})]}),c.triggers&&c.triggers.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx(ze,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),"Active Problems (",c.triggers.length,")"]}),e.jsx("div",{className:"space-y-3",children:c.triggers.map((R,w)=>{const v=parseInt(R.lastchange)*1e3,_=wg(Date.now()-v);return e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow bg-white dark:bg-gray-800",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(ee,{variant:jg(parseInt(R.priority)),children:bg(parseInt(R.priority))})}),e.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:R.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qt,{className:"h-4 w-4"}),new Date(v).toLocaleString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(kt,{className:"h-4 w-4"}),_]})]})]})})},w)})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-medium",children:"Failed to load device information"})]})})]})}function ft({label:t,value:s}){return e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s})]})}function Jo({open:t,onClose:s,deviceName:a,deviceIP:r}){const[n,o]=g.useState("admin"),[i,l]=g.useState(""),[d,c]=g.useState(null),[u,m]=g.useState(null),[x,h]=g.useState(!1),[S,p]=g.useState(!1),y=async()=>{var E,R;if(!i){m("Please enter a password");return}h(!0),m(null),c(null);try{const w=await oc.connect({host:r,username:n,password:i,port:22});w.data.success?(p(!0),c(w.data.output||"Connection established. SSH terminal access via CLI is recommended for full interactive experience.")):m(w.data.error||"Failed to connect")}catch(w){const v=((R=(E=w.response)==null?void 0:E.data)==null?void 0:R.error)||w.message||"Failed to connect. Please check credentials and network connectivity.";m(v)}finally{h(!1)}},j=E=>{E.key==="Enter"&&!x&&y()},M=()=>{o("admin"),l(""),c(null),m(null),p(!1),h(!1),s()};return e.jsxs(rt,{open:t,onClose:M,size:"lg",children:[e.jsx(It,{onClose:M,children:e.jsxs(Bt,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-6 w-6 text-ward-green"}),"SSH Terminal - ",a," (",r,")"]})}),e.jsxs(Jt,{className:"p-0",children:[e.jsxs("div",{className:"h-96 bg-gray-900 text-green-400 font-mono text-sm overflow-y-auto p-4",children:[!d&&!u&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(St,{className:"h-16 w-16 mb-4"}),e.jsx("p",{children:"Enter credentials below and click Connect to access the device terminal"})]}),d&&e.jsx("pre",{className:"whitespace-pre-wrap",children:`Connected to ${r}

${d}

To use full SSH terminal features, use your preferred SSH client:
ssh ${n}@${r}
`}),u&&e.jsxs("div",{className:"flex items-start gap-3 text-red-400",children:[e.jsx(ze,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Connection Failed"}),e.jsx("p",{className:"mt-1",children:u})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 border-t border-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{type:"text",placeholder:"Username (default: admin)",value:n,onChange:E=>o(E.target.value),disabled:x||S,className:"flex-1"}),e.jsx(X,{type:"password",placeholder:"Password",value:i,onChange:E=>l(E.target.value),onKeyPress:j,disabled:x||S,className:"flex-1"}),e.jsx(z,{onClick:y,disabled:x||S,className:"bg-ward-green hover:bg-ward-green/90",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Connecting..."]}):S?e.jsxs(e.Fragment,{children:[e.jsx(_r,{className:"h-4 w-4 mr-2"}),"Connected"]}):e.jsxs(e.Fragment,{children:[e.jsx(_r,{className:"h-4 w-4 mr-2"}),"Connect"]})})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[e.jsx(ze,{className:"h-3 w-3 inline mr-1"}),"Enter credentials and click Connect to access the device terminal"]})]})]})]})}function kg(){var nt,Ts;const[t,s]=ml(),[a,r]=g.useState(()=>{const C=localStorage.getItem("devices-view-mode");return C==="grid"||C==="list"?C:"grid"}),[n,o]=g.useState(t.get("search")||""),[i,l]=g.useState(t.get("status")||""),[d,c]=g.useState(t.get("type")||""),[u,m]=g.useState(t.get("region")||""),[x,h]=g.useState(null),[S,p]=g.useState(!1),[y,j]=g.useState(""),[M,E]=g.useState(""),[R,w]=g.useState(!1),[v,_]=g.useState(null),[P,$]=g.useState({region:"",branch:""}),[G,k]=g.useState(!1),[I,ae]=g.useState(!1),[pe,ve]=g.useState(1),[he,N]=g.useState("zabbix"),[A,F]=g.useState({hostname:"",ip:"",region:"",branch:"",snmp_community:"",snmp_version:"2c"}),[K,ye]=g.useState(!1),[J,oe]=g.useState([]),[le,we]=g.useState([]),[T,L]=g.useState([]),[f,D]=g.useState([]),[V,W]=g.useState(!1),Q=C=>{if(!C)return"";const xe=C.split(" ")[0].split("-"),$t=["PING","TEST","PROD","DEV","SW","RTR"];let He="";return xe.length>1&&$t.includes(xe[0].toUpperCase())?He=xe[1]:He=xe[0],He=He.split("").filter(Je=>isNaN(parseInt(Je))).join(""),He.trim()},{data:H,isLoading:de}=$e({queryKey:["devices"],queryFn:()=>Ee.getAll()});g.useEffect(()=>{localStorage.setItem("devices-view-mode",a)},[a]),g.useEffect(()=>{he==="zabbix"&&I&&ie()},[he,I]),g.useEffect(()=>{if(A.hostname&&!A.branch){const C=Q(A.hostname);C&&F(ge=>({...ge,branch:C}))}},[A.hostname]);const ie=async()=>{W(!0);try{const[C,ge]=await Promise.all([da.getGroups(),da.getTemplates()]);oe(C.data||[]),we(ge.data||[])}catch(C){console.error("Failed to fetch Zabbix groups/templates:",C),alert("Failed to load Zabbix groups and templates")}finally{W(!1)}},{regions:ue,deviceTypes:ke}=g.useMemo(()=>{if(!(H!=null&&H.data))return{regions:[],deviceTypes:[]};const C=new Set,ge=new Set;return H.data.forEach(xe=>{xe.region&&C.add(xe.region),xe.device_type&&ge.add(xe.device_type)}),{regions:Array.from(C).sort(),deviceTypes:Array.from(ge).sort()}},[H]),b=g.useMemo(()=>H!=null&&H.data?H.data.filter(C=>{const ge=C.display_name||C.hostname||"",xe=C.ip||"",$t=C.branch||"",He=!n||ge.toLowerCase().includes(n.toLowerCase())||xe.toLowerCase().includes(n.toLowerCase())||$t.toLowerCase().includes(n.toLowerCase()),Je=!i||C.ping_status===i,As=!d||C.device_type===d,ht=!u||C.region===u;return He&&Je&&As&&ht}):[],[H,n,i,d,u]),me=C=>{h(C)},Ke=(C,ge)=>{j(C),E(ge),p(!0)},Xe=C=>{_(C),$({region:C.region||"",branch:C.branch||""}),w(!0)},ut=async()=>{if(v){k(!0);try{await Ee.updateDevice(v.hostid,{region:P.region,branch:P.branch}),alert("Device updated successfully!"),w(!1),_(null),window.location.reload()}catch(C){console.error("Failed to update device:",C),alert("Failed to update device")}finally{k(!1)}}},Qe=()=>{o(""),l(""),c(""),m(""),s({})},aa=async()=>{var C;if(!A.hostname||!A.ip){alert("Please fill in all required fields");return}if(he==="zabbix"){if(T.length===0){alert("Please select at least one host group");return}if(f.length===0){alert("Please select at least one template");return}}ye(!0);try{if(he==="standalone")await Ee.createStandalone({name:A.hostname,ip:A.ip,hostname:A.hostname,location:A.region,custom_fields:{branch:A.branch,snmp_community:A.snmp_community,snmp_version:A.snmp_version}}),alert("Device added successfully to Standalone!");else{const ge=await da.createHost({hostname:A.hostname,visible_name:A.hostname,ip_address:A.ip,group_ids:T,template_ids:f});if((C=ge.data)!=null&&C.hostid&&(A.region||A.branch))try{await Ee.updateDevice(ge.data.hostid,{region:A.region,branch:A.branch})}catch(xe){console.error("Failed to update inventory:",xe)}alert("Device added successfully to Zabbix!")}ae(!1),ve(1),F({hostname:"",ip:"",region:"",branch:"",snmp_community:"",snmp_version:"2c"}),L([]),D([]),window.location.reload()}catch(ge){console.error("Failed to add device:",ge),alert("Failed to add device. Please check the form and try again.")}finally{ye(!1)}},ra=()=>{ae(!1),ve(1),N("zabbix"),F({hostname:"",ip:"",region:"",branch:"",snmp_community:"",snmp_version:"2c"}),L([]),D([])},Pe=n||i||d||u;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Devices"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Zabbix monitored devices (",b.length,b.length!==((nt=H==null?void 0:H.data)==null?void 0:nt.length)&&` of ${(Ts=H==null?void 0:H.data)==null?void 0:Ts.length}`," total)"]})]}),e.jsxs(z,{onClick:()=>ae(!0),children:[e.jsx(yi,{className:"h-4 w-4 mr-2"}),"Add Device"]})]}),e.jsx(O,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(X,{placeholder:"Search devices by name, IP, or branch...",value:n,onChange:C=>o(C.target.value),icon:e.jsx(Ot,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex items-center gap-2 border border-gray-200 dark:border-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>r("grid"),className:`p-2 rounded transition-colors ${a==="grid"?"bg-ward-green text-white":"text-gray-600 dark:text-gray-400 hover:text-ward-green"}`,title:"Grid View",children:e.jsx(Ml,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>r("list"),className:`p-2 rounded transition-colors ${a==="list"?"bg-ward-green text-white":"text-gray-600 dark:text-gray-400 hover:text-ward-green"}`,title:"Table View",children:e.jsx(vi,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx(Te,{value:i,onChange:C=>l(C.target.value),options:[{value:"",label:"All Status"},{value:"Up",label:"Online"},{value:"Down",label:"Offline"},{value:"Unknown",label:"Unknown"}]}),e.jsx(Te,{value:d,onChange:C=>c(C.target.value),options:[{value:"",label:"All Types"},...ke.map(C=>({value:C,label:C}))]}),e.jsx(Te,{value:u,onChange:C=>m(C.target.value),options:[{value:"",label:"All Regions"},...ue.map(C=>({value:C,label:C}))]}),Pe&&e.jsx(z,{variant:"outline",onClick:Qe,className:"w-full",children:"Clear Filters"})]})]})})}),de?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(C=>e.jsx(tt,{variant:"card"},C))}):b.length===0?e.jsx(O,{children:e.jsx(U,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No devices found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 mb-4",children:Pe?"Try adjusting your filters":"No devices available from Zabbix"}),Pe&&e.jsx(z,{onClick:Qe,variant:"outline",children:"Clear Filters"})]})})}):a==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(C=>{const ge=C.ping_status==="Up"||C.available==="Available";return e.jsxs(O,{hover:!0,children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-ward-green/10 rounded-lg",children:e.jsx(_e,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{className:"text-base",children:C.display_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mt-1",children:C.ip})]})]}),e.jsx(ee,{variant:ge?"success":"danger",dot:!0,children:C.ping_status||"Unknown"})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Branch:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:C.branch||"-"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:C.device_type||"-"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Region:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:C.region||"-"})]}),C.problems>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Problems:"}),e.jsx(ee,{variant:"danger",children:C.problems})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>me(C.hostid),children:[e.jsx(Zt,{className:"h-4 w-4"}),"View"]}),e.jsx(z,{variant:"outline",size:"sm",onClick:xe=>{xe.stopPropagation(),Xe(C)},title:"Edit Device",children:e.jsx(Fr,{className:"h-4 w-4"})}),e.jsx(z,{variant:"outline",size:"sm",className:"bg-ward-green/10 hover:bg-ward-green/20 border-ward-green text-ward-green",onClick:xe=>{xe.stopPropagation(),Ke(C.display_name,C.ip)},title:"SSH Access",children:e.jsx(St,{className:"h-4 w-4"})})]})]})]},C.hostid)})}):e.jsx(O,{children:e.jsx(U,{className:"p-0",children:e.jsxs(es,{children:[e.jsx(ts,{children:e.jsxs(Ue,{children:[e.jsx(ne,{children:"Status"}),e.jsx(ne,{children:"Name"}),e.jsx(ne,{children:"Branch"}),e.jsx(ne,{children:"IP Address"}),e.jsx(ne,{children:"Type"}),e.jsx(ne,{children:"Region"}),e.jsx(ne,{children:"Problems"}),e.jsx(ne,{children:"Actions"})]})}),e.jsx(ss,{children:b.map(C=>{const ge=C.ping_status==="Up"||C.available==="Available";return e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsx(ee,{variant:ge?"success":"danger",dot:!0,children:C.ping_status||"Unknown"})}),e.jsx(re,{className:"font-medium text-gray-900 dark:text-gray-100",children:C.display_name}),e.jsx(re,{className:"text-gray-700 dark:text-gray-300",children:C.branch}),e.jsx(re,{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:C.ip}),e.jsx(re,{className:"text-gray-700 dark:text-gray-300",children:C.device_type||"-"}),e.jsx(re,{className:"text-gray-700 dark:text-gray-300",children:C.region||"-"}),e.jsx(re,{children:C.problems>0?e.jsx(ee,{variant:"danger",children:C.problems}):e.jsx("span",{className:"text-green-600",children:"-"})}),e.jsx(re,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:"ghost",size:"sm",onClick:xe=>{xe.stopPropagation(),me(C.hostid)},title:"View Details",children:e.jsx(Zt,{className:"h-4 w-4"})}),e.jsx(z,{variant:"ghost",size:"sm",onClick:xe=>{xe.stopPropagation(),Xe(C)},title:"Edit Device",children:e.jsx(Fr,{className:"h-4 w-4"})}),e.jsx(z,{variant:"ghost",size:"sm",onClick:xe=>{xe.stopPropagation(),Ke(C.display_name,C.ip)},className:"text-ward-green hover:text-ward-green/80",title:"SSH Access",children:e.jsx(St,{className:"h-4 w-4"})})]})})]},C.hostid)})})]})})}),x&&e.jsx(Qo,{open:!!x,onClose:()=>h(null),hostid:x,onOpenSSH:Ke}),e.jsx(Jo,{open:S,onClose:()=>p(!1),deviceName:y,deviceIP:M}),e.jsx(rt,{open:R,onClose:()=>{w(!1),_(null)},title:"Edit Device",size:"md",children:v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Device Name"}),e.jsx(X,{value:v.display_name,disabled:!0,className:"bg-gray-50 dark:bg-gray-900"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Read-only"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"IP Address"}),e.jsx(X,{value:v.ip,disabled:!0,className:"bg-gray-50 dark:bg-gray-900 font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Read-only"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Region"}),e.jsxs("select",{value:P.region,onChange:C=>$({...P,region:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-ward-green",children:[e.jsx("option",{value:"",children:"Select Region"}),ue.map(C=>e.jsx("option",{value:C,children:C},C))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Assign device to a region"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Branch (City)"}),e.jsx(X,{value:P.branch,onChange:C=>$({...P,branch:C.target.value}),placeholder:"Enter branch/city name"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Branch or city where the device is located"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(z,{onClick:ut,disabled:G,className:"flex-1",children:G?"Saving...":"Save Changes"}),e.jsx(z,{variant:"outline",onClick:()=>{w(!1),_(null)},disabled:G,className:"flex-1",children:"Cancel"})]})]})}),e.jsx(rt,{open:I,onClose:ra,title:"Add New Device",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[pe===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Choose where to add this device:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${he==="zabbix"?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx("input",{type:"radio",name:"device-source",value:"zabbix",checked:he==="zabbix",onChange:C=>N(C.target.value),className:"mt-1 w-5 h-5 text-ward-green focus:ring-ward-green"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Add to Zabbix"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Full monitoring with Zabbix integration"})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${he==="standalone"?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx("input",{type:"radio",name:"device-source",value:"standalone",checked:he==="standalone",onChange:C=>N(C.target.value),className:"mt-1 w-5 h-5 text-ward-green focus:ring-ward-green"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Add to Standalone"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Independent device management without Zabbix"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(z,{onClick:()=>ve(2),children:"Next"})})]}),pe===2&&e.jsxs("div",{className:"flex flex-col",style:{maxHeight:"calc(90vh - 200px)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Adding to: ",e.jsx("span",{className:"font-medium text-ward-green",children:he==="zabbix"?"Zabbix":"Standalone"})]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>ve(1),children:"Change"})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 pr-2 space-y-4",children:[e.jsx(X,{label:"Hostname",value:A.hostname,onChange:C=>F({...A,hostname:C.target.value}),placeholder:"Enter device hostname",required:!0}),e.jsx(X,{label:"IP Address",value:A.ip,onChange:C=>F({...A,ip:C.target.value}),placeholder:"192.168.1.1",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Region"}),e.jsxs("select",{value:A.region,onChange:C=>F({...A,region:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-ward-green",children:[e.jsx("option",{value:"",children:"Select Region"}),ue.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{children:[e.jsx(X,{label:"Branch (City)",value:A.branch,onChange:C=>F({...A,branch:C.target.value}),placeholder:"Enter branch/city name"}),A.hostname&&A.branch&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-extracted from hostname"})]}),e.jsx(X,{label:"SNMP Community",value:A.snmp_community,onChange:C=>F({...A,snmp_community:C.target.value}),placeholder:"public"}),he==="standalone"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"SNMP Version"}),e.jsxs("select",{value:A.snmp_version,onChange:C=>F({...A,snmp_version:C.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-ward-green",children:[e.jsx("option",{value:"1",children:"SNMPv1"}),e.jsx("option",{value:"2c",children:"SNMPv2c"}),e.jsx("option",{value:"3",children:"SNMPv3"})]})]}),he==="zabbix"&&e.jsx(e.Fragment,{children:V?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading groups and templates..."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Host Groups ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-800",children:J.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No groups available"}):e.jsx("div",{className:"space-y-2",children:J.map(C=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:T.includes(C.groupid),onChange:ge=>{ge.target.checked?L([...T,C.groupid]):L(T.filter(xe=>xe!==C.groupid))},className:"w-4 h-4 text-ward-green focus:ring-ward-green rounded"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:C.name})]},C.groupid))})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Selected: ",T.length," group(s)"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Templates ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-800",children:le.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No templates available"}):e.jsx("div",{className:"space-y-2",children:le.map(C=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:f.includes(C.templateid),onChange:ge=>{ge.target.checked?D([...f,C.templateid]):D(f.filter(xe=>xe!==C.templateid))},className:"w-4 h-4 text-ward-green focus:ring-ward-green rounded"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:C.name})]},C.templateid))})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Selected: ",f.length," template(s)"]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:[e.jsx(z,{variant:"outline",onClick:()=>ve(1),className:"flex-1",disabled:K,children:"Back"}),e.jsx(z,{onClick:aa,disabled:K,className:"flex-1",children:K?"Adding...":"Add Device"})]})]})]})})]})}function Sg(){const{id:t}=gl(),[s,a]=g.useState("overview"),{data:r,isLoading:n}=$e({queryKey:["device",t],queryFn:()=>Ee.getById(t),enabled:!!t}),o=[{time:"00:00",cpu:45,memory:62,bandwidth:340},{time:"04:00",cpu:38,memory:58,bandwidth:280},{time:"08:00",cpu:65,memory:72,bandwidth:520},{time:"12:00",cpu:72,memory:78,bandwidth:680},{time:"16:00",cpu:68,memory:75,bandwidth:590},{time:"20:00",cpu:52,memory:65,bandwidth:420}],i=[{id:"overview",label:"Overview",icon:pi},{id:"metrics",label:"Metrics",icon:kt},{id:"config",label:"Configuration",icon:qa},{id:"alerts",label:"Alerts",icon:ze}];if(n)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(ct,{size:"lg",text:"Loading device details..."})});if(!(r!=null&&r.data))return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Device not found"}),e.jsx(Ca,{to:"/devices",className:"text-ward-green hover:text-ward-green-dark mt-2 inline-block",children:"â Back to devices"})]});const l=r.data;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ca,{to:"/devices",className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(El,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:l.name}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 font-mono",children:l.ip})]})]}),e.jsx(ee,{variant:l.enabled?"success":"danger",size:"lg",dot:!0,children:l.enabled?"Active":"Inactive"})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex gap-8",children:i.map(d=>e.jsxs("button",{onClick:()=>a(d.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s===d.id?"border-ward-green text-ward-green":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(d.icon,{className:"h-5 w-5"}),d.label]},d.id))})}),s==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Device Information"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.name})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"IP Address"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 font-mono",children:l.ip})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Vendor"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.vendor||"-"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Device Type"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.device_type||"-"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Model"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.model||"-"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx(ee,{variant:l.enabled?"success":"danger",dot:!0,children:l.enabled?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Created At"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:l.created_at?new Date(l.created_at).toLocaleString():"N/A"})]})]})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Quick Stats"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(kt,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Uptime"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:"99.9%"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Response Time"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:"12ms"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Bandwidth"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:"450 Mbps"})]}),e.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ze,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-orange-900 dark:text-orange-100",children:"Alerts"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:"0"})]})]})})]})]}),s==="metrics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"CPU Usage (%)"})}),e.jsx(U,{children:e.jsx(vt,{width:"100%",height:300,children:e.jsxs(oa,{data:o,children:[e.jsx(bt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:stroke-gray-700"}),e.jsx(jt,{dataKey:"time",stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(wt,{stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(Nt,{contentStyle:{backgroundColor:"rgb(31 41 55)",border:"1px solid rgb(75 85 99)",borderRadius:"8px",color:"rgb(243 244 246)"},labelStyle:{color:"rgb(243 244 246)"}}),e.jsx(la,{type:"monotone",dataKey:"cpu",stroke:"#5EBBA8",strokeWidth:2})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Memory Usage (%)"})}),e.jsx(U,{children:e.jsx(vt,{width:"100%",height:300,children:e.jsxs(oa,{data:o,children:[e.jsx(bt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:stroke-gray-700"}),e.jsx(jt,{dataKey:"time",stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(wt,{stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(Nt,{contentStyle:{backgroundColor:"rgb(31 41 55)",border:"1px solid rgb(75 85 99)",borderRadius:"8px",color:"rgb(243 244 246)"},labelStyle:{color:"rgb(243 244 246)"}}),e.jsx(la,{type:"monotone",dataKey:"memory",stroke:"#3B82F6",strokeWidth:2})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Bandwidth (Mbps)"})}),e.jsx(U,{children:e.jsx(vt,{width:"100%",height:300,children:e.jsxs(oa,{data:o,children:[e.jsx(bt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:stroke-gray-700"}),e.jsx(jt,{dataKey:"time",stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(wt,{stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(Nt,{contentStyle:{backgroundColor:"rgb(31 41 55)",border:"1px solid rgb(75 85 99)",borderRadius:"8px",color:"rgb(243 244 246)"},labelStyle:{color:"rgb(243 244 246)"}}),e.jsx(la,{type:"monotone",dataKey:"bandwidth",stroke:"#8B5CF6",strokeWidth:2})]})})})]})]}),s==="config"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Device Configuration"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"SNMP Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Community String"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"â¢â¢â¢â¢â¢â¢â¢â¢"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"SNMP Version"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"v2c"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Port"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"161"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Monitoring Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Polling Interval"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"60 seconds"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Timeout"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"10 seconds"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Retries"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"3"})]})]})]})]})})]}),s==="alerts"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Recent Alerts"})}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ze,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No alerts"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"This device has no recent alerts"})]})})]})]})}const ka=t=>{const s=t.toLowerCase();return s.includes("paybox")||s.includes("atm")?xi:s.includes("nvr")||s.includes("camera")?gi:s.includes("router")||s.includes("core")?et:s.includes("switch")?et:s.includes("access point")||s.includes("ap")?_e:s.includes("biostar")||s.includes("security")?hs:s.includes("disaster")?Vl:it},ii=t=>{if(t.triggers&&t.triggers.length>0){const i=t.triggers[0],l=parseInt(i.lastchange)*1e3,c=Date.now()-l,u=Math.floor(c/(1e3*60*60*24)),m=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(c%(1e3*60*60)/(1e3*60));return u>0?`${u}d ${m}h ${x}m`:m>0?`${m}h ${x}m`:`${x}m`}const s=Date.now(),a=t.last_check*1e3,r=s-a,n=Math.floor(r/(1e3*60*60)),o=Math.floor(r%(1e3*60*60)/(1e3*60));return`${n}h ${o}m`},Fs=t=>{if(t.ping_status!=="Down")return!1;if(t.triggers&&t.triggers.length>0){const n=parseInt(t.triggers[0].lastchange)*1e3,o=Date.now(),i=600*1e3;return o-n<i}const s=Date.now(),a=t.last_check*1e3,r=600*1e3;return s-a<r},Rt=t=>{const s=t.toLowerCase(),a={tbilisi:"Tbilisi",ruckus:"Tbilisi",callcentre:"Tbilisi","call centre":"Tbilisi",headoffice:"Tbilisi","head office":"Tbilisi",telavi:"Kakheti",gurjaani:"Kakheti",sagarejo:"Kakheti",dedoplistskaro:"Kakheti",lagodekhi:"Kakheti",kvareli:"Kakheti",akhmeta:"Kakheti",kutaisi:"Imereti",zestaponi:"Imereti",chiatura:"Imereti",khoni:"Imereti",sachkhere:"Imereti",tkibuli:"Imereti",tskaltubo:"Imereti",baghdati:"Imereti",vani:"Imereti",terjola:"Imereti",batumi:"Adjara",kobuleti:"Adjara",khelvachauri:"Adjara",shuakhevi:"Adjara",khulo:"Adjara",zugdidi:"Samegrelo",poti:"Samegrelo",senaki:"Samegrelo",martvili:"Samegrelo",abasha:"Samegrelo",mestia:"Samegrelo",ozurgeti:"Guria",lanchkhuti:"Guria",chokhatauri:"Guria",gori:"Shida Kartli",kaspi:"Shida Kartli",khashuri:"Shida Kartli",kareli:"Shida Kartli",rustavi:"Kvemo Kartli",marneuli:"Kvemo Kartli",gardabani:"Kvemo Kartli",bolnisi:"Kvemo Kartli",dmanisi:"Kvemo Kartli",tsalka:"Kvemo Kartli",tetritskaro:"Kvemo Kartli",mtskheta:"Mtskheta-Mtianeti",dusheti:"Mtskheta-Mtianeti",tianeti:"Mtskheta-Mtianeti",kazbegi:"Mtskheta-Mtianeti",stepantsminda:"Mtskheta-Mtianeti",akhaltsikhe:"Samtskhe-Javakheti",borjomi:"Samtskhe-Javakheti",bakuriani:"Samtskhe-Javakheti",akhalkalaki:"Samtskhe-Javakheti",ninotsminda:"Samtskhe-Javakheti",aspindza:"Samtskhe-Javakheti",adigeni:"Samtskhe-Javakheti",ambrolauri:"Racha-Lechkhumi",oni:"Racha-Lechkhumi",lentekhi:"Racha-Lechkhumi",tsageri:"Racha-Lechkhumi"};for(const[r,n]of Object.entries(a))if(s.includes(r))return n;return"Tbilisi"},Sa=t=>t.replace(/\d+\.\d+\.\d+\.\d+/g,"").trim(),Cg=async(t,s)=>{try{const r=(await Ee.getHistory(t.hostid,s)).data.history||[];return r.length===0?[]:r.map(n=>{const o=new Date(n.timestamp);let i="";return s==="24h"?i=`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`:s==="7d"?i=`${o.getMonth()+1}/${o.getDate()} ${o.getHours()}:00`:i=`${o.getMonth()+1}/${o.getDate()}`,{timestamp:n.timestamp,time:i,status:n.value,responseTime:n.value===1?t.ping_response_time||10:0}})}catch(a){return console.error("Failed to fetch historical data:",a),[]}},Tg=t=>{let s=0,a=0,r=!1,n=0;if(t.forEach(d=>{d.status===0&&!r?(r=!0,n=d.timestamp):d.status===1&&r&&(r=!1,s++,a+=d.timestamp-n)}),s===0)return"N/A";const o=a/s,i=Math.floor(o/(1e3*60));return i<60?`${i}m`:`${Math.floor(i/60)}h ${i%60}m`};function Ag(){const{isRegionalManager:t,userRegion:s}=Qa(),a=li(),[r,n]=g.useState(null),[o,i]=g.useState("24h"),[l,d]=g.useState(30),[c,u]=g.useState([]),[m,x]=g.useState(!1),[h,S]=g.useState("grid"),[p,y]=g.useState(new Set),[j,M]=g.useState(new Set),E=g.useRef(null),[R,w]=g.useState("all"),[v,_]=g.useState("all"),[P,$]=g.useState("all"),[G,k]=g.useState(""),{data:I,isLoading:ae,refetch:pe}=$e({queryKey:["devices"],queryFn:()=>Ee.getAll(),refetchInterval:3e4}),ve=us({mutationFn:f=>Ee.pingDevice(f),onSuccess:(f,D)=>{if(M(V=>{const W=new Set(V);return W.delete(D),W}),f.data.success){const V=f.data.response_time;Fe.success(`Ping Successful - Response time: ${V}ms`)}else Fe.error(f.data.error||"Ping Failed - Device did not respond")},onError:(f,D)=>{M(V=>{const W=new Set(V);return W.delete(D),W}),Fe.error(f.message||"Ping Error - Failed to ping device")}}),he=(f,D)=>{D&&D.stopPropagation(),M(V=>new Set(V).add(f)),ve.mutate(f)};g.useEffect(()=>{const D=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/updates`,V=()=>{try{const W=new WebSocket(D);E.current=W,W.onopen=()=>{},W.onmessage=Q=>{try{const H=JSON.parse(Q.data);H.type==="device_status_update"&&(a.invalidateQueries({queryKey:["devices"]}),Fe.info(`Device Update: ${H.device_name} status changed`))}catch(H){console.error("Failed to parse WebSocket message:",H)}},W.onerror=Q=>{console.error("WebSocket error:",Q)},W.onclose=()=>{setTimeout(V,5e3)}}catch(W){console.error("Failed to connect WebSocket:",W)}};return V(),()=>{E.current&&E.current.close()}},[a]),g.useEffect(()=>{r&&(x(!0),Cg(r,o).then(f=>{u(f),x(!1)}).catch(f=>{console.error("Failed to load history:",f),x(!1)}))},[r,o]),g.useEffect(()=>{I&&d(30)},[I]),g.useEffect(()=>{const f=setInterval(()=>{d(D=>D<=1?30:D-1)},1e3);return()=>clearInterval(f)},[]);const{regions:N,deviceTypes:A}=g.useMemo(()=>{if(!(I!=null&&I.data))return{regions:[],deviceTypes:[]};const f=new Set,D=new Set;return I.data.forEach(V=>{f.add(Rt(V.branch)),D.add(V.device_type)}),{regions:Array.from(f).sort(),deviceTypes:Array.from(D).sort()}},[I]);g.useEffect(()=>{N.length>0&&p.size===0&&y(new Set(N))},[N]);const F=g.useMemo(()=>{if(!(I!=null&&I.data))return[];let f=[...I.data];if(t&&s&&(f=f.filter(D=>Rt(D.branch)===s)),R==="online"?f=f.filter(D=>D.ping_status==="Up"):R==="offline"&&(f=f.filter(D=>D.ping_status==="Down")),!t&&v!=="all"&&(f=f.filter(D=>Rt(D.branch)===v)),P!=="all"&&(f=f.filter(D=>D.device_type===P)),G){const D=G.toLowerCase();f=f.filter(V=>V.display_name.toLowerCase().includes(D)||V.branch.toLowerCase().includes(D)||V.ip.includes(D))}return f.sort((D,V)=>{var ie,ue;const W=Fs(D),Q=Fs(V),H=D.ping_status==="Down",de=V.ping_status==="Down";if(H&&!de)return-1;if(!H&&de)return 1;if(H&&de){if(W&&!Q)return-1;if(!W&&Q)return 1;const ke=(ie=D.triggers)!=null&&ie[0]?parseInt(D.triggers[0].lastchange):D.last_check;return((ue=V.triggers)!=null&&ue[0]?parseInt(V.triggers[0].lastchange):V.last_check)-ke}if(!H&&!de){const ke=D.ping_response_time||0,b=V.ping_response_time||0;if(ke!==b)return b-ke}return D.display_name.localeCompare(V.display_name)})},[I,t,s,R,v,P,G]),K=g.useMemo(()=>{const f={};return F.forEach(D=>{const V=Rt(D.branch);f[V]||(f[V]=[]),f[V].push(D)}),f},[F]),ye=g.useMemo(()=>{if(!(I!=null&&I.data))return{total:0,up:0,down:0,upPercentage:0};const f=I.data.length,D=I.data.filter(Q=>Q.ping_status==="Up").length,V=f-D,W=f>0?(D/f*100).toFixed(1):"0";return{total:f,up:D,down:V,upPercentage:W}},[I]),J=()=>{pe()},oe=g.useMemo(()=>{if(!c.length)return 0;let f=0;for(let D=1;D<c.length;D++)c[D].status===0&&c[D-1].status===1&&f++;return f},[c]),le=g.useMemo(()=>c.length===0?0:(c.filter(D=>D.status===1).length/c.length*100).toFixed(2),[c]),we=g.useMemo(()=>Tg(c),[c]),T=f=>{y(D=>{const V=new Set(D);return V.has(f)?V.delete(f):V.add(f),V})},L=f=>{const D=f.ping_status==="Down",V=Fs(f),W=ka(f.device_type);return e.jsxs("div",{onClick:()=>n(f),className:`relative bg-white dark:bg-gray-800 rounded-lg p-4 border-l-4 cursor-pointer transition-all duration-300 ${V?"border-red-600 shadow-lg shadow-red-500/30 animate-pulse-glow":D?"border-red-500 hover:shadow-lg":"border-green-500 hover:shadow-lg"}`,children:[e.jsx("div",{className:"absolute top-3 right-3",children:D?e.jsxs("div",{className:"relative flex items-center justify-center w-5 h-5",children:[V&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute inline-flex h-6 w-6 rounded-full bg-red-500 opacity-75 animate-ping"}),e.jsx("span",{className:"absolute inline-flex h-5 w-5 rounded-full bg-red-400 opacity-60 animate-pulse"})]}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-600 shadow-lg shadow-red-500/50"})]}):e.jsx("span",{className:"inline-flex rounded-full h-3 w-3 bg-green-500 shadow-sm"})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full flex-shrink-0 ${D?"bg-red-100 dark:bg-red-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:e.jsx(W,{className:`h-5 w-5 ${D?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0 pr-8",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:Sa(f.display_name)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 break-words",children:Rt(f.branch)}),e.jsx("p",{className:"text-xs font-mono text-gray-600 dark:text-gray-500 mt-1",children:f.ip}),D?e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-red-600 dark:text-red-400",children:[e.jsx(ze,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{className:"text-sm font-medium",children:["Down ",ii(f),V&&" â¢ RECENT"]})]}):e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-green-600 dark:text-green-400",children:[e.jsx(yt,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:f.ping_response_time?`${f.ping_response_time}ms`:"Online"})]})]})]})]},f.hostid)};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Real-Time Monitor"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Live device status monitoring with auto-refresh"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-ward-green opacity-75 animate-ping"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-ward-green"})]}),e.jsx("span",{className:"text-sm font-medium text-ward-green",children:"LIVE"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Refreshing in ",l,"s"]}),e.jsx("button",{onClick:J,className:"p-2 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",title:"Refresh now",children:e.jsx(Ya,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{className:"transition-all hover:shadow-lg",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Devices"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:ye.total})]}),e.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-900/30",children:e.jsx(it,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(O,{className:"transition-all hover:shadow-lg",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Online"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:ye.up})]}),e.jsx("div",{className:"p-3 rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx(yt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})})}),e.jsx(O,{className:"transition-all hover:shadow-lg",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Offline"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:ye.down})]}),e.jsx("div",{className:"p-3 rounded-full bg-red-100 dark:bg-red-900/30",children:e.jsx(bi,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})}),e.jsx(O,{className:"transition-all hover:shadow-lg",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Uptime"}),e.jsxs("p",{className:"text-3xl font-bold text-ward-green mt-1",children:[ye.upPercentage,"%"]})]}),e.jsx("div",{className:"p-3 rounded-full bg-ward-green/10",children:e.jsx(Za,{className:"h-6 w-6 text-ward-green"})})]})})})]}),e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search devices...",value:G,onChange:f=>k(f.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-ward-green"})]}),e.jsx(Te,{value:R,onChange:f=>w(f.target.value),options:[{value:"all",label:"All Status"},{value:"online",label:"Online Only"},{value:"offline",label:"Offline Only"}]}),!t&&e.jsx(Te,{value:v,onChange:f=>_(f.target.value),options:[{value:"all",label:"All Regions"},...N.map(f=>({value:f,label:f}))]}),e.jsx(Te,{value:P,onChange:f=>$(f.target.value),options:[{value:"all",label:"All Types"},...A.map(f=>({value:f,label:f}))]})]}),(R!=="all"||v!=="all"||P!=="all"||G)&&e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(Us,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",F.length," of ",(I==null?void 0:I.data.length)||0," devices"]}),e.jsx("button",{onClick:()=>{w("all"),_("all"),$("all"),k("")},className:"ml-auto text-sm text-ward-green hover:underline",children:"Clear all filters"})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>S("grid"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${h==="grid"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(Ll,{className:"h-4 w-4"}),"Grid"]}),e.jsxs("button",{onClick:()=>S("regions"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${h==="regions"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(vi,{className:"h-4 w-4"}),"Regions"]}),e.jsxs("button",{onClick:()=>S("table"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${h==="table"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(_l,{className:"h-4 w-4"}),"Table"]})]}),ae?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(f=>e.jsx(tt,{variant:"card"},f))}):F.length===0?e.jsx(O,{children:e.jsx(U,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx(_e,{className:"h-12 w-12 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"No devices found"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Try adjusting your filters or search query"})]}),e.jsx(z,{onClick:()=>{w("all"),_("all"),$("all"),k("")},className:"mt-2",children:"Clear all filters"})]})})}):h==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:F.map(f=>L(f))}):h==="regions"?e.jsx("div",{className:"space-y-4",children:Object.entries(K).map(([f,D])=>{const V=p.has(f),W=D,Q=W.filter(de=>de.ping_status==="Up").length,H=W.length-Q;return e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>T(f),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[V?e.jsx(mi,{className:"h-5 w-5 text-gray-500"}):e.jsx(Fl,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:f}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",W.length," devices)"]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400",children:[Q," Online"]}),e.jsx("span",{className:"text-sm text-gray-400",children:"â¢"}),e.jsxs("span",{className:"text-sm text-red-600 dark:text-red-400",children:[H," Offline"]})]})})]}),V&&e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:W.map(de=>L(de))})]})},f)})}):e.jsx(O,{children:e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Device Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Region/Branch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Response Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:F.map((f,D)=>{var de,ie;const V=f.ping_status==="Down",W=Fs(f),Q=ka(f.device_type),H=j.has(f.hostid);return e.jsxs("tr",{className:`${D%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"} hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer`,onClick:()=>n(f),children:[e.jsx("td",{className:"px-4 py-3",children:V?e.jsxs("div",{className:"relative flex items-center justify-center w-4 h-4",children:[W&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75 animate-ping"}),e.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-50 animate-pulse"})]}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500 shadow-lg shadow-red-500/50"})]}):e.jsx("span",{className:"inline-flex rounded-full h-3 w-3 bg-green-500 shadow-sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:`h-5 w-5 ${V?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:Sa(f.display_name)}),W&&e.jsx(ee,{variant:"danger",className:"text-xs",children:"RECENT"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:f.device_type}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:[Rt(f.branch)," â¢ ",f.branch]}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-600 dark:text-gray-400",children:f.ip}),e.jsx("td",{className:"px-4 py-3",children:V?e.jsxs("span",{className:"text-sm text-red-600 dark:text-red-400",children:["Down ",ii(f)]}):e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:f.ping_response_time?`${f.ping_response_time}ms`:"Online"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:ue=>he(f.hostid,ue),disabled:H,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",title:"Ping",children:H?e.jsx(Os,{className:"h-4 w-4 text-ward-green animate-spin"}):e.jsx(kt,{className:"h-4 w-4 text-ward-green"})}),(((de=f.device_type)==null?void 0:de.toLowerCase().includes("router"))||((ie=f.device_type)==null?void 0:ie.toLowerCase().includes("switch")))&&e.jsx("button",{onClick:ue=>{ue.stopPropagation(),window.location.href=`/topology?deviceId=${f.hostid}&deviceName=${encodeURIComponent(f.display_name)}`},className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"Topology",children:e.jsx(et,{className:"h-4 w-4 text-ward-green"})})]})})]},f.hostid)})})]})})})}),r&&e.jsxs(rt,{open:!!r,onClose:()=>n(null),size:"xl",children:[e.jsx(It,{onClose:()=>n(null),children:e.jsxs(Bt,{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${r.ping_status==="Down"?"bg-red-100 dark:bg-red-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:(()=>{const f=ka(r.device_type);return e.jsx(f,{className:`h-6 w-6 ${r.ping_status==="Down"?"text-red-600":"text-green-600"}`})})()}),Sa(r.display_name)," - Status History"]})}),e.jsx(Jt,{className:"max-h-[85vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-6 pb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:["24h","7d","30d"].map(f=>e.jsx("button",{onClick:()=>i(f),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o===f?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:f==="24h"?"Last 24 Hours":f==="7d"?"Last 7 Days":"Last 30 Days"},f))}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Os,{className:"h-8 w-8 text-ward-green animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Uptime"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:[le,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Incidents"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:oe})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"MTTR"}),e.jsx("p",{className:"text-2xl font-bold text-ward-green mt-1",children:we})]})]}),c.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Status Timeline"}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx(vt,{width:"100%",height:200,children:e.jsxs(Aa,{data:c,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUp",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),c.map((f,D)=>{var V;return f.status===0&&D<c.length-1?e.jsx(Zl,{x1:f.time,x2:((V=c[D+1])==null?void 0:V.time)||f.time,y1:0,y2:1,fill:"#ef4444",fillOpacity:.3,stroke:"#ef4444",strokeWidth:0},`down-${D}`):null}),e.jsx(bt,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(jt,{dataKey:"time",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12},tickFormatter:f=>{const D=c.findIndex(V=>V.time===f);return D===-1||D%Math.ceil(c.length/8)!==0?"":f}}),e.jsx(wt,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12},domain:[0,1],ticks:[0,1],tickFormatter:f=>f===1?"Up":"Down"}),e.jsx(Nt,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f3f4f6"},formatter:f=>[f===1?"Online":"Offline","Status"],labelStyle:{color:"#9ca3af"}}),e.jsx(Pa,{type:"stepAfter",dataKey:"status",stroke:"#10b981",strokeWidth:2,fill:"url(#colorUp)"})]})})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Device Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Region:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:Rt(r.branch)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"IP:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-mono",children:r.ip})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:r.device_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx(ee,{variant:r.ping_status==="Down"?"danger":"success",className:"ml-2",dot:!0,children:r.ping_status})]})]})]})]})]})})]})]})}const Pg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Dg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",Rg=ps.icon({iconUrl:Pg,shadowUrl:Dg,iconSize:[25,41],iconAnchor:[12,41]});ps.Marker.prototype.options.icon=Rg;const el=[42.3154,43.3569],oi=t=>{if(t.ping_status!=="Down")return!1;if(t.triggers&&t.triggers.length>0){const s=parseInt(t.triggers[0].lastchange)*1e3,a=Date.now(),r=600*1e3;return a-s<r}return!1};function Mg({devices:t,filter:s,searchQuery:a}){const r=sc();return g.useEffect(()=>{if(t.length===0)return;const n=t.filter(i=>i.latitude&&i.longitude);if(n.length===0){r.setView(el,7);return}const o=ps.latLngBounds(n.map(i=>[i.latitude,i.longitude]));r.fitBounds(o,{padding:[50,50],maxZoom:12})},[t,s,a,r]),null}function Eg(){const[t,s]=g.useState("all"),[a,r]=g.useState(""),[n,o]=g.useState(""),[i,l]=g.useState(""),d=g.useRef(null),{data:c,isLoading:u}=$e({queryKey:["devices"],queryFn:()=>Ee.getAll(),refetchInterval:3e4}),m=(c==null?void 0:c.data)||[],x=Array.from(new Set(m.map(v=>v.device_type))).filter(Boolean).sort(),h=m.filter(v=>{var _;if(i){const P=i.toLowerCase();if(!(v.display_name.toLowerCase().includes(P)||v.ip.toLowerCase().includes(P)||((_=v.branch)==null?void 0:_.toLowerCase().includes(P))))return!1}return a&&v.region!==a||n&&v.device_type!==n?!1:t==="online"?v.ping_status==="Up"||v.available==="Available":t==="offline"?v.ping_status==="Down"||v.available==="Unavailable":!0}),S=Array.from(new Set(m.map(v=>v.region))).filter(Boolean).sort(),p={total:h.length,online:h.filter(v=>v.ping_status==="Up"||v.available==="Available").length,offline:h.filter(v=>v.ping_status==="Down"||v.available==="Unavailable").length},y=S.map(v=>{const _=m.filter(k=>k.region===v),P=_.filter(k=>k.ping_status==="Up"||k.available==="Available").length,$=_.length,G=$>0?(P/$*100).toFixed(1):"0";return{region:v,total:$,online:P,offline:$-P,uptime:G}}).sort((v,_)=>parseFloat(v.uptime)-parseFloat(_.uptime)),j=(v,_=1,P=!1)=>{const $=v?"#10b981":"#ef4444",G=`marker-${Math.random().toString(36).substr(2,9)}`,k=`
      @keyframes ${G}-pulse {
        0%, 100% {
          transform: scale(1);
          opacity: 1;
          box-shadow: 0 2px 8px rgba(0,0,0,0.3), 0 0 0 0 rgba(239, 68, 68, 0.7);
        }
        50% {
          transform: scale(1.15);
          opacity: 0.9;
          box-shadow: 0 2px 12px rgba(0,0,0,0.4), 0 0 0 10px rgba(239, 68, 68, 0);
        }
      }
    `;return ps.divIcon({html:`
        ${P?`<style>${k}</style>`:""}
        <div class="${G}" style="
          background: ${$};
          width: 32px;
          height: 32px;
          border-radius: 50%;
          border: 3px solid white;
          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 12px;
          ${P?`animation: ${G}-pulse 2s ease-in-out infinite;`:""}
        ">
          ${_>1?_:""}
        </div>
      `,className:"",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})},E=(v=>{const _={};return v.forEach(P=>{if(!P.latitude||!P.longitude)return;const $=`${P.latitude.toFixed(6)},${P.longitude.toFixed(6)}`;_[$]||(_[$]=[]),_[$].push(P)}),Object.values(_)})(h),R=v=>{if(l(v),v.length>2&&d.current){const _=m.find(P=>P.display_name.toLowerCase().includes(v.toLowerCase())&&P.latitude&&P.longitude);_&&_.latitude&&_.longitude&&d.current.setView([_.latitude,_.longitude],14)}},w=()=>{s("all"),r(""),o(""),l("")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Georgia Network Map"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Geographical view of all network devices"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${t==="all"?"bg-ward-green text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Ys,{className:"h-4 w-4"}),"All (",p.total,")"]}),e.jsxs("button",{onClick:()=>s("online"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${t==="online"?"bg-green-500 text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(yt,{className:"h-4 w-4"}),"Online (",p.online,")"]}),e.jsxs("button",{onClick:()=>s("offline"),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${t==="offline"?"bg-red-500 text-white shadow-md":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx(Zs,{className:"h-4 w-4"}),"Offline (",p.offline,")"]})]})]}),e.jsx(O,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(X,{type:"text",placeholder:"Search devices...",value:i,onChange:v=>R(v.target.value),className:"pl-10"})]}),e.jsx(Te,{value:a,onChange:v=>r(v.target.value),options:[{value:"",label:"All Regions"},...S.map(v=>({value:v,label:v}))]}),e.jsx(Te,{value:n,onChange:v=>o(v.target.value),options:[{value:"",label:"All Device Types"},...x.map(v=>({value:v,label:v}))]}),(a||n||i||t!=="all")&&e.jsx("button",{onClick:w,className:"px-4 py-2 text-sm font-medium text-ward-green hover:bg-ward-green/10 rounded-lg transition-colors",children:"Clear All Filters"})]})})}),y.length>0&&e.jsx(O,{children:e.jsxs(U,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Regional Overview"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:y.slice(0,6).map(({region:v,online:_,offline:P,uptime:$})=>e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>r(v),children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:v}),e.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[$,"%"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"uptime"})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:_}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:P})]})]},v))})]})}),e.jsx(O,{children:e.jsx(U,{className:"p-0",children:u?e.jsx("div",{className:"h-[600px] flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx(ct,{size:"lg",text:"Loading map..."})})}):e.jsxs("div",{className:"h-[600px] relative",children:[e.jsxs(Xl,{center:el,zoom:7,minZoom:6,maxZoom:19,className:"h-full w-full rounded-lg",scrollWheelZoom:!0,ref:d,children:[e.jsx(Ql,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:19}),e.jsx(Jl,{chunkedLoading:!0,maxClusterRadius:60,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,iconCreateFunction:v=>{const _=v.getAllChildMarkers(),P=_.length,$=_.filter(ae=>{const pe=ae.options.device;return pe&&(pe.ping_status==="Up"||pe.available==="Available")}).length,G=$===P,k=$===0;let I="#f59e0b";return G&&(I="#10b981"),k&&(I="#ef4444"),ps.divIcon({html:`
                        <div style="
                          background: ${I};
                          width: 40px;
                          height: 40px;
                          border-radius: 50%;
                          border: 3px solid white;
                          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                          display: flex;
                          align-items: center;
                          justify-content: center;
                          color: white;
                          font-weight: bold;
                          font-size: 14px;
                        " title="${P} devices: ${$} online, ${P-$} offline">
                          ${P}
                        </div>
                      `,className:"",iconSize:[40,40],iconAnchor:[20,20]})},children:E.map((v,_)=>{const P=v[0];if(!P.latitude||!P.longitude)return null;const $=v.filter(I=>I.ping_status==="Up"||I.available==="Available").length,G=$===v.length,k=v.some(oi);return e.jsx(ec,{position:[P.latitude,P.longitude],icon:j(G,v.length,k),children:e.jsx(tc,{maxWidth:400,maxHeight:450,children:e.jsxs("div",{className:"p-2 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-2 mb-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100 text-lg",children:P.branch}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.region})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:v.length}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:$}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Online"})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:v.length-$}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Offline"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2 max-h-48 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:v.map((I,ae)=>{const pe=I.ping_status==="Up"||I.available==="Available",ve=oi(I);return e.jsxs("div",{className:`flex items-start justify-between gap-2 text-sm p-2 rounded ${ve?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":""}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate flex items-center gap-1",children:[I.display_name,ve&&e.jsx(bi,{className:"h-3 w-3 text-red-500"})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:I.ip}),I.device_type&&e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:I.device_type})]}),e.jsx(ee,{variant:pe?"success":"danger",size:"sm",dot:!0,children:pe?"Up":"Down"})]},ae)})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(z,{onClick:()=>window.location.href=`/devices?search=${encodeURIComponent(P.branch)}`,size:"sm",variant:"outline",children:"View Devices"}),e.jsx(z,{onClick:()=>window.location.href=`/monitor?region=${encodeURIComponent(P.region)}`,size:"sm",children:"Monitor Region"})]})]})})},_)})}),e.jsx(Mg,{devices:h,filter:t,searchQuery:i})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 z-[1000] border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Legend"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500 border-2 border-white shadow"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Online Device (",m.filter(v=>v.ping_status==="Up").length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500 border-2 border-white shadow"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Offline Device (",m.filter(v=>v.ping_status==="Down").length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-orange-500 border-2 border-white shadow flex items-center justify-center text-white text-xs font-bold",children:"5"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Mixed Status Cluster"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500 border-2 border-white shadow animate-pulse"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Recently Down (<10m)"})]})]})]})]})})})]})}const Lg=t=>{const s=(t==null?void 0:t.toLowerCase())||"";return s.includes("switch")?{shape:"icon",unicode:"â¡",color:"#14b8a6"}:s.includes("router")&&!s.includes("core")?{shape:"icon",unicode:"ð",color:"#3b82f6"}:s.includes("core")?{shape:"icon",unicode:"ð¥ï¸",color:"#FF6B35"}:s.includes("access point")||s.includes("wifi")||s.includes("wireless")?{shape:"icon",unicode:"ð¡",color:"#10b981"}:s.includes("nvr")||s.includes("camera")?{shape:"icon",unicode:"ð¹",color:"#8b5cf6"}:s.includes("paybox")?{shape:"icon",unicode:"ð³",color:"#ec4899"}:s.includes("atm")?{shape:"icon",unicode:"ðµ",color:"#f59e0b"}:s.includes("biostar")||s.includes("biometric")?{shape:"icon",unicode:"ð",color:"#6366f1"}:s.includes("disaster")||s.includes("dr")?{shape:"icon",unicode:"ð¡ï¸",color:"#14b8a6"}:{shape:"icon",unicode:"ð¥ï¸",color:"#6b7280"}};function _g(){var le,we;const[t,s]=g.useState(!0),[a,r]=g.useState(!0),[n,o]=g.useState(""),[i,l]=g.useState(null),[d,c]=g.useState(!1),[u,m]=g.useState(null),[x,h]=g.useState({routers:!0,switches:!0,payboxes:!0,online:!0,offline:!0}),[S,p]=g.useState({total:0,online:0,offline:0,filtered:0}),[y,j]=g.useState(""),[M,E]=g.useState(""),R=g.useRef(null),w=g.useRef(null),v=g.useRef(null),_=g.useRef(null),P=g.useRef(null),{data:$}=$e({queryKey:["devices"],queryFn:()=>Ee.getAll()}),G=g.useMemo(()=>$!=null&&$.data?$.data.filter(T=>{var f;const L=((f=T.device_type)==null?void 0:f.toLowerCase())||"";return L.includes("router")||L.includes("switch")||L.includes("core")}).sort((T,L)=>T.display_name.localeCompare(L.display_name)):[],[$]);g.useEffect(()=>(k().then(()=>{r(!1)}).catch(T=>{console.error("[Topology] Failed to load vis.js:",T),r(!1)}),()=>{P.current&&window.clearInterval(P.current),w.current&&w.current.destroy()}),[]),g.useEffect(()=>{const T=new URLSearchParams(window.location.search),L=T.get("deviceId"),f=T.get("deviceName");L&&f?(j(L),E(f)):G.length>0&&(j(G[0].hostid),E(G[0].display_name))},[G]),g.useEffect(()=>{if(a||!window.vis)return;let T=0;const L=10,f=()=>{R.current?I():T<L?(T++,setTimeout(f,100*T)):(console.error("[Topology] Canvas failed to initialize after",L,"retries"),s(!1))},D=setTimeout(f,50);return()=>clearTimeout(D)},[a,y]),g.useEffect(()=>{if(!a&&window.vis&&w.current&&y&&v.current){const T=v.current.get(y);T?(w.current.selectNodes([y]),w.current.focus(y,{scale:1.5,animation:{duration:1e3,easingFunction:"easeInOutQuad"}}),ve(T)):(c(!1),l(null))}},[y]),g.useEffect(()=>{if(!(!y||!M))return N(y,M),P.current&&window.clearInterval(P.current),P.current=window.setInterval(()=>{N(y,M)},3e4),()=>{P.current&&window.clearInterval(P.current)}},[y,M]);const k=()=>new Promise((T,L)=>{if(window.vis){T();return}const f=document.createElement("script");f.src="https://cdn.jsdelivr.net/npm/vis-network@9.1.6/dist/vis-network.min.js",f.async=!0,f.onload=()=>{T()},f.onerror=()=>{console.error("[Topology] Failed to load vis.js"),L(new Error("Failed to load vis.js"))},document.head.appendChild(f);const D=document.createElement("link");D.rel="stylesheet",D.href="https://cdn.jsdelivr.net/npm/vis-network@9.1.6/dist/vis-network.min.css",document.head.appendChild(D)}),I=async()=>{try{s(!0);const L=await fetch("/api/topology?view=hierarchical&limit=200");if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const f=await L.json();if(!window.vis){console.error("[Topology] vis.js not available"),setTimeout(I,500);return}let D=f.nodes||[],V=f.edges||[];if(y){const H=new Set;H.add(y),H.add(String(y));const de=V.filter(ie=>{const ue=String(ie.from),ke=String(ie.to),b=String(y),me=ue===b||ke===b;return me});de.forEach(ie=>{const ue=String(ie.from),ke=String(ie.to),b=String(y);ue===b&&(H.add(ie.to),H.add(String(ie.to))),ke===b&&(H.add(ie.from),H.add(String(ie.from)))}),D=D.filter(ie=>{const ue=String(ie.id),ke=H.has(ie.id)||H.has(ue),me=(ie.deviceType||"").toLowerCase().includes("core");return ue===String(y)?!0:ke&&!me}),V=de}const W=D.map(H=>{const de=H.deviceType||"Unknown",ie=Lg(de);let ue="";if(H.title){const me=H.title.split(`
`);me.length>1&&(ue=me[1])}let ke=H.label||"";!ke&&H.title&&(ke=H.title.split(`
`)[0]);const b=ue?`${ke}
${ue}`:ke;return{...H,label:b,shape:ie.shape,icon:{code:ie.unicode,size:60,color:H.color||ie.color},font:{...H.font,size:16,multi:"html",bold:!0},size:40}}),Q=V.map(H=>{let de=H.width||2;if(H.label){const ie=H.label.match(/â(\d+\.?\d*)M/);if(ie){const ue=parseFloat(ie[1]);ue>500?de=8:ue>100?de=5:ue>10?de=3:de=2}}return{...H,width:de,selectionWidth:2,hoverWidth:1.5}});v.current=new window.vis.DataSet(W),_.current=new window.vis.DataSet(Q),A(f.stats),ae(),setTimeout(()=>{w.current&&w.current.fit({animation:{duration:500,easingFunction:"easeInOutQuad"}})},300),s(!1)}catch(T){console.error("[Topology] Error loading data:",T),s(!1)}},ae=()=>{if(!R.current){console.error("[Topology] Canvas ref not available");return}if(!window.vis){console.error("[Topology] vis.js not loaded");return}if(!v.current||!_.current){console.error("[Topology] Nodes or edges DataSet not initialized");return}const T=document.documentElement.classList.contains("dark"),L={nodes:{shape:"dot",size:25,font:{size:16,color:T?"#F3F4F6":"#1a1a1a",face:"Arial, sans-serif"},borderWidth:2,shadow:{enabled:!0,color:"rgba(94, 187, 168, 0.4)",size:10,x:0,y:0}},edges:{width:4,color:{color:T?"#30363d":"#e5e7eb",highlight:"#5EBBA8",hover:"#72CFB8"},smooth:{enabled:!0,type:"cubicBezier",roundness:.4},font:{size:13,color:T?"#FFFFFF":"#1a1a1a",background:T?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.9)",strokeWidth:2,align:"top",vadjust:-8},arrows:{to:{enabled:!1}},selectionWidth:2,hoverWidth:1.5,chosen:{edge:function(f,D,V,W){(W||V)&&(f.width*=1.5,f.color="#5EBBA8")}}},physics:{enabled:!0,stabilization:{enabled:!0,iterations:500,fit:!0},hierarchicalRepulsion:{nodeDistance:200,springLength:250,springConstant:.01,damping:.09},solver:"hierarchicalRepulsion"},layout:{hierarchical:{enabled:!1}},interaction:{hover:!0,tooltipDelay:100,navigationButtons:!1,keyboard:!0,selectConnectedEdges:!1,hoverConnectedEdges:!0}};try{w.current=new window.vis.Network(R.current,{nodes:v.current,edges:_.current},L),console.log("[Topology] Network created successfully:",w.current),pe(),w.current.once("stabilizationIterationsDone",()=>{console.log("[Topology] Stabilization complete"),w.current.fit({animation:{duration:800,easingFunction:"easeInOutQuad"}})}),setTimeout(()=>{w.current&&(w.current.fit({animation:!1}),console.log("[Topology] Initial fit completed"))},100)}catch(f){console.error("[Topology] Error creating network:",f)}},pe=()=>{w.current&&(w.current.on("click",T=>{if(T.nodes.length>0){const L=T.nodes[0],f=v.current.get(L);ve(f)}else if(T.edges.length>0){const L=T.edges[0],f=_.current.get(L);he(f)}else c(!1),l(null)}),w.current.on("doubleClick",T=>{if(T.nodes.length>0){const L=T.nodes[0];!L.startsWith("region_")&&!L.startsWith("branch_")&&(window.location.href=`/devices/${L}`)}}),w.current.on("hoverNode",()=>{R.current&&(R.current.style.cursor="pointer")}),w.current.on("blurNode",()=>{R.current&&(R.current.style.cursor="default")}),w.current.on("hoverEdge",()=>{R.current&&(R.current.style.cursor="pointer")}),w.current.on("blurEdge",()=>{R.current&&(R.current.style.cursor="default")}))},ve=T=>{l(T),c(!0),T.level===0||T.deviceType==="Core Router"?N(T.id,T.label):m(null)},he=T=>{const L=v.current.get(T.from),f=v.current.get(T.to),D={id:T.id,label:`Connection: ${(L==null?void 0:L.label)||"Unknown"} â ${(f==null?void 0:f.label)||"Unknown"}`,isEdge:!0,edgeLabel:T.label||"No bandwidth data",edgeTitle:T.title||"Connection details unavailable",fromDevice:(L==null?void 0:L.label)||"Unknown",toDevice:(f==null?void 0:f.label)||"Unknown"};l(D),c(!0),m(null)},N=g.useCallback(async(T,L)=>{try{const f=localStorage.getItem("token");if(!f){console.error("[REST API] No authentication token found");return}const D=await fetch(`/api/v1/router/${T}/interfaces`,{method:"GET",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const V=await D.json();if(V.interfaces){const W=Object.entries(V.interfaces).map(([,Q])=>({name:Q.name,description:Q.description||"",status:Q.status,bandwidth_in:Q.bandwidth_in,bandwidth_out:Q.bandwidth_out,bandwidth_in_mbps:Q.bandwidth_in/1e6,bandwidth_out_mbps:Q.bandwidth_out/1e6,errors_in:Q.errors_in||0,errors_out:Q.errors_out||0}));m({hostid:V.hostid,interfaces:W}),console.log(`[REST API] Fetched ${W.length} interfaces for ${L}`)}}catch(f){console.error("[REST API] Failed to fetch router interfaces:",f)}},[]),A=T=>{if(p({total:T.total_nodes||0,online:0,offline:0,filtered:T.total_nodes||0}),v.current){const L=v.current.get(),f=L.filter(V=>V.title&&V.title.includes("Status: Up")).length,D=L.filter(V=>V.title&&V.title.includes("Status: Down")).length;p(V=>({...V,online:f,offline:D}))}},F=g.useCallback(T=>{if(o(T),!w.current||!v.current)return;if(!T.trim()){w.current.unselectAll();return}const L=v.current.get().filter(f=>{const D=(f.label||"").toLowerCase(),V=(f.title||"").toLowerCase();return D.includes(T.toLowerCase())||V.includes(T.toLowerCase())});if(L.length>0){const f=L.map(D=>D.id);w.current.selectNodes(f),w.current.fit({nodes:f,animation:{duration:500}})}},[]),K=g.useCallback(()=>{if(!w.current||!v.current||!_.current)return;const T=v.current.get(),L=[];T.forEach(W=>{let Q=!0;const H=(W.deviceType||W.group||"").toLowerCase();H.includes("router")&&!x.routers&&(Q=!1),H.includes("switch")&&!x.switches&&(Q=!1),H.includes("paybox")&&!x.payboxes&&(Q=!1);const de=W.title&&W.title.includes("Status: Up"),ie=W.title&&W.title.includes("Status: Down");de&&!x.online&&(Q=!1),ie&&!x.offline&&(Q=!1),Q&&L.push(W.id)});const f=T.map(W=>({id:W.id,hidden:!L.includes(W.id)}));v.current.update(f);const V=_.current.get().map(W=>({id:W.id,hidden:!L.includes(W.from)||!L.includes(W.to)}));_.current.update(V),p(W=>({...W,filtered:L.length})),console.log(`[Filter] Showing ${L.length} of ${T.length} nodes`)},[x]);g.useEffect(()=>{K()},[x,K]);const ye=()=>{if(w.current){const T=w.current.getScale();w.current.moveTo({scale:T*1.3,animation:{duration:300}})}},J=()=>{if(w.current){const T=w.current.getScale();w.current.moveTo({scale:T*.7,animation:{duration:300}})}},oe=()=>{w.current&&w.current.fit({animation:{duration:800}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Network Topology"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Interactive network visualization with live data"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{variant:"outline",onClick:J,size:"sm",children:e.jsx(Il,{className:"h-4 w-4"})}),e.jsx(z,{variant:"outline",onClick:ye,size:"sm",children:e.jsx(Bl,{className:"h-4 w-4"})}),e.jsx(z,{variant:"outline",onClick:oe,size:"sm",children:e.jsx(Ol,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-ward-green"}),e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Network Device:"})]}),e.jsx(Te,{value:y,onChange:T=>{const L=G.find(f=>f.hostid===T.target.value);if(L){j(L.hostid),E(L.display_name);const f=new URL(window.location.href);f.searchParams.set("deviceId",L.hostid),f.searchParams.set("deviceName",L.display_name),window.history.pushState({},"",f)}},options:[{value:"",label:"Select a Router or Switch..."},...G.map(T=>({value:T.hostid,label:`${T.display_name} (${T.device_type}) - ${T.branch}`}))],className:"flex-1 max-w-md"}),y&&e.jsx(ee,{variant:((le=G.find(T=>T.hostid===y))==null?void 0:le.ping_status)==="Up"?"success":"danger",children:((we=G.find(T=>T.hostid===y))==null?void 0:we.ping_status)||"Unknown"})]})})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(X,{type:"text",placeholder:"Search devices or IP addresses...",value:n,onChange:T=>F(T.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.routers,onChange:T=>h({...x,routers:T.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Routers"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.switches,onChange:T=>h({...x,switches:T.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Switches"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.payboxes,onChange:T=>h({...x,payboxes:T.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Payboxes"})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-700"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.online,onChange:T=>h({...x,online:T.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Online"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.offline,onChange:T=>h({...x,offline:T.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Offline"})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Nodes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.total})]}),e.jsx(et,{className:"h-8 w-8 text-ward-green"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Filtered"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:S.filtered})]}),e.jsx(Us,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Online"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.online})]}),e.jsx(yt,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Offline"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:S.offline})]}),e.jsx(Zs,{className:"h-8 w-8 text-red-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx(O,{className:"lg:col-span-3",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:R,className:"w-full bg-gray-50 dark:bg-gray-900 rounded-lg",style:{height:"600px",minHeight:"600px",border:"1px solid rgb(55, 65, 81)"}}),(a||t)&&e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx(ct,{size:"lg",text:"Loading network visualization..."})})})]})})}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Device Details"})}),e.jsx(U,{children:d&&i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mt-1",children:i.label})]}),i.isEdge?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 block",children:"Connection Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"From"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:i.fromDevice})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"To"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:i.toDevice})]}),i.edgeLabel&&i.edgeLabel!=="No bandwidth data"&&e.jsxs("div",{className:"bg-ward-green/10 dark:bg-ward-green/20 p-3 rounded-lg mt-2",children:[e.jsx("label",{className:"text-xs font-medium text-ward-green dark:text-ward-green",children:"Bandwidth"}),e.jsx("p",{className:"text-sm font-mono text-gray-900 dark:text-gray-100 mt-1",children:i.edgeLabel})]}),i.edgeTitle&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-lg mt-2",children:e.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:i.edgeTitle})})]})]})}):e.jsxs(e.Fragment,{children:[i.deviceType&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:i.deviceType})]}),i.branch&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Branch"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:i.branch})]}),i.region&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Region"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:i.region})]})]}),u&&u.interfaces&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 block",children:["Live Interfaces (",u.interfaces.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:u.interfaces.slice(0,10).map((T,L)=>{var f,D;return e.jsxs("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:T.name}),T.description&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:T.description}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["â ",((f=T.bandwidth_in_mbps)==null?void 0:f.toFixed(1))||0," Mbps"]}),e.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["â ",((D=T.bandwidth_out_mbps)==null?void 0:D.toFixed(1))||0," Mbps"]})]}),e.jsx(ee,{variant:T.status==="up"?"success":"danger",className:"mt-1",children:T.status.toUpperCase()})]},L)})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Click on a device to view details"})]})})]})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Legend"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Core Router"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Switch"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-ward-green"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Server"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Online"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Offline"})]})]})})]})]})}function Fg(){var P,$,G;const[t,s]=g.useState("ping"),[a,r]=g.useState(""),[n,o]=g.useState(""),[i,l]=g.useState("22,80,443,3389,8080"),[d,c]=g.useState(!1),[u,m]=g.useState(null),[x,h]=g.useState(null),[S,p]=g.useState(null),[y,j]=g.useState(null),M=async()=>{if(a){c(!0);try{const k=await Z.post("/diagnostics/ping",null,{params:{ip:a,count:5}});m(k.data)}catch(k){console.error("Ping failed:",k)}finally{c(!1)}}},E=async()=>{if(a){c(!0);try{const k=await Z.post("/diagnostics/traceroute",null,{params:{ip:a,max_hops:30}});h(k.data)}catch(k){console.error("Traceroute failed:",k)}finally{c(!1)}}},R=async()=>{if(n){c(!0);try{const k=await Z.post("/diagnostics/dns/lookup",null,{params:{hostname:n}});p(k.data)}catch(k){console.error("DNS lookup failed:",k)}finally{c(!1)}}},w=async()=>{if(a){c(!0);try{const k=await Z.post("/diagnostics/portscan",null,{params:{ip:a,ports:i}});j(k.data)}catch(k){console.error("Port scan failed:",k)}finally{c(!1)}}},v=()=>{switch(t){case"ping":M();break;case"traceroute":E();break;case"dns":R();break;case"portscan":w();break}},_=k=>k?k<50?"text-green-600":k<100?"text-yellow-600":"text-red-600":"text-gray-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Network Diagnostics"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Test network connectivity and performance"})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Diagnostic Tools"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>s("ping"),className:`p-4 rounded-lg border-2 transition-all ${t==="ping"?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx(kt,{className:`h-8 w-8 mx-auto mb-2 ${t==="ping"?"text-ward-green":"text-gray-400"}`}),e.jsx("h3",{className:`font-semibold ${t==="ping"?"text-ward-green":"text-gray-900 dark:text-gray-100"}`,children:"Ping"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Test connectivity"})]}),e.jsxs("button",{onClick:()=>s("traceroute"),className:`p-4 rounded-lg border-2 transition-all ${t==="traceroute"?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx(et,{className:`h-8 w-8 mx-auto mb-2 ${t==="traceroute"?"text-ward-green":"text-gray-400"}`}),e.jsx("h3",{className:`font-semibold ${t==="traceroute"?"text-ward-green":"text-gray-900 dark:text-gray-100"}`,children:"Traceroute"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Trace network path"})]}),e.jsxs("button",{onClick:()=>s("dns"),className:`p-4 rounded-lg border-2 transition-all ${t==="dns"?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx(Ys,{className:`h-8 w-8 mx-auto mb-2 ${t==="dns"?"text-ward-green":"text-gray-400"}`}),e.jsx("h3",{className:`font-semibold ${t==="dns"?"text-ward-green":"text-gray-900 dark:text-gray-100"}`,children:"DNS Lookup"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Resolve hostnames"})]}),e.jsxs("button",{onClick:()=>s("portscan"),className:`p-4 rounded-lg border-2 transition-all ${t==="portscan"?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx(it,{className:`h-8 w-8 mx-auto mb-2 ${t==="portscan"?"text-ward-green":"text-gray-400"}`}),e.jsx("h3",{className:`font-semibold ${t==="portscan"?"text-ward-green":"text-gray-900 dark:text-gray-100"}`,children:"Port Scan"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Check open ports"})]})]})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs(se,{children:[t==="ping"&&"Ping Configuration",t==="traceroute"&&"Traceroute Configuration",t==="dns"&&"DNS Lookup Configuration",t==="portscan"&&"Port Scan Configuration"]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[t==="dns"?e.jsx(X,{label:"Hostname or Domain",placeholder:"e.g., google.com or example.org",value:n,onChange:k=>o(k.target.value)}):e.jsx(X,{label:"Target IP Address",placeholder:"e.g., 192.168.1.1",value:a,onChange:k=>r(k.target.value)}),t==="portscan"&&e.jsx(X,{label:"Ports to Scan",placeholder:"e.g., 22,80,443,3389,8080",value:i,onChange:k=>l(k.target.value),helperText:"Comma-separated list of ports"}),e.jsx(z,{onClick:v,disabled:d,className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(St,{className:"h-4 w-4 mr-2"}),"Run ",t.charAt(0).toUpperCase()+t.slice(1)]})})]})})]}),u&&t==="ping"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Ping Results"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Target"}),e.jsx("p",{className:"font-mono font-semibold text-gray-900 dark:text-gray-100",children:u.device_ip})]}),e.jsx(ee,{variant:u.is_reachable?"success":"danger",dot:!0,children:u.is_reachable?"REACHABLE":"UNREACHABLE"})]}),u.is_reachable&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Packet Loss"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[u.packet_loss_percent,"%"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Min RTT"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(P=u.min_rtt_ms)==null?void 0:P.toFixed(2),"ms"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg RTT"}),e.jsxs("p",{className:"text-2xl font-bold text-ward-green",children:[($=u.avg_rtt_ms)==null?void 0:$.toFixed(2),"ms"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max RTT"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[(G=u.max_rtt_ms)==null?void 0:G.toFixed(2),"ms"]})]})]})]})})]}),x&&t==="traceroute"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Traceroute Results"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Target"}),e.jsx("p",{className:"font-mono font-semibold text-gray-900 dark:text-gray-100",children:x.device_ip})]}),e.jsxs(ee,{variant:"default",children:[x.total_hops," Hops"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Hop"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Hostname"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Latency"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:x.hops.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-ward-green text-white font-semibold text-sm",children:k.hop_number})}),e.jsx("td",{className:"px-4 py-3 font-mono text-sm text-gray-900 dark:text-gray-100",children:k.ip||"*"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:k.hostname||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`font-semibold ${_(k.latency_ms)} dark:opacity-90`,children:k.latency_ms?`${k.latency_ms.toFixed(2)}ms`:"*"})})]},k.hop_number))})]})})]})})]}),S&&t==="dns"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"DNS Lookup Results"})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:S.success?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Hostname"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:S.hostname})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"IP Address"}),e.jsx("p",{className:"font-mono font-semibold text-ward-green",children:S.ip_address})]}),S.all_ips&&S.all_ips.length>1&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"All IP Addresses"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.all_ips.map((k,I)=>e.jsx(ee,{variant:"default",children:k},I))})]}),S.reverse_hostname&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Reverse Hostname"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:S.reverse_hostname})]})]}):e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:S.error||"DNS lookup failed"})})})})]}),y&&t==="portscan"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Port Scan Results"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Target"}),e.jsx("p",{className:"font-mono font-semibold text-gray-900 dark:text-gray-100",children:y.ip_address})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Ports"}),e.jsxs("p",{className:"text-2xl font-bold text-ward-green",children:[y.open_ports,"/",y.ports_scanned]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.results.map(k=>e.jsxs("div",{className:`p-4 rounded-lg border-2 ${k.is_open?"border-green-500 dark:border-green-600 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"}`,children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:k.port}),e.jsx(ee,{variant:k.is_open?"success":"default",className:"mt-2",children:k.status.toUpperCase()})]},k.port))})]})})]})]})}function Vg(){const[t,s]=g.useState("downtime"),[a,r]=g.useState("weekly"),[n,o]=g.useState(""),[i,l]=g.useState(!1),[d,c]=g.useState(null),[u,m]=g.useState(null);g.useEffect(()=>{t==="downtime"?x():t==="mttr"&&h()},[t,a,n]);const x=async()=>{l(!0);try{const j=await Z.get("/reports/downtime",{params:{period:a,region:n||void 0}});c(j.data)}catch(j){console.error("Failed to load downtime report:",j)}finally{l(!1)}},h=async()=>{l(!0);try{const j=await Z.get("/reports/mttr-extended");m(j.data)}catch(j){console.error("Failed to load MTTR report:",j)}finally{l(!1)}},S=()=>{if(!d)return;const j=[["Device","Region","Type","Availability %","Downtime Hours","Incidents"],...d.devices.map(w=>[w.name,w.region,w.device_type,w.availability_percent.toString(),w.downtime_hours.toString(),w.incidents.toString()])].map(w=>w.join(",")).join(`
`),M=new Blob([j],{type:"text/csv"}),E=window.URL.createObjectURL(M),R=document.createElement("a");R.href=E,R.download=`downtime_report_${new Date().toISOString().split("T")[0]}.csv`,R.click()},p=(d==null?void 0:d.devices.slice(0,10).map(j=>({name:j.name.length>15?j.name.substring(0,15)+"...":j.name,downtime:j.downtime_hours,availability:j.availability_percent})))||[],y=(u==null?void 0:u.top_problem_devices.slice(0,8).map(j=>({name:j.name.length>15?j.name.substring(0,15)+"...":j.name,downtime:j.downtime_minutes,incidents:j.incident_count})))||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Comprehensive network performance reports"})]}),e.jsxs(z,{onClick:x,children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>s("downtime"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="downtime"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(qt,{className:"h-4 w-4 inline-block mr-2"}),"Downtime Report"]}),e.jsxs("button",{onClick:()=>s("mttr"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="mttr"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(Xa,{className:"h-4 w-4 inline-block mr-2"}),"MTTR Trends"]}),e.jsxs("button",{onClick:()=>s("sla"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="sla"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(ui,{className:"h-4 w-4 inline-block mr-2"}),"SLA Compliance"]})]})})}),t==="downtime"&&e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ul,{className:"h-4 w-4 text-gray-500"}),e.jsx(Te,{value:a,onChange:j=>r(j.target.value),options:[{value:"weekly",label:"Last 7 Days"},{value:"monthly",label:"Last 30 Days"},{value:"quarterly",label:"Last 90 Days"}]})]}),e.jsx(Te,{value:n,onChange:j=>o(j.target.value),options:[{value:"",label:"All Regions"},{value:"Tbilisi",label:"Tbilisi"},{value:"Kakheti",label:"Kakheti"},{value:"Adjara",label:"Adjara"}]}),e.jsx("div",{className:"ml-auto",children:e.jsxs(z,{variant:"outline",onClick:S,children:[e.jsx(fi,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:(d==null?void 0:d.total_devices)||0})]}),e.jsx(it,{className:"h-8 w-8 text-ward-green"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Availability"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[(d==null?void 0:d.summary.average_availability.toFixed(1))||0,"%"]})]}),e.jsx($l,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Downtime"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[(d==null?void 0:d.summary.total_downtime_hours.toFixed(1))||0,"h"]})]}),e.jsx(qt,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Devices w/ Issues"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:(d==null?void 0:d.summary.devices_with_downtime)||0})]}),e.jsx(ze,{className:"h-8 w-8 text-orange-500"})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Top 10 Devices by Downtime"})}),e.jsx(U,{children:i?e.jsx("div",{className:"flex items-center justify-center h-[300px]",children:e.jsx(ct,{size:"lg"})}):e.jsx(vt,{width:"100%",height:300,children:e.jsxs(Br,{data:p,children:[e.jsx(bt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:stroke-gray-700"}),e.jsx(jt,{dataKey:"name",stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(wt,{stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(Nt,{contentStyle:{backgroundColor:"rgb(31 41 55)",border:"1px solid rgb(75 85 99)",borderRadius:"8px",color:"rgb(243 244 246)"},labelStyle:{color:"rgb(243 244 246)"}}),e.jsx(ca,{dataKey:"downtime",fill:"#ef4444",radius:[8,8,0,0],name:"Downtime (hours)"})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Device Availability Report"})}),e.jsx(U,{children:i?e.jsx("div",{className:"text-center py-12",children:e.jsx(ct,{size:"lg",text:"Loading report..."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(es,{children:[e.jsx(ts,{children:e.jsxs(Ue,{children:[e.jsx(ne,{children:"Device Name"}),e.jsx(ne,{children:"Region"}),e.jsx(ne,{children:"Type"}),e.jsx(ne,{children:"Availability"}),e.jsx(ne,{children:"Downtime"}),e.jsx(ne,{children:"Incidents"})]})}),e.jsx(ss,{children:d==null?void 0:d.devices.map(j=>e.jsxs(Ue,{children:[e.jsx(re,{className:"font-medium text-gray-900 dark:text-gray-100",children:j.name}),e.jsx(re,{children:e.jsx(ee,{variant:"default",children:j.region})}),e.jsx(re,{className:"text-gray-900 dark:text-gray-100",children:j.device_type}),e.jsx(re,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ee,{variant:j.availability_percent>=99?"success":j.availability_percent>=95?"warning":"danger",children:[j.availability_percent.toFixed(1),"%"]})})}),e.jsxs(re,{className:"text-gray-900 dark:text-gray-100",children:[j.downtime_hours.toFixed(2),"h"]}),e.jsx(re,{className:"text-gray-900 dark:text-gray-100",children:j.incidents})]},j.hostid))})]})})})]})]}),t==="mttr"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(O,{children:e.jsx(U,{className:"py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Overall MTTR"}),e.jsx("p",{className:"text-4xl font-bold text-ward-green",children:(u==null?void 0:u.avg_mttr_minutes)||0}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"minutes"})]})})}),e.jsx(O,{children:e.jsx(U,{className:"py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Total Incidents"}),e.jsx("p",{className:"text-4xl font-bold text-orange-600",children:(u==null?void 0:u.total_incidents)||0}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"this period"})]})})}),e.jsx(O,{className:u!=null&&u.trends.improving?"border-green-500 dark:border-green-600":"border-orange-500 dark:border-orange-600",children:e.jsx(U,{className:"py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Trend"}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:u!=null&&u.trends.improving?e.jsx(zl,{className:"h-8 w-8 text-green-500"}):e.jsx(Za,{className:"h-8 w-8 text-orange-500"})}),e.jsx("p",{className:`text-sm mt-1 font-medium ${u!=null&&u.trends.improving?"text-green-600":"text-orange-600"}`,children:u!=null&&u.trends.improving?"Improving":"Needs Attention"})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"MTTR by Device"})}),e.jsx(U,{children:e.jsx(vt,{width:"100%",height:300,children:e.jsxs(Br,{data:y,children:[e.jsx(bt,{strokeDasharray:"3 3",stroke:"#f0f0f0",className:"dark:stroke-gray-700"}),e.jsx(jt,{dataKey:"name",stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(wt,{stroke:"#9ca3af",className:"dark:stroke-gray-500"}),e.jsx(Nt,{contentStyle:{backgroundColor:"rgb(31 41 55)",border:"1px solid rgb(75 85 99)",borderRadius:"8px",color:"rgb(243 244 246)"},labelStyle:{color:"rgb(243 244 246)"}}),e.jsx(Yl,{wrapperStyle:{color:"rgb(156 163 175)"}}),e.jsx(ca,{dataKey:"downtime",fill:"#5EBBA8",name:"Downtime (min)",radius:[8,8,0,0]}),e.jsx(ca,{dataKey:"incidents",fill:"#f59e0b",name:"Incidents",radius:[8,8,0,0]})]})})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"Top 10 Devices Requiring Attention"})}),e.jsx(U,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(es,{children:[e.jsx(ts,{children:e.jsxs(Ue,{children:[e.jsx(ne,{children:"#"}),e.jsx(ne,{children:"Device"}),e.jsx(ne,{children:"Region"}),e.jsx(ne,{children:"Incidents"}),e.jsx(ne,{children:"Total Downtime"})]})}),e.jsx(ss,{children:u==null?void 0:u.top_problem_devices.map((j,M)=>e.jsxs(Ue,{children:[e.jsx(re,{children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-ward-green text-white font-semibold text-sm",children:M+1})}),e.jsx(re,{className:"font-medium text-gray-900 dark:text-gray-100",children:j.name}),e.jsx(re,{children:e.jsx(ee,{variant:"default",children:j.region})}),e.jsx(re,{className:"text-gray-900 dark:text-gray-100",children:j.incident_count}),e.jsxs(re,{className:"text-gray-900 dark:text-gray-100",children:[j.downtime_minutes," min"]})]},j.hostid))})]})})})]})]}),t==="sla"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsx(se,{children:"SLA Compliance Dashboard"})}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-lg border-2 border-green-500 dark:border-green-600 bg-green-50 dark:bg-green-900/20",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"99.9% SLA"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-1",children:"85%"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Devices Meeting SLA"})]}),e.jsxs("div",{className:"p-6 rounded-lg border-2 border-yellow-500 dark:border-yellow-600 bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"99.5% SLA"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400 mb-1",children:"92%"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Devices Meeting SLA"})]}),e.jsxs("div",{className:"p-6 rounded-lg border-2 border-red-500 dark:border-red-600 bg-red-50 dark:bg-red-900/20",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Below Target"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-1",children:"12"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Devices Need Attention"})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ze,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Information"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"SLA tracking requires historical data. This feature will be enhanced once connected to monitoring history API."})]})]})})]})]})]})}function Ig(){var he;const[t,s]=g.useState(null),[a,r]=g.useState(null),[n,o]=g.useState(!1),[i,l]=g.useState("all"),[d,c]=g.useState("all"),[u,m]=g.useState(""),[x,h]=g.useState(null),[S,p]=g.useState(!1),[y,j]=g.useState(""),[M,E]=g.useState(""),{data:R,isLoading:w}=$e({queryKey:["devices"],queryFn:()=>Ee.getAll()}),v=(R==null?void 0:R.data)||[],_=["all","ATM","Paybox","NVR","Biostar","Router","Switch","Access Point"],P=g.useMemo(()=>{const N={};return v.forEach(A=>{const F=A.region||"Unknown";N[F]||(N[F]={total:0,online:0,offline:0}),N[F].total++,A.ping_status==="Up"||A.available==="Available"?N[F].online++:(A.ping_status==="Down"||A.available==="Unavailable")&&N[F].offline++}),N},[v]),$=g.useMemo(()=>{if(!t)return{};const N={};return v.filter(A=>A.region===t).forEach(A=>{const F=A.branch||"Unknown";N[F]||(N[F]={total:0,online:0,offline:0,devices:[]}),N[F].total++,N[F].devices.push(A),A.ping_status==="Up"||A.available==="Available"?N[F].online++:(A.ping_status==="Down"||A.available==="Unavailable")&&N[F].offline++}),N},[v,t]),G=g.useMemo(()=>{if(!a||!$[a])return[];let N=$[a].devices;return i!=="all"&&(N=N.filter(A=>A.device_type===i)),N},[a,$,i]),k=g.useMemo(()=>{if(!t||!n)return[];let N=v.filter(A=>A.region===t);if(u){const A=u.toLowerCase();N=N.filter(F=>F.display_name.toLowerCase().includes(A)||F.ip.toLowerCase().includes(A)||F.branch.toLowerCase().includes(A))}return i!=="all"&&(N=N.filter(A=>A.device_type===i)),d!=="all"&&(d==="online"?N=N.filter(A=>A.ping_status==="Up"||A.available==="Available"):d==="offline"&&(N=N.filter(A=>A.ping_status==="Down"||A.available==="Unavailable"))),N},[v,t,n,u,i,d]),I=N=>{h(N)},ae=(N,A)=>{j(N),E(A),p(!0)},pe=()=>{o(!0),r(null)},ve=()=>{o(!1),r(null),l("all"),c("all"),m("")};return w?e.jsxs("div",{className:"space-y-6",children:[e.jsx(tt,{variant:"card"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(N=>e.jsx(tt,{variant:"card"},N))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Regions"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:a?`Viewing devices in ${a}`:n?`All devices in ${t} (${k.length} devices)`:t?`Viewing cities in ${t}`:"View devices by region and city"})]}),(t||a)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>{s(null),r(null),o(!1),l("all"),c("all"),m("")},className:"text-ward-green hover:text-ward-green-dark font-medium",children:"All Regions"}),t&&e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"h-4 w-4 text-gray-400"}),e.jsx("button",{onClick:ve,className:"text-ward-green hover:text-ward-green-dark font-medium",children:t})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a})]}),n&&!a&&e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:"All Devices"})]})]})]}),(a||n)&&e.jsx(O,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx(X,{placeholder:"Search by name, IP, or branch...",value:u,onChange:N=>m(N.target.value),icon:e.jsx(Ot,{className:"h-5 w-5"})}),e.jsx(Te,{value:d,onChange:N=>c(N.target.value),options:[{value:"all",label:"All Status"},{value:"online",label:"Online"},{value:"offline",label:"Offline"}]}),e.jsx(Te,{value:i,onChange:N=>l(N.target.value),options:[{value:"all",label:"All Types"},..._.filter(N=>N!=="all").map(N=>({value:N,label:N}))]})]}),a&&!n&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Us,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:_.map(N=>e.jsx("button",{onClick:()=>l(N),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i===N?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:N==="all"?"All Types":N},N))})]})]})})}),!t&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(P).sort(([N],[A])=>N.localeCompare(A)).map(([N,A])=>e.jsxs(O,{hover:!0,onClick:()=>s(N),className:"cursor-pointer",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-ward-green/10 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{className:"text-lg",children:N}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[A.total," devices"]})]})]}),e.jsx(ns,{className:"h-5 w-5 text-gray-400"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Online"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.online}),e.jsxs(ee,{variant:"success",dot:!0,children:[A.total>0?Math.round(A.online/A.total*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Offline"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.offline}),e.jsxs(ee,{variant:"danger",dot:!0,children:[A.total>0?Math.round(A.offline/A.total*100):0,"%"]})]})]})]})})]},N))}),t&&!a&&!n&&e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx(U,{className:"p-4",children:e.jsxs(z,{onClick:pe,className:"w-full bg-ward-green hover:bg-ward-green/90",children:[e.jsx(_e,{className:"h-5 w-5 mr-2"}),"View All Devices in ",t," (",((he=P[t])==null?void 0:he.total)||0," devices)"]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries($).sort(([N],[A])=>N.localeCompare(A)).map(([N,A])=>e.jsxs(O,{hover:!0,onClick:()=>r(N),className:"cursor-pointer",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-ward-green/10 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{className:"text-lg",children:N}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[A.total," devices"]})]})]}),e.jsx(ns,{className:"h-5 w-5 text-gray-400"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Online"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.online}),e.jsxs(ee,{variant:"success",dot:!0,children:[A.total>0?Math.round(A.online/A.total*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Offline"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.offline}),e.jsxs(ee,{variant:"danger",dot:!0,children:[A.total>0?Math.round(A.offline/A.total*100):0,"%"]})]})]})]})})]},N))})]}),n&&!a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[k.map(N=>{const A=N.ping_status==="Up"||N.available==="Available",F=N.ping_status||N.available||"Unknown";return e.jsxs(O,{hover:!0,children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-ward-green/10 rounded-lg",children:e.jsx(_e,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{className:"text-base",children:N.display_name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono mt-1",children:N.ip})]})]}),e.jsx(ee,{variant:A?"success":"danger",dot:!0,children:F})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:N.device_type})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Branch:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:N.branch})]}),N.problems>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Problems:"}),e.jsx(ee,{variant:"danger",children:N.problems})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>I(N.hostid),children:[e.jsx(Zt,{className:"h-4 w-4"}),"View"]}),e.jsx(z,{variant:"outline",size:"sm",className:"bg-ward-green/10 hover:bg-ward-green/20 border-ward-green text-ward-green",onClick:K=>{K.stopPropagation(),ae(N.display_name,N.ip)},title:"SSH Access",children:e.jsx(St,{className:"h-4 w-4"})})]})]})]},N.hostid)}),k.length===0&&e.jsx("div",{className:"col-span-full",children:e.jsx(O,{children:e.jsx(U,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No devices found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Try adjusting your filters"})]})})})})]}),a&&!n&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[G.map(N=>{const A=N.ping_status==="Up"||N.available==="Available",F=N.ping_status||N.available||"Unknown";return e.jsxs(O,{hover:!0,children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-ward-green/10 rounded-lg",children:e.jsx(_e,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{className:"text-base",children:N.display_name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono mt-1",children:N.ip})]})]}),e.jsx(ee,{variant:A?"success":"danger",dot:!0,children:F})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:N.device_type})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Branch:"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:N.branch})]}),N.problems>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Problems:"}),e.jsx(ee,{variant:"danger",children:N.problems})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>I(N.hostid),children:[e.jsx(Zt,{className:"h-4 w-4"}),"View"]}),e.jsx(z,{variant:"outline",size:"sm",className:"bg-ward-green/10 hover:bg-ward-green/20 border-ward-green text-ward-green",onClick:K=>{K.stopPropagation(),ae(N.display_name,N.ip)},title:"SSH Access",children:e.jsx(St,{className:"h-4 w-4"})})]})]})]},N.hostid)}),G.length===0&&e.jsx("div",{className:"col-span-full",children:e.jsx(O,{children:e.jsx(U,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No devices found"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["No ",i!=="all"?i:""," devices in ",a]})]})})})})]}),x&&e.jsx(Qo,{open:!!x,onClose:()=>h(null),hostid:x,onOpenSSH:ae}),e.jsx(Jo,{open:S,onClose:()=>p(!1),deviceName:y,deviceIP:M})]})}function Bg(){const[t,s]=g.useState(!1),[a,r]=g.useState("zabbix"),[n,o]=g.useState({url:"",username:"",password:""}),[i,l]=g.useState({smtp_server:"",smtp_port:"587",smtp_user:"",smtp_password:"",from_email:""}),[d,c]=g.useState({email_enabled:!0,slack_enabled:!1,slack_webhook:""}),[u,m]=g.useState(!1),[x,h]=g.useState(!1),[S,p]=g.useState(!1),[y,j]=g.useState(!1),[M,E]=g.useState([]),[R,w]=g.useState(new Set),[v,_]=g.useState([]),[P,$]=g.useState([]),[G,k]=g.useState(!1),[I,ae]=g.useState(""),[pe,ve]=g.useState(!1),[he,N]=g.useState(!1),[A,F]=g.useState(null),[K,ye]=g.useState({username:"",email:"",full_name:"",password:"",role:"technician",region:""});g.useEffect(()=>{a==="users"?J():a==="config"&&(H(),ie())},[a]);const J=async()=>{try{k(!0);const b=await Lt.listUsers();$(b.data)}catch(b){console.error("Failed to load users:",b)}finally{k(!1)}},oe=async()=>{try{await Lt.register(K),ve(!1),T(),J()}catch(b){console.error("Failed to add user:",b)}},le=async()=>{if(A)try{const b=K.password?K:{username:K.username,email:K.email,full_name:K.full_name,role:K.role,region:K.region};await Lt.updateUser(Number(A.id),b),N(!1),T(),F(null),J()}catch(b){console.error("Failed to update user:",b)}},we=async b=>{if(confirm("Are you sure you want to delete this user?"))try{await Lt.deleteUser(Number(b)),J()}catch(me){console.error("Failed to delete user:",me)}},T=()=>{ye({username:"",email:"",full_name:"",password:"",role:"technician",region:""})},L=b=>{F(b),ye({username:b.username,email:b.email,full_name:b.full_name,password:"",role:b.role,region:b.region||""}),N(!0)},f=P.filter(b=>{const me=(b.username||"").toLowerCase(),Ke=(b.email||"").toLowerCase(),Xe=(b.full_name||"").toLowerCase(),ut=I.toLowerCase();return me.includes(ut)||Ke.includes(ut)||Xe.includes(ut)}),D=b=>{switch(b){case"admin":return"danger";case"regional_manager":return"warning";case"technician":return"default";default:return"default"}},V=b=>{switch(b){case"admin":return"ADMIN";case"regional_manager":return"REGIONAL MANAGER";case"technician":return"TECHNICIAN";case"viewer":return"VIEWER";default:return b.toUpperCase()}},W=async()=>{s(!0);try{await Z.post("/settings/zabbix",n),alert("Zabbix settings saved successfully!")}catch(b){console.error("Failed to save Zabbix settings:",b),alert("Failed to save settings")}finally{s(!1)}},Q=async()=>{try{const b=await Z.post("/settings/test-zabbix",n);b.data.success?alert(`Connection successful! Zabbix version: ${b.data.version||"Unknown"}`):alert(`Connection failed: ${b.data.error||"Unknown error"}`)}catch(b){alert(`Connection failed: ${b.message}`)}},H=async()=>{try{const b=await Z.get("/config/monitored-hostgroups"),me=new Set(b.data.monitored_groups.map(Ke=>Ke.groupid));w(me)}catch(b){console.error("Failed to load monitored groups:",b)}},de=async()=>{p(!0);try{const b=await Z.get("/config/zabbix-hostgroups");E(b.data.hostgroups||[])}catch(b){console.error("Failed to load Zabbix host groups:",b),alert("Failed to fetch host groups from Zabbix. Please check your Zabbix configuration.")}finally{p(!1)}},ie=async()=>{try{const b=await Z.get("/config/georgian-cities");_(b.data.cities||[])}catch(b){console.error("Failed to load cities:",b)}},ue=b=>{const me=new Set(R);me.has(b)?me.delete(b):me.add(b),w(me)},ke=async()=>{j(!0);try{const b=M.filter(me=>R.has(me.groupid)).map(me=>({groupid:me.groupid,name:me.name,display_name:me.name}));await Z.post("/config/monitored-hostgroups",{groups:b}),alert("Configuration saved successfully!")}catch(b){console.error("Failed to save configuration:",b),alert("Failed to save configuration")}finally{j(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Configure system settings and integrations"})]}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>r("zabbix"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="zabbix"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(it,{className:"h-4 w-4 inline-block mr-2"}),"Zabbix"]}),e.jsxs("button",{onClick:()=>r("notifications"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="notifications"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(Ta,{className:"h-4 w-4 inline-block mr-2"}),"Notifications"]}),e.jsxs("button",{onClick:()=>r("email"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="email"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(Vr,{className:"h-4 w-4 inline-block mr-2"}),"Email"]}),e.jsxs("button",{onClick:()=>r("security"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="security"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(hs,{className:"h-4 w-4 inline-block mr-2"}),"Security"]}),e.jsxs("button",{onClick:()=>r("users"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="users"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(ia,{className:"h-4 w-4 inline-block mr-2"}),"Users"]}),e.jsxs("button",{onClick:()=>r("config"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="config"?"bg-ward-green text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(Xa,{className:"h-4 w-4 inline-block mr-2"}),"Config"]})]})})}),a==="zabbix"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-ward-green/10 rounded-lg",children:e.jsx(it,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{children:"Zabbix Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure connection to your Zabbix monitoring server"})]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsx(X,{label:"Zabbix API URL",placeholder:"http://192.168.200.178:8080/api_jsonrpc.php",value:n.url,onChange:b=>o({...n,url:b.target.value}),helperText:"Full URL to Zabbix API endpoint"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(X,{label:"Username",placeholder:"admin",value:n.username,onChange:b=>o({...n,username:b.target.value})}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",placeholder:"Enter password",value:n.password,onChange:b=>o({...n,password:b.target.value}),autoComplete:"new-password",className:"w-full px-4 py-2 pr-12 rounded-lg border transition-all duration-200 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-ward-green focus:border-transparent border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:u?e.jsx(Ir,{className:"h-5 w-5"}):e.jsx(Zt,{className:"h-5 w-5"})})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(z,{variant:"outline",onClick:Q,children:[e.jsx(Kl,{className:"h-4 w-4 mr-2"}),"Test Connection"]}),e.jsx(z,{onClick:W,disabled:t,children:t?"Saving...":"Save Configuration"})]})]})]}),a==="notifications"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-ward-green/10 rounded-lg",children:e.jsx(Ta,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{children:"Notification Settings"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure alert notifications and channels"})]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:d.email_enabled,onChange:b=>c({...d,email_enabled:b.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive alerts via email"})]})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:d.slack_enabled,onChange:b=>c({...d,slack_enabled:b.target.checked}),className:"rounded border-gray-300 text-ward-green focus:ring-ward-green w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Slack Notifications"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Send alerts to Slack channel"})]})]})]}),d.slack_enabled&&e.jsx(X,{label:"Slack Webhook URL",placeholder:"https://hooks.slack.com/services/...",value:d.slack_webhook,onChange:b=>c({...d,slack_webhook:b.target.value})}),e.jsx(z,{children:"Save Notification Settings"})]})]}),a==="email"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-ward-green/10 rounded-lg",children:e.jsx(Vr,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{children:"Email Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure SMTP server for email notifications"})]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(X,{label:"SMTP Server",placeholder:"smtp.gmail.com",value:i.smtp_server,onChange:b=>l({...i,smtp_server:b.target.value})})}),e.jsx(X,{label:"Port",placeholder:"587",value:i.smtp_port,onChange:b=>l({...i,smtp_port:b.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(X,{label:"SMTP Username",placeholder:"your-email@example.com",value:i.smtp_user,onChange:b=>l({...i,smtp_user:b.target.value})}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"SMTP Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",placeholder:"Enter password",value:i.smtp_password,onChange:b=>l({...i,smtp_password:b.target.value}),autoComplete:"new-password",className:"w-full px-4 py-2 pr-12 rounded-lg border transition-all duration-200 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-ward-green focus:border-transparent border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}),e.jsx("button",{type:"button",onClick:()=>h(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:x?e.jsx(Ir,{className:"h-5 w-5"}):e.jsx(Zt,{className:"h-5 w-5"})})]})]})]}),e.jsx(X,{label:"From Email",placeholder:"noreply@wardops.com",value:i.from_email,onChange:b=>l({...i,from_email:b.target.value})}),e.jsx(z,{children:"Save Email Settings"})]})]}),a==="security"&&e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-ward-green/10 rounded-lg",children:e.jsx(hs,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{children:"Security Settings"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage authentication and access control"})]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-ward-green focus:ring-ward-green w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enforce Password Complexity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Require strong passwords for all users"})]})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-ward-green focus:ring-ward-green w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enable Session Timeout"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Auto-logout after 30 minutes of inactivity"})]})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-ward-green focus:ring-ward-green w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enable Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Require 2FA for admin users"})]})]})]}),e.jsx(z,{children:"Save Security Settings"})]})]}),a==="users"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"User Management"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage system users and permissions"})]}),e.jsxs(z,{onClick:()=>ve(!0),children:[e.jsx(yi,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),e.jsx(O,{children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(X,{type:"text",placeholder:"Search users...",value:I,onChange:b=>ae(b.target.value),className:"pl-10"})]})})}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{className:"h-5 w-5 text-ward-green"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"System Users"})]})}),e.jsx(U,{children:G?e.jsx("div",{className:"text-center py-12",children:e.jsx(ct,{size:"lg",text:"Loading users..."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(es,{children:[e.jsx(ts,{children:e.jsxs(Ue,{children:[e.jsx(ne,{children:"Username"}),e.jsx(ne,{children:"Full Name"}),e.jsx(ne,{children:"Email"}),e.jsx(ne,{children:"Role"}),e.jsx(ne,{children:"Region"}),e.jsx(ne,{children:"Status"}),e.jsx(ne,{className:"text-right",children:"Actions"})]})}),e.jsx(ss,{children:f.length===0?e.jsx(Ue,{children:e.jsxs(re,{colSpan:7,className:"text-center py-12",children:[e.jsx(ia,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No users found"})]})}):f.map(b=>e.jsxs(Ue,{children:[e.jsx(re,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.role==="admin"&&e.jsx(hs,{className:"h-4 w-4 text-red-500"}),b.username]})}),e.jsx(re,{children:b.full_name}),e.jsx(re,{children:b.email}),e.jsx(re,{children:e.jsx(ee,{variant:D(b.role),children:V(b.role)})}),e.jsx(re,{children:b.region?e.jsx(ee,{variant:"default",children:b.region}):e.jsx("span",{className:"text-gray-400",children:"All Regions"})}),e.jsx(re,{children:e.jsx(ee,{variant:b.is_active?"success":"default",children:b.is_active?"Active":"Inactive"})}),e.jsx(re,{children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(z,{variant:"outline",size:"sm",onClick:()=>L(b),children:e.jsx(Hl,{className:"h-4 w-4"})}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>we(b.id),children:e.jsx(Wl,{className:"h-4 w-4 text-red-500"})})]})})]},b.id))})]})})})]}),e.jsx(rt,{open:pe,onClose:()=>{ve(!1),T()},title:"Add New User",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{label:"Username",value:K.username,onChange:b=>ye({...K,username:b.target.value}),placeholder:"Enter username",required:!0}),e.jsx(X,{label:"Full Name",value:K.full_name,onChange:b=>ye({...K,full_name:b.target.value}),placeholder:"Enter full name",required:!0}),e.jsx(X,{label:"Email",type:"email",value:K.email,onChange:b=>ye({...K,email:b.target.value}),placeholder:"Enter email",required:!0}),e.jsx(X,{label:"Password",type:"password",value:K.password,onChange:b=>ye({...K,password:b.target.value}),placeholder:"Enter password",autoComplete:"new-password",required:!0}),e.jsx(Te,{label:"Role",value:K.role,onChange:b=>ye({...K,role:b.target.value}),options:[{value:"technician",label:"Technician"},{value:"regional_manager",label:"Regional Manager"},{value:"admin",label:"Administrator"},{value:"viewer",label:"Viewer"}]}),K.role==="regional_manager"&&e.jsxs(Te,{label:"Region",value:K.region,onChange:b=>ye({...K,region:b.target.value}),helperText:"Regional managers only see devices in their region",children:[e.jsx("option",{value:"",children:"Select a region"}),e.jsx("option",{value:"Tbilisi",children:"Tbilisi"}),e.jsx("option",{value:"Kvemo Kartli",children:"Kvemo Kartli"}),e.jsx("option",{value:"Kakheti",children:"Kakheti"}),e.jsx("option",{value:"Mtskheta-Mtianeti",children:"Mtskheta-Mtianeti"}),e.jsx("option",{value:"Samtskhe-Javakheti",children:"Samtskhe-Javakheti"}),e.jsx("option",{value:"Shida Kartli",children:"Shida Kartli"}),e.jsx("option",{value:"Imereti",children:"Imereti"}),e.jsx("option",{value:"Samegrelo",children:"Samegrelo"}),e.jsx("option",{value:"Guria",children:"Guria"}),e.jsx("option",{value:"Achara",children:"Achara"}),e.jsx("option",{value:"Racha-Lechkhumi",children:"Racha-Lechkhumi"}),e.jsx("option",{value:"Kvemo Svaneti",children:"Kvemo Svaneti"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(z,{onClick:oe,className:"flex-1",children:"Add User"}),e.jsx(z,{variant:"outline",onClick:()=>{ve(!1),T()},className:"flex-1",children:"Cancel"})]})]})}),e.jsx(rt,{open:he,onClose:()=>{N(!1),T(),F(null)},title:"Edit User",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{label:"Username",value:K.username,disabled:!0,className:"bg-gray-50 dark:bg-gray-900"}),e.jsx(X,{label:"Full Name",value:K.full_name,onChange:b=>ye({...K,full_name:b.target.value}),placeholder:"Enter full name"}),e.jsx(X,{label:"Email",type:"email",value:K.email,onChange:b=>ye({...K,email:b.target.value}),placeholder:"Enter email"}),e.jsx(X,{label:"New Password (leave empty to keep current)",type:"password",value:K.password,onChange:b=>ye({...K,password:b.target.value}),placeholder:"Enter new password",autoComplete:"new-password"}),e.jsx(Te,{label:"Role",value:K.role,onChange:b=>ye({...K,role:b.target.value}),options:[{value:"technician",label:"Technician"},{value:"regional_manager",label:"Regional Manager"},{value:"admin",label:"Administrator"},{value:"viewer",label:"Viewer"}]}),K.role==="regional_manager"&&e.jsxs(Te,{label:"Region",value:K.region,onChange:b=>ye({...K,region:b.target.value}),helperText:"Regional managers only see devices in their region",children:[e.jsx("option",{value:"",children:"Select a region"}),e.jsx("option",{value:"Tbilisi",children:"Tbilisi"}),e.jsx("option",{value:"Kvemo Kartli",children:"Kvemo Kartli"}),e.jsx("option",{value:"Kakheti",children:"Kakheti"}),e.jsx("option",{value:"Mtskheta-Mtianeti",children:"Mtskheta-Mtianeti"}),e.jsx("option",{value:"Samtskhe-Javakheti",children:"Samtskhe-Javakheti"}),e.jsx("option",{value:"Shida Kartli",children:"Shida Kartli"}),e.jsx("option",{value:"Imereti",children:"Imereti"}),e.jsx("option",{value:"Samegrelo",children:"Samegrelo"}),e.jsx("option",{value:"Guria",children:"Guria"}),e.jsx("option",{value:"Achara",children:"Achara"}),e.jsx("option",{value:"Racha-Lechkhumi",children:"Racha-Lechkhumi"}),e.jsx("option",{value:"Kvemo Svaneti",children:"Kvemo Svaneti"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(z,{onClick:le,className:"flex-1",children:"Save Changes"}),e.jsx(z,{variant:"outline",onClick:()=>{N(!1),T(),F(null)},className:"flex-1",children:"Cancel"})]})]})})]}),a==="config"&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-ward-green/10 rounded-lg",children:e.jsx(it,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{children:"Select Host Groups to Monitor"}),R.size>0&&e.jsxs(ee,{variant:"default",className:"mt-1",children:[R.size," selected"]})]})]}),e.jsxs(z,{onClick:de,disabled:S,children:[e.jsx(Ya,{className:`h-4 w-4 mr-2 ${S?"animate-spin":""}`}),"Fetch from Zabbix"]})]})}),e.jsx(U,{children:M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(it,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'Click "Fetch from Zabbix" to load available host groups'})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[500px] overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:M.map(b=>e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${R.has(b.groupid)?"border-ward-green bg-ward-green/5":"border-gray-200 dark:border-gray-700 hover:border-ward-green/50"}`,children:[e.jsx("input",{type:"checkbox",checked:R.has(b.groupid),onChange:()=>ue(b.groupid),className:"mt-1 rounded border-gray-300 text-ward-green focus:ring-ward-green w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["ID: ",b.groupid]})]})]},b.groupid))}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(z,{onClick:ke,disabled:y||R.size===0,children:[e.jsx(Gl,{className:"h-4 w-4 mr-2"}),y?"Saving...":"Save Configuration"]})})]})})]}),e.jsxs(O,{children:[e.jsx(te,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-ward-green/10 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-ward-green"})}),e.jsxs("div",{children:[e.jsx(se,{children:"City-Region Mapping"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configured cities with coordinates for map visualization"})]})]})}),e.jsx(U,{children:v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ft,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading cities..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(b=>e.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.name_en}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e.jsx(ee,{variant:"default",children:b.region_name})})]}),e.jsx(Ft,{className:"h-5 w-5 text-ward-green"})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Latitude"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100",children:b.latitude.toFixed(4)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Longitude"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100",children:b.longitude.toFixed(4)})]})]})})]},b.id))})})]})]})]})}function Og(){const t=ci(),[s,a]=g.useState({username:"",password:""}),r=us({mutationFn:({username:o,password:i})=>Lt.login(o,i),onSuccess:o=>{localStorage.setItem("token",o.data.access_token),Fe.success("Login successful"),t("/")},onError:()=>{Fe.error("Invalid username or password")}}),n=o=>{o.preventDefault(),r.mutate({username:s.username,password:s.password})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-ward-green to-ward-green-dark flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-10"}),e.jsx(O,{className:"w-full max-w-md relative z-10 shadow-2xl",children:e.jsxs(U,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-ward-green/10 rounded-full",children:e.jsx("img",{src:"/logo-ward.svg",alt:"WARD FLUX",className:"h-16 w-16"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"WARD FLUX"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Network Monitoring Platform"})]}),e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsx(X,{label:"Username",type:"text",placeholder:"Enter your username",value:s.username,onChange:o=>a({...s,username:o.target.value}),icon:e.jsx(hi,{className:"h-5 w-5"}),required:!0}),e.jsx(X,{label:"Password",type:"password",placeholder:"Enter your password",value:s.password,onChange:o=>a({...s,password:o.target.value}),icon:e.jsx(ql,{className:"h-5 w-5"}),required:!0}),e.jsx(z,{type:"submit",className:"w-full",size:"lg",loading:r.isPending,children:"Sign In"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials:"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxs("p",{children:["Username: ",e.jsx("span",{className:"font-mono bg-blue-100 px-2 py-0.5 rounded",children:"admin"})]}),e.jsxs("p",{children:["Password: ",e.jsx("span",{className:"font-mono bg-blue-100 px-2 py-0.5 rounded",children:"admin"})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Â© 2025 WARD Tech Solutions. All rights reserved."})})]})}),e.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-white/20 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-10 right-10 w-32 h-32 bg-white/20 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-white/10 rounded-full blur-lg"})]})}function Ug(){const t=localStorage.getItem("token");return!t&&window.location.pathname!=="/login"?e.jsx(Ps,{to:"/login"}):t&&window.location.pathname==="/login"?e.jsx(Ps,{to:"/"}):e.jsxs(e.Fragment,{children:[e.jsx(_c,{position:"top-right",richColors:!0}),e.jsxs(xl,{children:[e.jsx(Me,{path:"/login",element:e.jsx(Og,{})}),e.jsxs(Me,{path:"/",element:e.jsx(Bc,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(Kc,{})}),e.jsx(Me,{path:"discovery",element:e.jsx(yg,{})}),e.jsx(Me,{path:"devices",element:e.jsx(kg,{})}),e.jsx(Me,{path:"devices/:id",element:e.jsx(Sg,{})}),e.jsx(Me,{path:"monitor",element:e.jsx(Ag,{})}),e.jsx(Me,{path:"map",element:e.jsx(Eg,{})}),e.jsx(Me,{path:"topology",element:e.jsx(_g,{})}),e.jsx(Me,{path:"diagnostics",element:e.jsx(Fg,{})}),e.jsx(Me,{path:"reports",element:e.jsx(Vg,{})}),e.jsx(Me,{path:"regions",element:e.jsx(Ig,{})}),e.jsx(Me,{path:"users",element:e.jsx(Ps,{to:"/settings",replace:!0})}),e.jsx(Me,{path:"settings",element:e.jsx(Bg,{})}),e.jsx(Me,{path:"config",element:e.jsx(Ps,{to:"/settings",replace:!0})})]})]})]})}const $g=new il({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5e3}}});nc.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(fl,{children:e.jsx(ol,{client:$g,children:e.jsx(lc,{children:e.jsx(Ug,{})})})})}));
